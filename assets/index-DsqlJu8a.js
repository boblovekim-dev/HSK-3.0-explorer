(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function Gy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hc={exports:{}},Gs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function ES(){if(bm)return Gs;bm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Gs.Fragment=e,Gs.jsx=i,Gs.jsxs=i,Gs}var Cm;function wS(){return Cm||(Cm=1,hc.exports=ES()),hc.exports}var b=wS(),pc={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function AS(){if(Rm)return ce;Rm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=S&&I[S]||I["@@iterator"],typeof I=="function"?I:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,x={};function D(I,z,X){this.props=I,this.context=z,this.refs=x,this.updater=X||A}D.prototype.isReactComponent={},D.prototype.setState=function(I,z){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,z,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function G(){}G.prototype=D.prototype;function O(I,z,X){this.props=I,this.context=z,this.refs=x,this.updater=X||A}var $=O.prototype=new G;$.constructor=O,R($,D.prototype),$.isPureReactComponent=!0;var Y=Array.isArray;function J(){}var F={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function W(I,z,X){var j=X.ref;return{$$typeof:t,type:I,key:z,ref:j!==void 0?j:null,props:X}}function pe(I,z){return W(I.type,z,I.props)}function Ee(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function Ge(I){var z={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(X){return z[X]})}var we=/\/+/g;function oe(I,z){return typeof I=="object"&&I!==null&&I.key!=null?Ge(""+I.key):z.toString(36)}function Re(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(J,J):(I.status="pending",I.then(function(z){I.status==="pending"&&(I.status="fulfilled",I.value=z)},function(z){I.status==="pending"&&(I.status="rejected",I.reason=z)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function q(I,z,X,j,de){var me=typeof I;(me==="undefined"||me==="boolean")&&(I=null);var Ne=!1;if(I===null)Ne=!0;else switch(me){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(I.$$typeof){case t:case e:Ne=!0;break;case v:return Ne=I._init,q(Ne(I._payload),z,X,j,de)}}if(Ne)return de=de(I),Ne=j===""?"."+oe(I,0):j,Y(de)?(X="",Ne!=null&&(X=Ne.replace(we,"$&/")+"/"),q(de,z,X,"",function(Jo){return Jo})):de!=null&&(Ee(de)&&(de=pe(de,X+(de.key==null||I&&I.key===de.key?"":(""+de.key).replace(we,"$&/")+"/")+Ne)),z.push(de)),1;Ne=0;var yt=j===""?".":j+":";if(Y(I))for(var Ye=0;Ye<I.length;Ye++)j=I[Ye],me=yt+oe(j,Ye),Ne+=q(j,z,X,me,de);else if(Ye=w(I),typeof Ye=="function")for(I=Ye.call(I),Ye=0;!(j=I.next()).done;)j=j.value,me=yt+oe(j,Ye++),Ne+=q(j,z,X,me,de);else if(me==="object"){if(typeof I.then=="function")return q(Re(I),z,X,j,de);throw z=String(I),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function K(I,z,X){if(I==null)return I;var j=[],de=0;return q(I,j,"","",function(me){return z.call(X,me,de++)}),j}function le(I){if(I._status===-1){var z=I._result;z=z(),z.then(function(X){(I._status===0||I._status===-1)&&(I._status=1,I._result=X)},function(X){(I._status===0||I._status===-1)&&(I._status=2,I._result=X)}),I._status===-1&&(I._status=0,I._result=z)}if(I._status===1)return I._result.default;throw I._result}var De=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Pe={map:K,forEach:function(I,z,X){K(I,function(){z.apply(this,arguments)},X)},count:function(I){var z=0;return K(I,function(){z++}),z},toArray:function(I){return K(I,function(z){return z})||[]},only:function(I){if(!Ee(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return ce.Activity=_,ce.Children=Pe,ce.Component=D,ce.Fragment=i,ce.Profiler=a,ce.PureComponent=O,ce.StrictMode=s,ce.Suspense=g,ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ce.__COMPILER_RUNTIME={__proto__:null,c:function(I){return F.H.useMemoCache(I)}},ce.cache=function(I){return function(){return I.apply(null,arguments)}},ce.cacheSignal=function(){return null},ce.cloneElement=function(I,z,X){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var j=R({},I.props),de=I.key;if(z!=null)for(me in z.key!==void 0&&(de=""+z.key),z)!ae.call(z,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&z.ref===void 0||(j[me]=z[me]);var me=arguments.length-2;if(me===1)j.children=X;else if(1<me){for(var Ne=Array(me),yt=0;yt<me;yt++)Ne[yt]=arguments[yt+2];j.children=Ne}return W(I.type,de,j)},ce.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},ce.createElement=function(I,z,X){var j,de={},me=null;if(z!=null)for(j in z.key!==void 0&&(me=""+z.key),z)ae.call(z,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(de[j]=z[j]);var Ne=arguments.length-2;if(Ne===1)de.children=X;else if(1<Ne){for(var yt=Array(Ne),Ye=0;Ye<Ne;Ye++)yt[Ye]=arguments[Ye+2];de.children=yt}if(I&&I.defaultProps)for(j in Ne=I.defaultProps,Ne)de[j]===void 0&&(de[j]=Ne[j]);return W(I,me,de)},ce.createRef=function(){return{current:null}},ce.forwardRef=function(I){return{$$typeof:h,render:I}},ce.isValidElement=Ee,ce.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:le}},ce.memo=function(I,z){return{$$typeof:p,type:I,compare:z===void 0?null:z}},ce.startTransition=function(I){var z=F.T,X={};F.T=X;try{var j=I(),de=F.S;de!==null&&de(X,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(J,De)}catch(me){De(me)}finally{z!==null&&X.types!==null&&(z.types=X.types),F.T=z}},ce.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ce.use=function(I){return F.H.use(I)},ce.useActionState=function(I,z,X){return F.H.useActionState(I,z,X)},ce.useCallback=function(I,z){return F.H.useCallback(I,z)},ce.useContext=function(I){return F.H.useContext(I)},ce.useDebugValue=function(){},ce.useDeferredValue=function(I,z){return F.H.useDeferredValue(I,z)},ce.useEffect=function(I,z){return F.H.useEffect(I,z)},ce.useEffectEvent=function(I){return F.H.useEffectEvent(I)},ce.useId=function(){return F.H.useId()},ce.useImperativeHandle=function(I,z,X){return F.H.useImperativeHandle(I,z,X)},ce.useInsertionEffect=function(I,z){return F.H.useInsertionEffect(I,z)},ce.useLayoutEffect=function(I,z){return F.H.useLayoutEffect(I,z)},ce.useMemo=function(I,z){return F.H.useMemo(I,z)},ce.useOptimistic=function(I,z){return F.H.useOptimistic(I,z)},ce.useReducer=function(I,z,X){return F.H.useReducer(I,z,X)},ce.useRef=function(I){return F.H.useRef(I)},ce.useState=function(I){return F.H.useState(I)},ce.useSyncExternalStore=function(I,z,X){return F.H.useSyncExternalStore(I,z,X)},ce.useTransition=function(){return F.H.useTransition()},ce.version="19.2.3",ce}var xm;function nd(){return xm||(xm=1,pc.exports=AS()),pc.exports}var Ve=nd();const bS=Gy(Ve);var mc={exports:{}},Hs={},gc={exports:{}},yc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function CS(){return Nm||(Nm=1,(function(t){function e(q,K){var le=q.length;q.push(K);e:for(;0<le;){var De=le-1>>>1,Pe=q[De];if(0<a(Pe,K))q[De]=K,q[le]=Pe,le=De;else break e}}function i(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var K=q[0],le=q.pop();if(le!==K){q[0]=le;e:for(var De=0,Pe=q.length,I=Pe>>>1;De<I;){var z=2*(De+1)-1,X=q[z],j=z+1,de=q[j];if(0>a(X,le))j<Pe&&0>a(de,X)?(q[De]=de,q[j]=le,De=j):(q[De]=X,q[z]=le,De=z);else if(j<Pe&&0>a(de,le))q[De]=de,q[j]=le,De=j;else break e}}return K}function a(q,K){var le=q.sortIndex-K.sortIndex;return le!==0?le:q.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,_=null,S=3,w=!1,A=!1,R=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function $(q){for(var K=i(p);K!==null;){if(K.callback===null)s(p);else if(K.startTime<=q)s(p),K.sortIndex=K.expirationTime,e(g,K);else break;K=i(p)}}function Y(q){if(R=!1,$(q),!A)if(i(g)!==null)A=!0,J||(J=!0,Ge());else{var K=i(p);K!==null&&Re(Y,K.startTime-q)}}var J=!1,F=-1,ae=5,W=-1;function pe(){return x?!0:!(t.unstable_now()-W<ae)}function Ee(){if(x=!1,J){var q=t.unstable_now();W=q;var K=!0;try{e:{A=!1,R&&(R=!1,G(F),F=-1),w=!0;var le=S;try{t:{for($(q),_=i(g);_!==null&&!(_.expirationTime>q&&pe());){var De=_.callback;if(typeof De=="function"){_.callback=null,S=_.priorityLevel;var Pe=De(_.expirationTime<=q);if(q=t.unstable_now(),typeof Pe=="function"){_.callback=Pe,$(q),K=!0;break t}_===i(g)&&s(g),$(q)}else s(g);_=i(g)}if(_!==null)K=!0;else{var I=i(p);I!==null&&Re(Y,I.startTime-q),K=!1}}break e}finally{_=null,S=le,w=!1}K=void 0}}finally{K?Ge():J=!1}}}var Ge;if(typeof O=="function")Ge=function(){O(Ee)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,oe=we.port2;we.port1.onmessage=Ee,Ge=function(){oe.postMessage(null)}}else Ge=function(){D(Ee,0)};function Re(q,K){F=D(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(q){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var le=S;S=K;try{return q()}finally{S=le}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=S;S=q;try{return K()}finally{S=le}},t.unstable_scheduleCallback=function(q,K,le){var De=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?De+le:De):le=De,q){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=le+Pe,q={id:v++,callback:K,priorityLevel:q,startTime:le,expirationTime:Pe,sortIndex:-1},le>De?(q.sortIndex=le,e(p,q),i(g)===null&&q===i(p)&&(R?(G(F),F=-1):R=!0,Re(Y,le-De))):(q.sortIndex=Pe,e(g,q),A||w||(A=!0,J||(J=!0,Ge()))),q},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(q){var K=S;return function(){var le=S;S=K;try{return q.apply(this,arguments)}finally{S=le}}}})(yc)),yc}var Im;function RS(){return Im||(Im=1,gc.exports=CS()),gc.exports}var vc={exports:{}},mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function xS(){if(Mm)return mt;Mm=1;var t=nd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,mt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},mt.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},mt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},mt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},mt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:w}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},mt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},mt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},mt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},mt.requestFormReset=function(g){s.d.r(g)},mt.unstable_batchedUpdates=function(g,p){return g(p)},mt.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},mt.useFormStatus=function(){return c.H.useHostTransitionStatus()},mt.version="19.2.3",mt}var Dm;function NS(){if(Dm)return vc.exports;Dm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vc.exports=xS(),vc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function IS(){if(km)return Hs;km=1;var t=RS(),e=nd(),i=NS();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function h(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var r=n,u=o;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return g(m),n;if(y===u)return g(m),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=m,u=y;else{for(var T=!1,E=m.child;E;){if(E===r){T=!0,r=m,u=y;break}if(E===u){T=!0,u=m,r=y;break}E=E.sibling}if(!T){for(E=y.child;E;){if(E===r){T=!0,r=y,u=m;break}if(E===u){T=!0,u=y,r=m;break}E=E.sibling}if(!T)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function Ge(n){return n===null||typeof n!="object"?null:(n=Ee&&n[Ee]||n["@@iterator"],typeof n=="function"?n:null)}var we=Symbol.for("react.client.reference");function oe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===we?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case D:return"Profiler";case x:return"StrictMode";case Y:return"Suspense";case J:return"SuspenseList";case W:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case O:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case $:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F:return o=n.displayName||null,o!==null?o:oe(n.type)||"Memo";case ae:o=n._payload,n=n._init;try{return oe(n(o))}catch{}}return null}var Re=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},De=[],Pe=-1;function I(n){return{current:n}}function z(n){0>Pe||(n.current=De[Pe],De[Pe]=null,Pe--)}function X(n,o){Pe++,De[Pe]=n.current,n.current=o}var j=I(null),de=I(null),me=I(null),Ne=I(null);function yt(n,o){switch(X(me,o),X(de,n),X(j,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Yp(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Yp(o),n=Xp(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(j),X(j,n)}function Ye(){z(j),z(de),z(me)}function Jo(n){n.memoizedState!==null&&X(Ne,n);var o=j.current,r=Xp(o,n.type);o!==r&&(X(de,n),X(j,r))}function er(n){de.current===n&&(z(j),z(de)),Ne.current===n&&(z(Ne),Os._currentValue=le)}var Xa,wd;function fi(n){if(Xa===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Xa=o&&o[1]||"",wd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xa+n+wd}var Qa=!1;function Wa(n,o){if(!n||Qa)return"";Qa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(L){var P=L}Reflect.construct(n,[],V)}else{try{V.call()}catch(L){P=L}n.call(V.prototype)}}else{try{throw Error()}catch(L){P=L}(V=n())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(L){if(L&&P&&typeof L.stack=="string")return[L.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],E=y[1];if(T&&E){var C=T.split(`
`),U=E.split(`
`);for(m=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;if(u===C.length||m===U.length)for(u=C.length-1,m=U.length-1;1<=u&&0<=m&&C[u]!==U[m];)m--;for(;1<=u&&0<=m;u--,m--)if(C[u]!==U[m]){if(u!==1||m!==1)do if(u--,m--,0>m||C[u]!==U[m]){var H=`
`+C[u].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=u&&0<=m);break}}}finally{Qa=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?fi(r):""}function jv(n,o){switch(n.tag){case 26:case 27:case 5:return fi(n.type);case 16:return fi("Lazy");case 13:return n.child!==o&&o!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return Wa(n.type,!1);case 11:return Wa(n.type.render,!1);case 1:return Wa(n.type,!0);case 31:return fi("Activity");default:return""}}function Ad(n){try{var o="",r=null;do o+=jv(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Za=Object.prototype.hasOwnProperty,ja=t.unstable_scheduleCallback,el=t.unstable_cancelCallback,e0=t.unstable_shouldYield,t0=t.unstable_requestPaint,xt=t.unstable_now,n0=t.unstable_getCurrentPriorityLevel,bd=t.unstable_ImmediatePriority,Cd=t.unstable_UserBlockingPriority,tr=t.unstable_NormalPriority,i0=t.unstable_LowPriority,Rd=t.unstable_IdlePriority,o0=t.log,s0=t.unstable_setDisableYieldValue,Ko=null,Nt=null;function Ln(n){if(typeof o0=="function"&&s0(n),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Ko,n)}catch{}}var It=Math.clz32?Math.clz32:l0,r0=Math.log,a0=Math.LN2;function l0(n){return n>>>=0,n===0?32:31-(r0(n)/a0|0)|0}var nr=256,ir=262144,or=4194304;function hi(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function sr(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var m=0,y=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~y,u!==0?m=hi(u):(T&=E,T!==0?m=hi(T):r||(r=E&~n,r!==0&&(m=hi(r))))):(E=u&~y,E!==0?m=hi(E):T!==0?m=hi(T):r||(r=u&~n,r!==0&&(m=hi(r)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:m}function Yo(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function u0(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(){var n=or;return or<<=1,(or&62914560)===0&&(or=4194304),n}function tl(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function Xo(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function c0(n,o,r,u,m,y){var T=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var E=n.entanglements,C=n.expirationTimes,U=n.hiddenUpdates;for(r=T&~r;0<r;){var H=31-It(r),V=1<<H;E[H]=0,C[H]=-1;var P=U[H];if(P!==null)for(U[H]=null,H=0;H<P.length;H++){var L=P[H];L!==null&&(L.lane&=-536870913)}r&=~V}u!==0&&Nd(n,u,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(T&~o))}function Nd(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-It(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function Id(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-It(r),m=1<<u;m&o|n[u]&o&&(n[u]|=o),r&=~m}}function Md(n,o){var r=o&-o;return r=(r&42)!==0?1:nl(r),(r&(n.suspendedLanes|o))!==0?0:r}function nl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function il(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Dd(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:vm(n.type))}function kd(n,o){var r=K.p;try{return K.p=n,o()}finally{K.p=r}}var qn=Math.random().toString(36).slice(2),lt="__reactFiber$"+qn,Tt="__reactProps$"+qn,Hi="__reactContainer$"+qn,ol="__reactEvents$"+qn,d0="__reactListeners$"+qn,f0="__reactHandles$"+qn,Ud="__reactResources$"+qn,Qo="__reactMarker$"+qn;function sl(n){delete n[lt],delete n[Tt],delete n[ol],delete n[d0],delete n[f0]}function Bi(n){var o=n[lt];if(o)return o;for(var r=n.parentNode;r;){if(o=r[Hi]||r[lt]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=nm(n);n!==null;){if(r=n[lt])return r;n=nm(n)}return o}n=r,r=n.parentNode}return null}function Vi(n){if(n=n[lt]||n[Hi]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function Wo(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function zi(n){var o=n[Ud];return o||(o=n[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function st(n){n[Qo]=!0}var Od=new Set,Pd={};function pi(n,o){$i(n,o),$i(n+"Capture",o)}function $i(n,o){for(Pd[n]=o,n=0;n<o.length;n++)Od.add(o[n])}var h0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ld={},qd={};function p0(n){return Za.call(qd,n)?!0:Za.call(Ld,n)?!1:h0.test(n)?qd[n]=!0:(Ld[n]=!0,!1)}function rr(n,o,r){if(p0(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function ar(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function pn(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function Bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Gd(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function m0(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function rl(n){if(!n._valueTracker){var o=Gd(n)?"checked":"value";n._valueTracker=m0(n,o,""+n[o])}}function Hd(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=Gd(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function lr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var g0=/[\n"\\]/g;function Vt(n){return n.replace(g0,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function al(n,o,r,u,m,y,T,E){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),o!=null?T==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Bt(o)):n.value!==""+Bt(o)&&(n.value=""+Bt(o)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),o!=null?ll(n,T,Bt(o)):r!=null?ll(n,T,Bt(r)):u!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Bt(E):n.removeAttribute("name")}function Bd(n,o,r,u,m,y,T,E){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){rl(n);return}r=r!=null?""+Bt(r):"",o=o!=null?""+Bt(o):r,E||o===n.value||(n.value=o),n.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),rl(n)}function ll(n,o,r){o==="number"&&lr(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Fi(n,o,r,u){if(n=n.options,o){o={};for(var m=0;m<r.length;m++)o["$"+r[m]]=!0;for(r=0;r<n.length;r++)m=o.hasOwnProperty("$"+n[r].value),n[r].selected!==m&&(n[r].selected=m),m&&u&&(n[r].defaultSelected=!0)}else{for(r=""+Bt(r),o=null,m=0;m<n.length;m++){if(n[m].value===r){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}o!==null||n[m].disabled||(o=n[m])}o!==null&&(o.selected=!0)}}function Vd(n,o,r){if(o!=null&&(o=""+Bt(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+Bt(r):""}function zd(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(Re(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=Bt(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),rl(n)}function Ji(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var y0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $d(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||y0.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function Fd(n,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&r[m]!==u&&$d(n,m,u)}else for(var y in o)o.hasOwnProperty(y)&&$d(n,y,o[y])}function ul(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(n){return _0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function mn(){}var cl=null;function dl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ki=null,Yi=null;function Jd(n){var o=Vi(n);if(o&&(n=o.stateNode)){var r=n[Tt]||null;e:switch(n=o.stateNode,o.type){case"input":if(al(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Vt(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var m=u[Tt]||null;if(!m)throw Error(s(90));al(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&Hd(u)}break e;case"textarea":Vd(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Fi(n,!!r.multiple,o,!1)}}}var fl=!1;function Kd(n,o,r){if(fl)return n(o,r);fl=!0;try{var u=n(o);return u}finally{if(fl=!1,(Ki!==null||Yi!==null)&&(Qr(),Ki&&(o=Ki,n=Yi,Yi=Ki=null,Jd(o),n)))for(o=0;o<n.length;o++)Jd(n[o])}}function Zo(n,o){var r=n.stateNode;if(r===null)return null;var u=r[Tt]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(gn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){hl=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{hl=!1}var Gn=null,pl=null,cr=null;function Yd(){if(cr)return cr;var n,o=pl,r=o.length,u,m="value"in Gn?Gn.value:Gn.textContent,y=m.length;for(n=0;n<r&&o[n]===m[n];n++);var T=r-n;for(u=1;u<=T&&o[r-u]===m[y-u];u++);return cr=m.slice(n,1<u?1-u:void 0)}function dr(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function fr(){return!0}function Xd(){return!1}function Et(n){function o(r,u,m,y,T){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(r=n[E],this[E]=r?r(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fr:Xd,this.isPropagationStopped=Xd,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),o}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=Et(mi),es=_({},mi,{view:0,detail:0}),S0=Et(es),ml,gl,ts,pr=_({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ts&&(ts&&n.type==="mousemove"?(ml=n.screenX-ts.screenX,gl=n.screenY-ts.screenY):gl=ml=0,ts=n),ml)},movementY:function(n){return"movementY"in n?n.movementY:gl}}),Qd=Et(pr),T0=_({},pr,{dataTransfer:0}),E0=Et(T0),w0=_({},es,{relatedTarget:0}),yl=Et(w0),A0=_({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=Et(A0),C0=_({},mi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),R0=Et(C0),x0=_({},mi,{data:0}),Wd=Et(x0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=M0[n])?!!o[n]:!1}function vl(){return D0}var k0=_({},es,{key:function(n){if(n.key){var o=N0[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=dr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?I0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?dr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?dr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),U0=Et(k0),O0=_({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=Et(O0),P0=_({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),L0=Et(P0),q0=_({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0=Et(q0),H0=_({},pr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=Et(H0),V0=_({},mi,{newState:0,oldState:0}),z0=Et(V0),$0=[9,13,27,32],_l=gn&&"CompositionEvent"in window,ns=null;gn&&"documentMode"in document&&(ns=document.documentMode);var F0=gn&&"TextEvent"in window&&!ns,jd=gn&&(!_l||ns&&8<ns&&11>=ns),ef=" ",tf=!1;function nf(n,o){switch(n){case"keyup":return $0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xi=!1;function J0(n,o){switch(n){case"compositionend":return of(o);case"keypress":return o.which!==32?null:(tf=!0,ef);case"textInput":return n=o.data,n===ef&&tf?null:n;default:return null}}function K0(n,o){if(Xi)return n==="compositionend"||!_l&&nf(n,o)?(n=Yd(),cr=pl=Gn=null,Xi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return jd&&o.locale!=="ko"?null:o.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Y0[n.type]:o==="textarea"}function rf(n,o,r,u){Ki?Yi?Yi.push(u):Yi=[u]:Ki=u,o=ia(o,"onChange"),0<o.length&&(r=new hr("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var is=null,os=null;function X0(n){Vp(n,0)}function mr(n){var o=Wo(n);if(Hd(o))return n}function af(n,o){if(n==="change")return o}var lf=!1;if(gn){var Sl;if(gn){var Tl="oninput"in document;if(!Tl){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),Tl=typeof uf.oninput=="function"}Sl=Tl}else Sl=!1;lf=Sl&&(!document.documentMode||9<document.documentMode)}function cf(){is&&(is.detachEvent("onpropertychange",df),os=is=null)}function df(n){if(n.propertyName==="value"&&mr(os)){var o=[];rf(o,os,n,dl(n)),Kd(X0,o)}}function Q0(n,o,r){n==="focusin"?(cf(),is=o,os=r,is.attachEvent("onpropertychange",df)):n==="focusout"&&cf()}function W0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mr(os)}function Z0(n,o){if(n==="click")return mr(o)}function j0(n,o){if(n==="input"||n==="change")return mr(o)}function e_(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Mt=typeof Object.is=="function"?Object.is:e_;function ss(n,o){if(Mt(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!Za.call(o,m)||!Mt(n[m],o[m]))return!1}return!0}function ff(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hf(n,o){var r=ff(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ff(r)}}function pf(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?pf(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function mf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=lr(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=lr(n.document)}return o}function El(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var t_=gn&&"documentMode"in document&&11>=document.documentMode,Qi=null,wl=null,rs=null,Al=!1;function gf(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Al||Qi==null||Qi!==lr(u)||(u=Qi,"selectionStart"in u&&El(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),rs&&ss(rs,u)||(rs=u,u=ia(wl,"onSelect"),0<u.length&&(o=new hr("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=Qi)))}function gi(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var Wi={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},bl={},yf={};gn&&(yf=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function yi(n){if(bl[n])return bl[n];if(!Wi[n])return n;var o=Wi[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in yf)return bl[n]=o[r];return n}var vf=yi("animationend"),_f=yi("animationiteration"),Sf=yi("animationstart"),n_=yi("transitionrun"),i_=yi("transitionstart"),o_=yi("transitioncancel"),Tf=yi("transitionend"),Ef=new Map,Cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cl.push("scrollEnd");function en(n,o){Ef.set(n,o),pi(o,[n])}var gr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zt=[],Zi=0,Rl=0;function yr(){for(var n=Zi,o=Rl=Zi=0;o<n;){var r=zt[o];zt[o++]=null;var u=zt[o];zt[o++]=null;var m=zt[o];zt[o++]=null;var y=zt[o];if(zt[o++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&wf(r,m,y)}}function vr(n,o,r,u){zt[Zi++]=n,zt[Zi++]=o,zt[Zi++]=r,zt[Zi++]=u,Rl|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function xl(n,o,r,u){return vr(n,o,r,u),_r(n)}function vi(n,o){return vr(n,null,null,o),_r(n)}function wf(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var m=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&o!==null&&(m=31-It(r),n=y.hiddenUpdates,u=n[m],u===null?n[m]=[o]:u.push(o),o.lane=r|536870912),y):null}function _r(n){if(50<xs)throw xs=0,Lu=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var ji={};function s_(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(n,o,r,u){return new s_(n,o,r,u)}function Nl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yn(n,o){var r=n.alternate;return r===null?(r=Dt(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Af(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Sr(n,o,r,u,m,y){var T=0;if(u=n,typeof n=="function")Nl(n)&&(T=1);else if(typeof n=="string")T=cS(n,r,j.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case W:return n=Dt(31,r,o,m),n.elementType=W,n.lanes=y,n;case R:return _i(r.children,m,y,o);case x:T=8,m|=24;break;case D:return n=Dt(12,r,o,m|2),n.elementType=D,n.lanes=y,n;case Y:return n=Dt(13,r,o,m),n.elementType=Y,n.lanes=y,n;case J:return n=Dt(19,r,o,m),n.elementType=J,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:T=10;break e;case G:T=9;break e;case $:T=11;break e;case F:T=14;break e;case ae:T=16,u=null;break e}T=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=Dt(T,r,o,m),o.elementType=n,o.type=u,o.lanes=y,o}function _i(n,o,r,u){return n=Dt(7,n,u,o),n.lanes=r,n}function Il(n,o,r){return n=Dt(6,n,null,o),n.lanes=r,n}function bf(n){var o=Dt(18,null,null,0);return o.stateNode=n,o}function Ml(n,o,r){return o=Dt(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Cf=new WeakMap;function $t(n,o){if(typeof n=="object"&&n!==null){var r=Cf.get(n);return r!==void 0?r:(o={value:n,source:o,stack:Ad(o)},Cf.set(n,o),o)}return{value:n,source:o,stack:Ad(o)}}var eo=[],to=0,Tr=null,as=0,Ft=[],Jt=0,Hn=null,cn=1,dn="";function vn(n,o){eo[to++]=as,eo[to++]=Tr,Tr=n,as=o}function Rf(n,o,r){Ft[Jt++]=cn,Ft[Jt++]=dn,Ft[Jt++]=Hn,Hn=n;var u=cn;n=dn;var m=32-It(u)-1;u&=~(1<<m),r+=1;var y=32-It(o)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,cn=1<<32-It(o)+m|r<<m|u,dn=y+n}else cn=1<<y|r<<m|u,dn=n}function Dl(n){n.return!==null&&(vn(n,1),Rf(n,1,0))}function kl(n){for(;n===Tr;)Tr=eo[--to],eo[to]=null,as=eo[--to],eo[to]=null;for(;n===Hn;)Hn=Ft[--Jt],Ft[Jt]=null,dn=Ft[--Jt],Ft[Jt]=null,cn=Ft[--Jt],Ft[Jt]=null}function xf(n,o){Ft[Jt++]=cn,Ft[Jt++]=dn,Ft[Jt++]=Hn,cn=o.id,dn=o.overflow,Hn=n}var ut=null,He=null,Se=!1,Bn=null,Kt=!1,Ul=Error(s(519));function Vn(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ls($t(o,n)),Ul}function Nf(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[lt]=n,o[Tt]=u,r){case"dialog":ye("cancel",o),ye("close",o);break;case"iframe":case"object":case"embed":ye("load",o);break;case"video":case"audio":for(r=0;r<Is.length;r++)ye(Is[r],o);break;case"source":ye("error",o);break;case"img":case"image":case"link":ye("error",o),ye("load",o);break;case"details":ye("toggle",o);break;case"input":ye("invalid",o),Bd(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ye("invalid",o);break;case"textarea":ye("invalid",o),zd(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||Jp(o.textContent,r)?(u.popover!=null&&(ye("beforetoggle",o),ye("toggle",o)),u.onScroll!=null&&ye("scroll",o),u.onScrollEnd!=null&&ye("scrollend",o),u.onClick!=null&&(o.onclick=mn),o=!0):o=!1,o||Vn(n,!0)}function If(n){for(ut=n.return;ut;)switch(ut.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:ut=ut.return}}function no(n){if(n!==ut)return!1;if(!Se)return If(n),Se=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Zu(n.type,n.memoizedProps)),r=!r),r&&He&&Vn(n),If(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));He=tm(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));He=tm(n)}else o===27?(o=He,ni(n.type)?(n=ic,ic=null,He=n):He=o):He=ut?Xt(n.stateNode.nextSibling):null;return!0}function Si(){He=ut=null,Se=!1}function Ol(){var n=Bn;return n!==null&&(Ct===null?Ct=n:Ct.push.apply(Ct,n),Bn=null),n}function ls(n){Bn===null?Bn=[n]:Bn.push(n)}var Pl=I(null),Ti=null,_n=null;function zn(n,o,r){X(Pl,o._currentValue),o._currentValue=r}function Sn(n){n._currentValue=Pl.current,z(Pl)}function Ll(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function ql(n,o,r,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var E=y;y=m;for(var C=0;C<o.length;C++)if(E.context===o[C]){y.lanes|=r,E=y.alternate,E!==null&&(E.lanes|=r),Ll(y.return,r,n),u||(T=null);break e}y=E.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),Ll(T,r,n),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===n){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function io(n,o,r,u){n=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var E=m.type;Mt(m.pendingProps.value,T.value)||(n!==null?n.push(E):n=[E])}}else if(m===Ne.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Os):n=[Os])}m=m.return}n!==null&&ql(o,n,r,u),o.flags|=262144}function Er(n){for(n=n.firstContext;n!==null;){if(!Mt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ei(n){Ti=n,_n=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ct(n){return Mf(Ti,n)}function wr(n,o){return Ti===null&&Ei(n),Mf(n,o)}function Mf(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},_n===null){if(n===null)throw Error(s(308));_n=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else _n=_n.next=o;return r}var r_=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},a_=t.unstable_scheduleCallback,l_=t.unstable_NormalPriority,We={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gl(){return{controller:new r_,data:new Map,refCount:0}}function us(n){n.refCount--,n.refCount===0&&a_(l_,function(){n.controller.abort()})}var cs=null,Hl=0,oo=0,so=null;function u_(n,o){if(cs===null){var r=cs=[];Hl=0,oo=zu(),so={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Hl++,o.then(Df,Df),o}function Df(){if(--Hl===0&&cs!==null){so!==null&&(so.status="fulfilled");var n=cs;cs=null,oo=0,so=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function c_(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<r.length;m++)(0,r[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var kf=q.S;q.S=function(n,o){gp=xt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&u_(n,o),kf!==null&&kf(n,o)};var wi=I(null);function Bl(){var n=wi.current;return n!==null?n:Le.pooledCache}function Ar(n,o){o===null?X(wi,wi.current):X(wi,o.pool)}function Uf(){var n=Bl();return n===null?null:{parent:We._currentValue,pool:n}}var ro=Error(s(460)),Vl=Error(s(474)),br=Error(s(542)),Cr={then:function(){}};function Of(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Pf(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(mn,mn),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,qf(n),n;default:if(typeof o.status=="string")o.then(mn,mn);else{if(n=Le,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,qf(n),n}throw bi=o,ro}}function Ai(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(bi=r,ro):r}}var bi=null;function Lf(){if(bi===null)throw Error(s(459));var n=bi;return bi=null,n}function qf(n){if(n===ro||n===br)throw Error(s(483))}var ao=null,ds=0;function Rr(n){var o=ds;return ds+=1,ao===null&&(ao=[]),Pf(ao,n,o)}function fs(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function xr(n,o){throw o.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Gf(n){function o(M,N){if(n){var k=M.deletions;k===null?(M.deletions=[N],M.flags|=16):k.push(N)}}function r(M,N){if(!n)return null;for(;N!==null;)o(M,N),N=N.sibling;return null}function u(M){for(var N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function m(M,N){return M=yn(M,N),M.index=0,M.sibling=null,M}function y(M,N,k){return M.index=k,n?(k=M.alternate,k!==null?(k=k.index,k<N?(M.flags|=67108866,N):k):(M.flags|=67108866,N)):(M.flags|=1048576,N)}function T(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function E(M,N,k,B){return N===null||N.tag!==6?(N=Il(k,M.mode,B),N.return=M,N):(N=m(N,k),N.return=M,N)}function C(M,N,k,B){var ne=k.type;return ne===R?H(M,N,k.props.children,B,k.key):N!==null&&(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ae&&Ai(ne)===N.type)?(N=m(N,k.props),fs(N,k),N.return=M,N):(N=Sr(k.type,k.key,k.props,null,M.mode,B),fs(N,k),N.return=M,N)}function U(M,N,k,B){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Ml(k,M.mode,B),N.return=M,N):(N=m(N,k.children||[]),N.return=M,N)}function H(M,N,k,B,ne){return N===null||N.tag!==7?(N=_i(k,M.mode,B,ne),N.return=M,N):(N=m(N,k),N.return=M,N)}function V(M,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Il(""+N,M.mode,k),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w:return k=Sr(N.type,N.key,N.props,null,M.mode,k),fs(k,N),k.return=M,k;case A:return N=Ml(N,M.mode,k),N.return=M,N;case ae:return N=Ai(N),V(M,N,k)}if(Re(N)||Ge(N))return N=_i(N,M.mode,k,null),N.return=M,N;if(typeof N.then=="function")return V(M,Rr(N),k);if(N.$$typeof===O)return V(M,wr(M,N),k);xr(M,N)}return null}function P(M,N,k,B){var ne=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ne!==null?null:E(M,N,""+k,B);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return k.key===ne?C(M,N,k,B):null;case A:return k.key===ne?U(M,N,k,B):null;case ae:return k=Ai(k),P(M,N,k,B)}if(Re(k)||Ge(k))return ne!==null?null:H(M,N,k,B,null);if(typeof k.then=="function")return P(M,N,Rr(k),B);if(k.$$typeof===O)return P(M,N,wr(M,k),B);xr(M,k)}return null}function L(M,N,k,B,ne){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return M=M.get(k)||null,E(N,M,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return M=M.get(B.key===null?k:B.key)||null,C(N,M,B,ne);case A:return M=M.get(B.key===null?k:B.key)||null,U(N,M,B,ne);case ae:return B=Ai(B),L(M,N,k,B,ne)}if(Re(B)||Ge(B))return M=M.get(k)||null,H(N,M,B,ne,null);if(typeof B.then=="function")return L(M,N,k,Rr(B),ne);if(B.$$typeof===O)return L(M,N,k,wr(N,B),ne);xr(N,B)}return null}function Z(M,N,k,B){for(var ne=null,Ae=null,ee=N,he=N=0,_e=null;ee!==null&&he<k.length;he++){ee.index>he?(_e=ee,ee=null):_e=ee.sibling;var be=P(M,ee,k[he],B);if(be===null){ee===null&&(ee=_e);break}n&&ee&&be.alternate===null&&o(M,ee),N=y(be,N,he),Ae===null?ne=be:Ae.sibling=be,Ae=be,ee=_e}if(he===k.length)return r(M,ee),Se&&vn(M,he),ne;if(ee===null){for(;he<k.length;he++)ee=V(M,k[he],B),ee!==null&&(N=y(ee,N,he),Ae===null?ne=ee:Ae.sibling=ee,Ae=ee);return Se&&vn(M,he),ne}for(ee=u(ee);he<k.length;he++)_e=L(ee,M,he,k[he],B),_e!==null&&(n&&_e.alternate!==null&&ee.delete(_e.key===null?he:_e.key),N=y(_e,N,he),Ae===null?ne=_e:Ae.sibling=_e,Ae=_e);return n&&ee.forEach(function(ai){return o(M,ai)}),Se&&vn(M,he),ne}function ie(M,N,k,B){if(k==null)throw Error(s(151));for(var ne=null,Ae=null,ee=N,he=N=0,_e=null,be=k.next();ee!==null&&!be.done;he++,be=k.next()){ee.index>he?(_e=ee,ee=null):_e=ee.sibling;var ai=P(M,ee,be.value,B);if(ai===null){ee===null&&(ee=_e);break}n&&ee&&ai.alternate===null&&o(M,ee),N=y(ai,N,he),Ae===null?ne=ai:Ae.sibling=ai,Ae=ai,ee=_e}if(be.done)return r(M,ee),Se&&vn(M,he),ne;if(ee===null){for(;!be.done;he++,be=k.next())be=V(M,be.value,B),be!==null&&(N=y(be,N,he),Ae===null?ne=be:Ae.sibling=be,Ae=be);return Se&&vn(M,he),ne}for(ee=u(ee);!be.done;he++,be=k.next())be=L(ee,M,he,be.value,B),be!==null&&(n&&be.alternate!==null&&ee.delete(be.key===null?he:be.key),N=y(be,N,he),Ae===null?ne=be:Ae.sibling=be,Ae=be);return n&&ee.forEach(function(TS){return o(M,TS)}),Se&&vn(M,he),ne}function Oe(M,N,k,B){if(typeof k=="object"&&k!==null&&k.type===R&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case w:e:{for(var ne=k.key;N!==null;){if(N.key===ne){if(ne=k.type,ne===R){if(N.tag===7){r(M,N.sibling),B=m(N,k.props.children),B.return=M,M=B;break e}}else if(N.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ae&&Ai(ne)===N.type){r(M,N.sibling),B=m(N,k.props),fs(B,k),B.return=M,M=B;break e}r(M,N);break}else o(M,N);N=N.sibling}k.type===R?(B=_i(k.props.children,M.mode,B,k.key),B.return=M,M=B):(B=Sr(k.type,k.key,k.props,null,M.mode,B),fs(B,k),B.return=M,M=B)}return T(M);case A:e:{for(ne=k.key;N!==null;){if(N.key===ne)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){r(M,N.sibling),B=m(N,k.children||[]),B.return=M,M=B;break e}else{r(M,N);break}else o(M,N);N=N.sibling}B=Ml(k,M.mode,B),B.return=M,M=B}return T(M);case ae:return k=Ai(k),Oe(M,N,k,B)}if(Re(k))return Z(M,N,k,B);if(Ge(k)){if(ne=Ge(k),typeof ne!="function")throw Error(s(150));return k=ne.call(k),ie(M,N,k,B)}if(typeof k.then=="function")return Oe(M,N,Rr(k),B);if(k.$$typeof===O)return Oe(M,N,wr(M,k),B);xr(M,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(r(M,N.sibling),B=m(N,k),B.return=M,M=B):(r(M,N),B=Il(k,M.mode,B),B.return=M,M=B),T(M)):r(M,N)}return function(M,N,k,B){try{ds=0;var ne=Oe(M,N,k,B);return ao=null,ne}catch(ee){if(ee===ro||ee===br)throw ee;var Ae=Dt(29,ee,null,M.mode);return Ae.lanes=B,Ae.return=M,Ae}finally{}}}var Ci=Gf(!0),Hf=Gf(!1),$n=!1;function zl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $l(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Jn(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(xe&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=_r(n),wf(n,null,r),o}return vr(n,u,o,r),_r(n)}function hs(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Id(n,r)}}function Fl(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?m=y=o:y=y.next=o}else m=y=o;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var Jl=!1;function ps(){if(Jl){var n=so;if(n!==null)throw n}}function ms(n,o,r,u){Jl=!1;var m=n.updateQueue;$n=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var C=E,U=C.next;C.next=null,T===null?y=U:T.next=U,T=C;var H=n.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==T&&(E===null?H.firstBaseUpdate=U:E.next=U,H.lastBaseUpdate=C))}if(y!==null){var V=m.baseState;T=0,H=U=C=null,E=y;do{var P=E.lane&-536870913,L=P!==E.lane;if(L?(ve&P)===P:(u&P)===P){P!==0&&P===oo&&(Jl=!0),H!==null&&(H=H.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Z=n,ie=E;P=o;var Oe=r;switch(ie.tag){case 1:if(Z=ie.payload,typeof Z=="function"){V=Z.call(Oe,V,P);break e}V=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ie.payload,P=typeof Z=="function"?Z.call(Oe,V,P):Z,P==null)break e;V=_({},V,P);break e;case 2:$n=!0}}P=E.callback,P!==null&&(n.flags|=64,L&&(n.flags|=8192),L=m.callbacks,L===null?m.callbacks=[P]:L.push(P))}else L={lane:P,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(U=H=L,C=V):H=H.next=L,T|=P;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;L=E,E=L.next,L.next=null,m.lastBaseUpdate=L,m.shared.pending=null}}while(!0);H===null&&(C=V),m.baseState=C,m.firstBaseUpdate=U,m.lastBaseUpdate=H,y===null&&(m.shared.lanes=0),Wn|=T,n.lanes=T,n.memoizedState=V}}function Bf(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Vf(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Bf(r[n],o)}var lo=I(null),Nr=I(0);function zf(n,o){n=Nn,X(Nr,n),X(lo,o),Nn=n|o.baseLanes}function Kl(){X(Nr,Nn),X(lo,lo.current)}function Yl(){Nn=Nr.current,z(lo),z(Nr)}var kt=I(null),Yt=null;function Kn(n){var o=n.alternate;X(Xe,Xe.current&1),X(kt,n),Yt===null&&(o===null||lo.current!==null||o.memoizedState!==null)&&(Yt=n)}function Xl(n){X(Xe,Xe.current),X(kt,n),Yt===null&&(Yt=n)}function $f(n){n.tag===22?(X(Xe,Xe.current),X(kt,n),Yt===null&&(Yt=n)):Yn()}function Yn(){X(Xe,Xe.current),X(kt,kt.current)}function Ut(n){z(kt),Yt===n&&(Yt=null),z(Xe)}var Xe=I(0);function Ir(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||tc(r)||nc(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tn=0,fe=null,ke=null,Ze=null,Mr=!1,uo=!1,Ri=!1,Dr=0,gs=0,co=null,d_=0;function Fe(){throw Error(s(321))}function Ql(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!Mt(n[r],o[r]))return!1;return!0}function Wl(n,o,r,u,m,y){return Tn=y,fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=n===null||n.memoizedState===null?Rh:fu,Ri=!1,y=r(u,m),Ri=!1,uo&&(y=Jf(o,r,u,m)),Ff(n),y}function Ff(n){q.H=_s;var o=ke!==null&&ke.next!==null;if(Tn=0,Ze=ke=fe=null,Mr=!1,gs=0,co=null,o)throw Error(s(300));n===null||je||(n=n.dependencies,n!==null&&Er(n)&&(je=!0))}function Jf(n,o,r,u){fe=n;var m=0;do{if(uo&&(co=null),gs=0,uo=!1,25<=m)throw Error(s(301));if(m+=1,Ze=ke=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=xh,y=o(r,u)}while(uo);return y}function f_(){var n=q.H,o=n.useState()[0];return o=typeof o.then=="function"?ys(o):o,n=n.useState()[0],(ke!==null?ke.memoizedState:null)!==n&&(fe.flags|=1024),o}function Zl(){var n=Dr!==0;return Dr=0,n}function jl(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function eu(n){if(Mr){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Mr=!1}Tn=0,Ze=ke=fe=null,uo=!1,gs=Dr=0,co=null}function vt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?fe.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Qe(){if(ke===null){var n=fe.alternate;n=n!==null?n.memoizedState:null}else n=ke.next;var o=Ze===null?fe.memoizedState:Ze.next;if(o!==null)Ze=o,ke=n;else{if(n===null)throw fe.alternate===null?Error(s(467)):Error(s(310));ke=n,n={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ze===null?fe.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function kr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ys(n){var o=gs;return gs+=1,co===null&&(co=[]),n=Pf(co,n,o),o=fe,(Ze===null?o.memoizedState:Ze.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?Rh:fu),n}function Ur(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ys(n);if(n.$$typeof===O)return ct(n)}throw Error(s(438,String(n)))}function tu(n){var o=null,r=fe.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=kr(),fe.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=pe;return o.index++,r}function En(n,o){return typeof o=="function"?o(n):o}function Or(n){var o=Qe();return nu(o,ke,n)}function nu(n,o,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var m=n.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}o.baseQueue=m=y,u.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{o=m.next;var E=T=null,C=null,U=o,H=!1;do{var V=U.lane&-536870913;if(V!==U.lane?(ve&V)===V:(Tn&V)===V){var P=U.revertLane;if(P===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),V===oo&&(H=!0);else if((Tn&P)===P){U=U.next,P===oo&&(H=!0);continue}else V={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(E=C=V,T=y):C=C.next=V,fe.lanes|=P,Wn|=P;V=U.action,Ri&&r(y,V),y=U.hasEagerState?U.eagerState:r(y,V)}else P={lane:V,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(E=C=P,T=y):C=C.next=P,fe.lanes|=V,Wn|=V;U=U.next}while(U!==null&&U!==o);if(C===null?T=y:C.next=E,!Mt(y,n.memoizedState)&&(je=!0,H&&(r=so,r!==null)))throw r;n.memoizedState=y,n.baseState=T,n.baseQueue=C,u.lastRenderedState=y}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function iu(n){var o=Qe(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,m=r.pending,y=o.memoizedState;if(m!==null){r.pending=null;var T=m=m.next;do y=n(y,T.action),T=T.next;while(T!==m);Mt(y,o.memoizedState)||(je=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function Kf(n,o,r){var u=fe,m=Qe(),y=Se;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var T=!Mt((ke||m).memoizedState,r);if(T&&(m.memoizedState=r,je=!0),m=m.queue,ru(Qf.bind(null,u,m,n),[n]),m.getSnapshot!==o||T||Ze!==null&&Ze.memoizedState.tag&1){if(u.flags|=2048,fo(9,{destroy:void 0},Xf.bind(null,u,m,r,o),null),Le===null)throw Error(s(349));y||(Tn&127)!==0||Yf(u,o,r)}return r}function Yf(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=fe.updateQueue,o===null?(o=kr(),fe.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function Xf(n,o,r,u){o.value=r,o.getSnapshot=u,Wf(o)&&Zf(n)}function Qf(n,o,r){return r(function(){Wf(o)&&Zf(n)})}function Wf(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!Mt(n,r)}catch{return!0}}function Zf(n){var o=vi(n,2);o!==null&&Rt(o,n,2)}function ou(n){var o=vt();if(typeof n=="function"){var r=n;if(n=r(),Ri){Ln(!0);try{r()}finally{Ln(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:n},o}function jf(n,o,r,u){return n.baseState=r,nu(n,ke,typeof u=="function"?u:En)}function h_(n,o,r,u,m){if(qr(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};q.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,eh(o,y)):(y.next=r.next,o.pending=r.next=y)}}function eh(n,o){var r=o.action,u=o.payload,m=n.state;if(o.isTransition){var y=q.T,T={};q.T=T;try{var E=r(m,u),C=q.S;C!==null&&C(T,E),th(n,o,E)}catch(U){su(n,o,U)}finally{y!==null&&T.types!==null&&(y.types=T.types),q.T=y}}else try{y=r(m,u),th(n,o,y)}catch(U){su(n,o,U)}}function th(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){nh(n,o,u)},function(u){return su(n,o,u)}):nh(n,o,r)}function nh(n,o,r){o.status="fulfilled",o.value=r,ih(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,eh(n,r)))}function su(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,ih(o),o=o.next;while(o!==u)}n.action=null}function ih(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function oh(n,o){return o}function sh(n,o){if(Se){var r=Le.formState;if(r!==null){e:{var u=fe;if(Se){if(He){t:{for(var m=He,y=Kt;m.nodeType!==8;){if(!y){m=null;break t}if(m=Xt(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){He=Xt(m.nextSibling),u=m.data==="F!";break e}}Vn(u)}u=!1}u&&(o=r[0])}}return r=vt(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oh,lastRenderedState:o},r.queue=u,r=Ah.bind(null,fe,u),u.dispatch=r,u=ou(!1),y=du.bind(null,fe,!1,u.queue),u=vt(),m={state:o,dispatch:null,action:n,pending:null},u.queue=m,r=h_.bind(null,fe,m,y,r),m.dispatch=r,u.memoizedState=n,[o,r,!1]}function rh(n){var o=Qe();return ah(o,ke,n)}function ah(n,o,r){if(o=nu(n,o,oh)[0],n=Or(En)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=ys(o)}catch(T){throw T===ro?br:T}else u=o;o=Qe();var m=o.queue,y=m.dispatch;return r!==o.memoizedState&&(fe.flags|=2048,fo(9,{destroy:void 0},p_.bind(null,m,r),null)),[u,y,n]}function p_(n,o){n.action=o}function lh(n){var o=Qe(),r=ke;if(r!==null)return ah(o,r,n);Qe(),o=o.memoizedState,r=Qe();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function fo(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=fe.updateQueue,o===null&&(o=kr(),fe.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function uh(){return Qe().memoizedState}function Pr(n,o,r,u){var m=vt();fe.flags|=n,m.memoizedState=fo(1|o,{destroy:void 0},r,u===void 0?null:u)}function Lr(n,o,r,u){var m=Qe();u=u===void 0?null:u;var y=m.memoizedState.inst;ke!==null&&u!==null&&Ql(u,ke.memoizedState.deps)?m.memoizedState=fo(o,y,r,u):(fe.flags|=n,m.memoizedState=fo(1|o,y,r,u))}function ch(n,o){Pr(8390656,8,n,o)}function ru(n,o){Lr(2048,8,n,o)}function m_(n){fe.flags|=4;var o=fe.updateQueue;if(o===null)o=kr(),fe.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function dh(n){var o=Qe().memoizedState;return m_({ref:o,nextImpl:n}),function(){if((xe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function fh(n,o){return Lr(4,2,n,o)}function hh(n,o){return Lr(4,4,n,o)}function ph(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function mh(n,o,r){r=r!=null?r.concat([n]):null,Lr(4,4,ph.bind(null,o,n),r)}function au(){}function gh(n,o){var r=Qe();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Ql(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function yh(n,o){var r=Qe();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Ql(o,u[1]))return u[0];if(u=n(),Ri){Ln(!0);try{n()}finally{Ln(!1)}}return r.memoizedState=[u,o],u}function lu(n,o,r){return r===void 0||(Tn&1073741824)!==0&&(ve&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=vp(),fe.lanes|=n,Wn|=n,r)}function vh(n,o,r,u){return Mt(r,o)?r:lo.current!==null?(n=lu(n,r,u),Mt(n,o)||(je=!0),n):(Tn&42)===0||(Tn&1073741824)!==0&&(ve&261930)===0?(je=!0,n.memoizedState=r):(n=vp(),fe.lanes|=n,Wn|=n,o)}function _h(n,o,r,u,m){var y=K.p;K.p=y!==0&&8>y?y:8;var T=q.T,E={};q.T=E,du(n,!1,o,r);try{var C=m(),U=q.S;if(U!==null&&U(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var H=c_(C,u);vs(n,o,H,Lt(n))}else vs(n,o,u,Lt(n))}catch(V){vs(n,o,{then:function(){},status:"rejected",reason:V},Lt())}finally{K.p=y,T!==null&&E.types!==null&&(T.types=E.types),q.T=T}}function g_(){}function uu(n,o,r,u){if(n.tag!==5)throw Error(s(476));var m=Sh(n).queue;_h(n,m,o,le,r===null?g_:function(){return Th(n),r(u)})}function Sh(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:le},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function Th(n){var o=Sh(n);o.next===null&&(o=n.alternate.memoizedState),vs(n,o.next.queue,{},Lt())}function cu(){return ct(Os)}function Eh(){return Qe().memoizedState}function wh(){return Qe().memoizedState}function y_(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=Lt();n=Fn(r);var u=Jn(o,n,r);u!==null&&(Rt(u,o,r),hs(u,o,r)),o={cache:Gl()},n.payload=o;return}o=o.return}}function v_(n,o,r){var u=Lt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qr(n)?bh(o,r):(r=xl(n,o,r,u),r!==null&&(Rt(r,n,u),Ch(r,o,u)))}function Ah(n,o,r){var u=Lt();vs(n,o,r,u)}function vs(n,o,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(qr(n))bh(o,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,E=y(T,r);if(m.hasEagerState=!0,m.eagerState=E,Mt(E,T))return vr(n,o,m,0),Le===null&&yr(),!1}catch{}finally{}if(r=xl(n,o,m,u),r!==null)return Rt(r,n,u),Ch(r,o,u),!0}return!1}function du(n,o,r,u){if(u={lane:2,revertLane:zu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qr(n)){if(o)throw Error(s(479))}else o=xl(n,r,u,2),o!==null&&Rt(o,n,2)}function qr(n){var o=n.alternate;return n===fe||o!==null&&o===fe}function bh(n,o){uo=Mr=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function Ch(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Id(n,r)}}var _s={readContext:ct,use:Ur,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};_s.useEffectEvent=Fe;var Rh={readContext:ct,use:Ur,useCallback:function(n,o){return vt().memoizedState=[n,o===void 0?null:o],n},useContext:ct,useEffect:ch,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,Pr(4194308,4,ph.bind(null,o,n),r)},useLayoutEffect:function(n,o){return Pr(4194308,4,n,o)},useInsertionEffect:function(n,o){Pr(4,2,n,o)},useMemo:function(n,o){var r=vt();o=o===void 0?null:o;var u=n();if(Ri){Ln(!0);try{n()}finally{Ln(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=vt();if(r!==void 0){var m=r(o);if(Ri){Ln(!0);try{r(o)}finally{Ln(!1)}}}else m=o;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=v_.bind(null,fe,n),[u.memoizedState,n]},useRef:function(n){var o=vt();return n={current:n},o.memoizedState=n},useState:function(n){n=ou(n);var o=n.queue,r=Ah.bind(null,fe,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:au,useDeferredValue:function(n,o){var r=vt();return lu(r,n,o)},useTransition:function(){var n=ou(!1);return n=_h.bind(null,fe,n.queue,!0,!1),vt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=fe,m=vt();if(Se){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),Le===null)throw Error(s(349));(ve&127)!==0||Yf(u,o,r)}m.memoizedState=r;var y={value:r,getSnapshot:o};return m.queue=y,ch(Qf.bind(null,u,y,n),[n]),u.flags|=2048,fo(9,{destroy:void 0},Xf.bind(null,u,y,r,o),null),r},useId:function(){var n=vt(),o=Le.identifierPrefix;if(Se){var r=dn,u=cn;r=(u&~(1<<32-It(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=Dr++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=d_++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:cu,useFormState:sh,useActionState:sh,useOptimistic:function(n){var o=vt();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=du.bind(null,fe,!0,r),r.dispatch=o,[n,o]},useMemoCache:tu,useCacheRefresh:function(){return vt().memoizedState=y_.bind(null,fe)},useEffectEvent:function(n){var o=vt(),r={impl:n};return o.memoizedState=r,function(){if((xe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},fu={readContext:ct,use:Ur,useCallback:gh,useContext:ct,useEffect:ru,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:hh,useMemo:yh,useReducer:Or,useRef:uh,useState:function(){return Or(En)},useDebugValue:au,useDeferredValue:function(n,o){var r=Qe();return vh(r,ke.memoizedState,n,o)},useTransition:function(){var n=Or(En)[0],o=Qe().memoizedState;return[typeof n=="boolean"?n:ys(n),o]},useSyncExternalStore:Kf,useId:Eh,useHostTransitionStatus:cu,useFormState:rh,useActionState:rh,useOptimistic:function(n,o){var r=Qe();return jf(r,ke,n,o)},useMemoCache:tu,useCacheRefresh:wh};fu.useEffectEvent=dh;var xh={readContext:ct,use:Ur,useCallback:gh,useContext:ct,useEffect:ru,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:hh,useMemo:yh,useReducer:iu,useRef:uh,useState:function(){return iu(En)},useDebugValue:au,useDeferredValue:function(n,o){var r=Qe();return ke===null?lu(r,n,o):vh(r,ke.memoizedState,n,o)},useTransition:function(){var n=iu(En)[0],o=Qe().memoizedState;return[typeof n=="boolean"?n:ys(n),o]},useSyncExternalStore:Kf,useId:Eh,useHostTransitionStatus:cu,useFormState:lh,useActionState:lh,useOptimistic:function(n,o){var r=Qe();return ke!==null?jf(r,ke,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:tu,useCacheRefresh:wh};xh.useEffectEvent=dh;function hu(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:_({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var pu={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=Lt(),m=Fn(u);m.payload=o,r!=null&&(m.callback=r),o=Jn(n,m,u),o!==null&&(Rt(o,n,u),hs(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=Lt(),m=Fn(u);m.tag=1,m.payload=o,r!=null&&(m.callback=r),o=Jn(n,m,u),o!==null&&(Rt(o,n,u),hs(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=Lt(),u=Fn(r);u.tag=2,o!=null&&(u.callback=o),o=Jn(n,u,r),o!==null&&(Rt(o,n,r),hs(o,n,r))}};function Nh(n,o,r,u,m,y,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,T):o.prototype&&o.prototype.isPureReactComponent?!ss(r,u)||!ss(m,y):!0}function Ih(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&pu.enqueueReplaceState(o,o.state,null)}function xi(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=_({},r));for(var m in n)r[m]===void 0&&(r[m]=n[m])}return r}function Mh(n){gr(n)}function Dh(n){console.error(n)}function kh(n){gr(n)}function Gr(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Uh(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mu(n,o,r){return r=Fn(r),r.tag=3,r.payload={element:null},r.callback=function(){Gr(n,o)},r}function Oh(n){return n=Fn(n),n.tag=3,n}function Ph(n,o,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;n.payload=function(){return m(y)},n.callback=function(){Uh(o,r,u)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Uh(o,r,u),typeof m!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function __(n,o,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&io(o,r,m,!0),r=kt.current,r!==null){switch(r.tag){case 31:case 13:return Yt===null?Wr():r.alternate===null&&Je===0&&(Je=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===Cr?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),Hu(n,u,m)),!1;case 22:return r.flags|=65536,u===Cr?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),Hu(n,u,m)),!1}throw Error(s(435,r.tag))}return Hu(n,u,m),Wr(),!1}if(Se)return o=kt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==Ul&&(n=Error(s(422),{cause:u}),ls($t(n,r)))):(u!==Ul&&(o=Error(s(423),{cause:u}),ls($t(o,r))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=$t(u,r),m=mu(n.stateNode,u,m),Fl(n,m),Je!==4&&(Je=2)),!1;var y=Error(s(520),{cause:u});if(y=$t(y,r),Rs===null?Rs=[y]:Rs.push(y),Je!==4&&(Je=2),o===null)return!0;u=$t(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=m&-m,r.lanes|=n,n=mu(r.stateNode,u,n),Fl(r,n),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Zn===null||!Zn.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Oh(m),Ph(m,n,r,u),Fl(r,m),!1}r=r.return}while(r!==null);return!1}var gu=Error(s(461)),je=!1;function dt(n,o,r,u){o.child=n===null?Hf(o,null,r,u):Ci(o,n.child,r,u)}function Lh(n,o,r,u,m){r=r.render;var y=o.ref;if("ref"in u){var T={};for(var E in u)E!=="ref"&&(T[E]=u[E])}else T=u;return Ei(o),u=Wl(n,o,r,T,y,m),E=Zl(),n!==null&&!je?(jl(n,o,m),wn(n,o,m)):(Se&&E&&Dl(o),o.flags|=1,dt(n,o,u,m),o.child)}function qh(n,o,r,u,m){if(n===null){var y=r.type;return typeof y=="function"&&!Nl(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,Gh(n,o,y,u,m)):(n=Sr(r.type,null,u,o,o.mode,m),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!Au(n,m)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:ss,r(T,u)&&n.ref===o.ref)return wn(n,o,m)}return o.flags|=1,n=yn(y,u),n.ref=o.ref,n.return=o,o.child=n}function Gh(n,o,r,u,m){if(n!==null){var y=n.memoizedProps;if(ss(y,u)&&n.ref===o.ref)if(je=!1,o.pendingProps=u=y,Au(n,m))(n.flags&131072)!==0&&(je=!0);else return o.lanes=n.lanes,wn(n,o,m)}return yu(n,o,r,u,m)}function Hh(n,o,r,u){var m=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=o.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,o.child=null;return Bh(n,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ar(o,y!==null?y.cachePool:null),y!==null?zf(o,y):Kl(),$f(o);else return u=o.lanes=536870912,Bh(n,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Ar(o,y.cachePool),zf(o,y),Yn(),o.memoizedState=null):(n!==null&&Ar(o,null),Kl(),Yn());return dt(n,o,m,r),o.child}function Ss(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Bh(n,o,r,u,m){var y=Bl();return y=y===null?null:{parent:We._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},n!==null&&Ar(o,null),Kl(),$f(o),n!==null&&io(n,o,u,!0),o.childLanes=m,null}function Hr(n,o){return o=Vr({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Vh(n,o,r){return Ci(o,n.child,null,r),n=Hr(o,o.pendingProps),n.flags|=2,Ut(o),o.memoizedState=null,n}function S_(n,o,r){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(Se){if(u.mode==="hidden")return n=Hr(o,u),o.lanes=536870912,Ss(null,n);if(Xl(o),(n=He)?(n=em(n,Kt),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Hn!==null?{id:cn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},r=bf(n),r.return=o,o.child=r,ut=o,He=null)):n=null,n===null)throw Vn(o);return o.lanes=536870912,null}return Hr(o,u)}var y=n.memoizedState;if(y!==null){var T=y.dehydrated;if(Xl(o),m)if(o.flags&256)o.flags&=-257,o=Vh(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(je||io(n,o,r,!1),m=(r&n.childLanes)!==0,je||m){if(u=Le,u!==null&&(T=Md(u,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,vi(n,T),Rt(u,n,T),gu;Wr(),o=Vh(n,o,r)}else n=y.treeContext,He=Xt(T.nextSibling),ut=o,Se=!0,Bn=null,Kt=!1,n!==null&&xf(o,n),o=Hr(o,u),o.flags|=4096;return o}return n=yn(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function Br(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function yu(n,o,r,u,m){return Ei(o),r=Wl(n,o,r,u,void 0,m),u=Zl(),n!==null&&!je?(jl(n,o,m),wn(n,o,m)):(Se&&u&&Dl(o),o.flags|=1,dt(n,o,r,m),o.child)}function zh(n,o,r,u,m,y){return Ei(o),o.updateQueue=null,r=Jf(o,u,r,m),Ff(n),u=Zl(),n!==null&&!je?(jl(n,o,y),wn(n,o,y)):(Se&&u&&Dl(o),o.flags|=1,dt(n,o,r,y),o.child)}function $h(n,o,r,u,m){if(Ei(o),o.stateNode===null){var y=ji,T=r.contextType;typeof T=="object"&&T!==null&&(y=ct(T)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=pu,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},zl(o),T=r.contextType,y.context=typeof T=="object"&&T!==null?ct(T):ji,y.state=o.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(hu(o,r,T,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&pu.enqueueReplaceState(y,y.state,null),ms(o,u,y,m),ps(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var E=o.memoizedProps,C=xi(r,E);y.props=C;var U=y.context,H=r.contextType;T=ji,typeof H=="object"&&H!==null&&(T=ct(H));var V=r.getDerivedStateFromProps;H=typeof V=="function"||typeof y.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E||U!==T)&&Ih(o,y,u,T),$n=!1;var P=o.memoizedState;y.state=P,ms(o,u,y,m),ps(),U=o.memoizedState,E||P!==U||$n?(typeof V=="function"&&(hu(o,r,V,u),U=o.memoizedState),(C=$n||Nh(o,r,C,u,P,U,T))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=U),y.props=u,y.state=U,y.context=T,u=C):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,$l(n,o),T=o.memoizedProps,H=xi(r,T),y.props=H,V=o.pendingProps,P=y.context,U=r.contextType,C=ji,typeof U=="object"&&U!==null&&(C=ct(U)),E=r.getDerivedStateFromProps,(U=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==V||P!==C)&&Ih(o,y,u,C),$n=!1,P=o.memoizedState,y.state=P,ms(o,u,y,m),ps();var L=o.memoizedState;T!==V||P!==L||$n||n!==null&&n.dependencies!==null&&Er(n.dependencies)?(typeof E=="function"&&(hu(o,r,E,u),L=o.memoizedState),(H=$n||Nh(o,r,H,u,P,L,C)||n!==null&&n.dependencies!==null&&Er(n.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,L,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,L,C)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&P===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&P===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=L),y.props=u,y.state=L,y.context=C,u=H):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&P===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&P===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,Br(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=Ci(o,n.child,null,m),o.child=Ci(o,null,r,m)):dt(n,o,r,m),o.memoizedState=y.state,n=o.child):n=wn(n,o,m),n}function Fh(n,o,r,u){return Si(),o.flags|=256,dt(n,o,r,u),o.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _u(n){return{baseLanes:n,cachePool:Uf()}}function Su(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=Pt),n}function Jh(n,o,r){var u=o.pendingProps,m=!1,y=(o.flags&128)!==0,T;if((T=y)||(T=n!==null&&n.memoizedState===null?!1:(Xe.current&2)!==0),T&&(m=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,n===null){if(Se){if(m?Kn(o):Yn(),(n=He)?(n=em(n,Kt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Hn!==null?{id:cn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},r=bf(n),r.return=o,o.child=r,ut=o,He=null)):n=null,n===null)throw Vn(o);return nc(n)?o.lanes=32:o.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(Yn(),m=o.mode,E=Vr({mode:"hidden",children:E},m),u=_i(u,m,r,null),E.return=o,u.return=o,E.sibling=u,o.child=E,u=o.child,u.memoizedState=_u(r),u.childLanes=Su(n,T,r),o.memoizedState=vu,Ss(null,u)):(Kn(o),Tu(o,E))}var C=n.memoizedState;if(C!==null&&(E=C.dehydrated,E!==null)){if(y)o.flags&256?(Kn(o),o.flags&=-257,o=Eu(n,o,r)):o.memoizedState!==null?(Yn(),o.child=n.child,o.flags|=128,o=null):(Yn(),E=u.fallback,m=o.mode,u=Vr({mode:"visible",children:u.children},m),E=_i(E,m,r,null),E.flags|=2,u.return=o,E.return=o,u.sibling=E,o.child=u,Ci(o,n.child,null,r),u=o.child,u.memoizedState=_u(r),u.childLanes=Su(n,T,r),o.memoizedState=vu,o=Ss(null,u));else if(Kn(o),nc(E)){if(T=E.nextSibling&&E.nextSibling.dataset,T)var U=T.dgst;T=U,u=Error(s(419)),u.stack="",u.digest=T,ls({value:u,source:null,stack:null}),o=Eu(n,o,r)}else if(je||io(n,o,r,!1),T=(r&n.childLanes)!==0,je||T){if(T=Le,T!==null&&(u=Md(T,r),u!==0&&u!==C.retryLane))throw C.retryLane=u,vi(n,u),Rt(T,n,u),gu;tc(E)||Wr(),o=Eu(n,o,r)}else tc(E)?(o.flags|=192,o.child=n.child,o=null):(n=C.treeContext,He=Xt(E.nextSibling),ut=o,Se=!0,Bn=null,Kt=!1,n!==null&&xf(o,n),o=Tu(o,u.children),o.flags|=4096);return o}return m?(Yn(),E=u.fallback,m=o.mode,C=n.child,U=C.sibling,u=yn(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,U!==null?E=yn(U,E):(E=_i(E,m,r,null),E.flags|=2),E.return=o,u.return=o,u.sibling=E,o.child=u,Ss(null,u),u=o.child,E=n.child.memoizedState,E===null?E=_u(r):(m=E.cachePool,m!==null?(C=We._currentValue,m=m.parent!==C?{parent:C,pool:C}:m):m=Uf(),E={baseLanes:E.baseLanes|r,cachePool:m}),u.memoizedState=E,u.childLanes=Su(n,T,r),o.memoizedState=vu,Ss(n.child,u)):(Kn(o),r=n.child,n=r.sibling,r=yn(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(T=o.deletions,T===null?(o.deletions=[n],o.flags|=16):T.push(n)),o.child=r,o.memoizedState=null,r)}function Tu(n,o){return o=Vr({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Vr(n,o){return n=Dt(22,n,null,o),n.lanes=0,n}function Eu(n,o,r){return Ci(o,n.child,null,r),n=Tu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Kh(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),Ll(n.return,o,r)}function wu(n,o,r,u,m,y){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:y}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=r,T.tailMode=m,T.treeForkCount=y)}function Yh(n,o,r){var u=o.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=Xe.current,E=(T&2)!==0;if(E?(T=T&1|2,o.flags|=128):T&=1,X(Xe,T),dt(n,o,u,r),u=Se?as:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kh(n,r,o);else if(n.tag===19)Kh(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(r=o.child,m=null;r!==null;)n=r.alternate,n!==null&&Ir(n)===null&&(m=r),r=r.sibling;r=m,r===null?(m=o.child,o.child=null):(m=r.sibling,r.sibling=null),wu(o,!1,m,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=o.child,o.child=null;m!==null;){if(n=m.alternate,n!==null&&Ir(n)===null){o.child=m;break}n=m.sibling,m.sibling=r,r=m,m=n}wu(o,!0,r,null,y,u);break;case"together":wu(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function wn(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),Wn|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(io(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,r=yn(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=yn(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function Au(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&Er(n)))}function T_(n,o,r){switch(o.tag){case 3:yt(o,o.stateNode.containerInfo),zn(o,We,n.memoizedState.cache),Si();break;case 27:case 5:Jo(o);break;case 4:yt(o,o.stateNode.containerInfo);break;case 10:zn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Xl(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Kn(o),o.flags|=128,null):(r&o.child.childLanes)!==0?Jh(n,o,r):(Kn(o),n=wn(n,o,r),n!==null?n.sibling:null);Kn(o);break;case 19:var m=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(io(n,o,r,!1),u=(r&o.childLanes)!==0),m){if(u)return Yh(n,o,r);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),X(Xe,Xe.current),u)break;return null;case 22:return o.lanes=0,Hh(n,o,r,o.pendingProps);case 24:zn(o,We,n.memoizedState.cache)}return wn(n,o,r)}function Xh(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)je=!0;else{if(!Au(n,r)&&(o.flags&128)===0)return je=!1,T_(n,o,r);je=(n.flags&131072)!==0}else je=!1,Se&&(o.flags&1048576)!==0&&Rf(o,as,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Ai(o.elementType),o.type=n,typeof n=="function")Nl(n)?(u=xi(n,u),o.tag=1,o=$h(null,o,n,u,r)):(o.tag=0,o=yu(null,o,n,u,r));else{if(n!=null){var m=n.$$typeof;if(m===$){o.tag=11,o=Lh(null,o,n,u,r);break e}else if(m===F){o.tag=14,o=qh(null,o,n,u,r);break e}}throw o=oe(n)||n,Error(s(306,o,""))}}return o;case 0:return yu(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,m=xi(u,o.pendingProps),$h(n,o,u,m,r);case 3:e:{if(yt(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;m=y.element,$l(n,o),ms(o,u,null,r);var T=o.memoizedState;if(u=T.cache,zn(o,We,u),u!==y.cache&&ql(o,[We],r,!0),ps(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Fh(n,o,u,r);break e}else if(u!==m){m=$t(Error(s(424)),o),ls(m),o=Fh(n,o,u,r);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(He=Xt(n.firstChild),ut=o,Se=!0,Bn=null,Kt=!0,r=Hf(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Si(),u===m){o=wn(n,o,r);break e}dt(n,o,u,r)}o=o.child}return o;case 26:return Br(n,o),n===null?(r=rm(o.type,null,o.pendingProps,null))?o.memoizedState=r:Se||(r=o.type,n=o.pendingProps,u=oa(me.current).createElement(r),u[lt]=o,u[Tt]=n,ft(u,r,n),st(u),o.stateNode=u):o.memoizedState=rm(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Jo(o),n===null&&Se&&(u=o.stateNode=im(o.type,o.pendingProps,me.current),ut=o,Kt=!0,m=He,ni(o.type)?(ic=m,He=Xt(u.firstChild)):He=m),dt(n,o,o.pendingProps.children,r),Br(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&Se&&((m=u=He)&&(u=W_(u,o.type,o.pendingProps,Kt),u!==null?(o.stateNode=u,ut=o,He=Xt(u.firstChild),Kt=!1,m=!0):m=!1),m||Vn(o)),Jo(o),m=o.type,y=o.pendingProps,T=n!==null?n.memoizedProps:null,u=y.children,Zu(m,y)?u=null:T!==null&&Zu(m,T)&&(o.flags|=32),o.memoizedState!==null&&(m=Wl(n,o,f_,null,null,r),Os._currentValue=m),Br(n,o),dt(n,o,u,r),o.child;case 6:return n===null&&Se&&((n=r=He)&&(r=Z_(r,o.pendingProps,Kt),r!==null?(o.stateNode=r,ut=o,He=null,n=!0):n=!1),n||Vn(o)),null;case 13:return Jh(n,o,r);case 4:return yt(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=Ci(o,null,u,r):dt(n,o,u,r),o.child;case 11:return Lh(n,o,o.type,o.pendingProps,r);case 7:return dt(n,o,o.pendingProps,r),o.child;case 8:return dt(n,o,o.pendingProps.children,r),o.child;case 12:return dt(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,zn(o,o.type,u.value),dt(n,o,u.children,r),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,Ei(o),m=ct(m),u=u(m),o.flags|=1,dt(n,o,u,r),o.child;case 14:return qh(n,o,o.type,o.pendingProps,r);case 15:return Gh(n,o,o.type,o.pendingProps,r);case 19:return Yh(n,o,r);case 31:return S_(n,o,r);case 22:return Hh(n,o,r,o.pendingProps);case 24:return Ei(o),u=ct(We),n===null?(m=Bl(),m===null&&(m=Le,y=Gl(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),o.memoizedState={parent:u,cache:m},zl(o),zn(o,We,m)):((n.lanes&r)!==0&&($l(n,o),ms(o,null,null,r),ps()),m=n.memoizedState,y=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),zn(o,We,u)):(u=y.cache,zn(o,We,u),u!==m.cache&&ql(o,[We],r,!0))),dt(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function An(n){n.flags|=4}function bu(n,o,r,u,m){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Ep())n.flags|=8192;else throw bi=Cr,Vl}else n.flags&=-16777217}function Qh(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!dm(o))if(Ep())n.flags|=8192;else throw bi=Cr,Vl}function zr(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?xd():536870912,n.lanes|=o,go|=o)}function Ts(n,o){if(!Se)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Be(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function E_(n,o,r){var u=o.pendingProps;switch(kl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(o),null;case 1:return Be(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Sn(We),Ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(no(o)?An(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ol())),Be(o),null;case 26:var m=o.type,y=o.memoizedState;return n===null?(An(o),y!==null?(Be(o),Qh(o,y)):(Be(o),bu(o,m,null,u,r))):y?y!==n.memoizedState?(An(o),Be(o),Qh(o,y)):(Be(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&An(o),Be(o),bu(o,m,n,u,r)),null;case 27:if(er(o),r=me.current,m=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&An(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Be(o),null}n=j.current,no(o)?Nf(o):(n=im(m,u,r),o.stateNode=n,An(o))}return Be(o),null;case 5:if(er(o),m=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&An(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Be(o),null}if(y=j.current,no(o))Nf(o);else{var T=oa(me.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[lt]=o,y[Tt]=u;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=y;e:switch(ft(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&An(o)}}return Be(o),bu(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&An(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=me.current,no(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,m=ut,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[lt]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Jp(n.nodeValue,r)),n||Vn(o,!0)}else n=oa(n).createTextNode(u),n[lt]=o,o.stateNode=n}return Be(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=no(o),r!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[lt]=o}else Si(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Be(o),n=!1}else r=Ol(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(Ut(o),o):(Ut(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Be(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=no(o),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[lt]=o}else Si(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Be(o),m=!1}else m=Ol(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Ut(o),o):(Ut(o),null)}return Ut(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),zr(o,o.updateQueue),Be(o),null);case 4:return Ye(),n===null&&Ku(o.stateNode.containerInfo),Be(o),null;case 10:return Sn(o.type),Be(o),null;case 19:if(z(Xe),u=o.memoizedState,u===null)return Be(o),null;if(m=(o.flags&128)!==0,y=u.rendering,y===null)if(m)Ts(u,!1);else{if(Je!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Ir(n),y!==null){for(o.flags|=128,Ts(u,!1),n=y.updateQueue,o.updateQueue=n,zr(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)Af(r,n),r=r.sibling;return X(Xe,Xe.current&1|2),Se&&vn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&xt()>Yr&&(o.flags|=128,m=!0,Ts(u,!1),o.lanes=4194304)}else{if(!m)if(n=Ir(y),n!==null){if(o.flags|=128,m=!0,n=n.updateQueue,o.updateQueue=n,zr(o,n),Ts(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Se)return Be(o),null}else 2*xt()-u.renderingStartTime>Yr&&r!==536870912&&(o.flags|=128,m=!0,Ts(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=xt(),n.sibling=null,r=Xe.current,X(Xe,m?r&1|2:r&1),Se&&vn(o,u.treeForkCount),n):(Be(o),null);case 22:case 23:return Ut(o),Yl(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(Be(o),o.subtreeFlags&6&&(o.flags|=8192)):Be(o),r=o.updateQueue,r!==null&&zr(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&z(wi),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),Sn(We),Be(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function w_(n,o){switch(kl(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Sn(We),Ye(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return er(o),null;case 31:if(o.memoizedState!==null){if(Ut(o),o.alternate===null)throw Error(s(340));Si()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Ut(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Si()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return z(Xe),null;case 4:return Ye(),null;case 10:return Sn(o.type),null;case 22:case 23:return Ut(o),Yl(),n!==null&&z(wi),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Sn(We),null;case 25:return null;default:return null}}function Wh(n,o){switch(kl(o),o.tag){case 3:Sn(We),Ye();break;case 26:case 27:case 5:er(o);break;case 4:Ye();break;case 31:o.memoizedState!==null&&Ut(o);break;case 13:Ut(o);break;case 19:z(Xe);break;case 10:Sn(o.type);break;case 22:case 23:Ut(o),Yl(),n!==null&&z(wi);break;case 24:Sn(We)}}function Es(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&n)===n){u=void 0;var y=r.create,T=r.inst;u=y(),T.destroy=u}r=r.next}while(r!==m)}}catch(E){Me(o,o.return,E)}}function Xn(n,o,r){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&n)===n){var T=u.inst,E=T.destroy;if(E!==void 0){T.destroy=void 0,m=o;var C=r,U=E;try{U()}catch(H){Me(m,C,H)}}}u=u.next}while(u!==y)}}catch(H){Me(o,o.return,H)}}function Zh(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{Vf(o,r)}catch(u){Me(n,n.return,u)}}}function jh(n,o,r){r.props=xi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Me(n,o,u)}}function ws(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(m){Me(n,o,m)}}function fn(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){Me(n,o,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Me(n,o,m)}else r.current=null}function ep(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){Me(n,n.return,m)}}function Cu(n,o,r){try{var u=n.stateNode;F_(u,n.type,r,o),u[Tt]=o}catch(m){Me(n,n.return,m)}}function tp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ni(n.type)||n.tag===4}function Ru(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ni(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xu(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=mn));else if(u!==4&&(u===27&&ni(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(xu(n,o,r),n=n.sibling;n!==null;)xu(n,o,r),n=n.sibling}function $r(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&ni(n.type)&&(r=n.stateNode),n=n.child,n!==null))for($r(n,o,r),n=n.sibling;n!==null;)$r(n,o,r),n=n.sibling}function np(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);ft(o,u,r),o[lt]=n,o[Tt]=r}catch(y){Me(n,n.return,y)}}var bn=!1,et=!1,Nu=!1,ip=typeof WeakSet=="function"?WeakSet:Set,rt=null;function A_(n,o){if(n=n.containerInfo,Qu=da,n=mf(n),El(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,E=-1,C=-1,U=0,H=0,V=n,P=null;t:for(;;){for(var L;V!==r||m!==0&&V.nodeType!==3||(E=T+m),V!==y||u!==0&&V.nodeType!==3||(C=T+u),V.nodeType===3&&(T+=V.nodeValue.length),(L=V.firstChild)!==null;)P=V,V=L;for(;;){if(V===n)break t;if(P===r&&++U===m&&(E=T),P===y&&++H===u&&(C=T),(L=V.nextSibling)!==null)break;V=P,P=V.parentNode}V=L}r=E===-1||C===-1?null:{start:E,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wu={focusedElem:n,selectionRange:r},da=!1,rt=o;rt!==null;)if(o=rt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,rt=n;else for(;rt!==null;){switch(o=rt,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)m=n[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=o,m=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var Z=xi(r.type,m);n=u.getSnapshotBeforeUpdate(Z,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(ie){Me(r,r.return,ie)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)ec(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ec(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,rt=n;break}rt=o.return}}function op(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Rn(n,r),u&4&&Es(5,r);break;case 1:if(Rn(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(T){Me(r,r.return,T)}else{var m=xi(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(m,o,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Me(r,r.return,T)}}u&64&&Zh(r),u&512&&ws(r,r.return);break;case 3:if(Rn(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Vf(n,o)}catch(T){Me(r,r.return,T)}}break;case 27:o===null&&u&4&&np(r);case 26:case 5:Rn(n,r),o===null&&u&4&&ep(r),u&512&&ws(r,r.return);break;case 12:Rn(n,r);break;case 31:Rn(n,r),u&4&&ap(n,r);break;case 13:Rn(n,r),u&4&&lp(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=k_.bind(null,r),j_(n,r))));break;case 22:if(u=r.memoizedState!==null||bn,!u){o=o!==null&&o.memoizedState!==null||et,m=bn;var y=et;bn=u,(et=o)&&!y?xn(n,r,(r.subtreeFlags&8772)!==0):Rn(n,r),bn=m,et=y}break;case 30:break;default:Rn(n,r)}}function sp(n){var o=n.alternate;o!==null&&(n.alternate=null,sp(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&sl(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ze=null,wt=!1;function Cn(n,o,r){for(r=r.child;r!==null;)rp(n,o,r),r=r.sibling}function rp(n,o,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Ko,r)}catch{}switch(r.tag){case 26:et||fn(r,o),Cn(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:et||fn(r,o);var u=ze,m=wt;ni(r.type)&&(ze=r.stateNode,wt=!1),Cn(n,o,r),Ds(r.stateNode),ze=u,wt=m;break;case 5:et||fn(r,o);case 6:if(u=ze,m=wt,ze=null,Cn(n,o,r),ze=u,wt=m,ze!==null)if(wt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(r.stateNode)}catch(y){Me(r,o,y)}else try{ze.removeChild(r.stateNode)}catch(y){Me(r,o,y)}break;case 18:ze!==null&&(wt?(n=ze,Zp(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Ao(n)):Zp(ze,r.stateNode));break;case 4:u=ze,m=wt,ze=r.stateNode.containerInfo,wt=!0,Cn(n,o,r),ze=u,wt=m;break;case 0:case 11:case 14:case 15:Xn(2,r,o),et||Xn(4,r,o),Cn(n,o,r);break;case 1:et||(fn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&jh(r,o,u)),Cn(n,o,r);break;case 21:Cn(n,o,r);break;case 22:et=(u=et)||r.memoizedState!==null,Cn(n,o,r),et=u;break;default:Cn(n,o,r)}}function ap(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(r){Me(o,o.return,r)}}}function lp(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(r){Me(o,o.return,r)}}function b_(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new ip),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new ip),o;default:throw Error(s(435,n.tag))}}function Fr(n,o){var r=b_(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var m=U_.bind(null,n,u);u.then(m,m)}})}function At(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],y=n,T=o,E=T;e:for(;E!==null;){switch(E.tag){case 27:if(ni(E.type)){ze=E.stateNode,wt=!1;break e}break;case 5:ze=E.stateNode,wt=!1;break e;case 3:case 4:ze=E.stateNode.containerInfo,wt=!0;break e}E=E.return}if(ze===null)throw Error(s(160));rp(y,T,m),ze=null,wt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)up(o,n),o=o.sibling}var tn=null;function up(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:At(o,n),bt(n),u&4&&(Xn(3,n,n.return),Es(3,n),Xn(5,n,n.return));break;case 1:At(o,n),bt(n),u&512&&(et||r===null||fn(r,r.return)),u&64&&bn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=tn;if(At(o,n),bt(n),u&512&&(et||r===null||fn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Qo]||y[lt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),ft(y,u,r),y[lt]=n,st(y),u=y;break e;case"link":var T=um("link","href",m).get(u+(r.href||""));if(T){for(var E=0;E<T.length;E++)if(y=T[E],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(E,1);break t}}y=m.createElement(u),ft(y,u,r),m.head.appendChild(y);break;case"meta":if(T=um("meta","content",m).get(u+(r.content||""))){for(E=0;E<T.length;E++)if(y=T[E],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(E,1);break t}}y=m.createElement(u),ft(y,u,r),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[lt]=n,st(y),u=y}n.stateNode=u}else cm(m,n.type,n.stateNode);else n.stateNode=lm(m,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?cm(m,n.type,n.stateNode):lm(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Cu(n,n.memoizedProps,r.memoizedProps)}break;case 27:At(o,n),bt(n),u&512&&(et||r===null||fn(r,r.return)),r!==null&&u&4&&Cu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(At(o,n),bt(n),u&512&&(et||r===null||fn(r,r.return)),n.flags&32){m=n.stateNode;try{Ji(m,"")}catch(Z){Me(n,n.return,Z)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,Cu(n,m,r!==null?r.memoizedProps:m)),u&1024&&(Nu=!0);break;case 6:if(At(o,n),bt(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(Z){Me(n,n.return,Z)}}break;case 3:if(aa=null,m=tn,tn=sa(o.containerInfo),At(o,n),tn=m,bt(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Ao(o.containerInfo)}catch(Z){Me(n,n.return,Z)}Nu&&(Nu=!1,cp(n));break;case 4:u=tn,tn=sa(n.stateNode.containerInfo),At(o,n),bt(n),tn=u;break;case 12:At(o,n),bt(n);break;case 31:At(o,n),bt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fr(n,u)));break;case 13:At(o,n),bt(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Kr=xt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fr(n,u)));break;case 22:m=n.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,U=bn,H=et;if(bn=U||m,et=H||C,At(o,n),et=H,bn=U,bt(n),u&8192)e:for(o=n.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(r===null||C||bn||et||Ni(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){C=r=o;try{if(y=C.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{E=C.stateNode;var V=C.memoizedProps.style,P=V!=null&&V.hasOwnProperty("display")?V.display:null;E.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(Z){Me(C,C.return,Z)}}}else if(o.tag===6){if(r===null){C=o;try{C.stateNode.nodeValue=m?"":C.memoizedProps}catch(Z){Me(C,C.return,Z)}}}else if(o.tag===18){if(r===null){C=o;try{var L=C.stateNode;m?jp(L,!0):jp(C.stateNode,!1)}catch(Z){Me(C,C.return,Z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Fr(n,r))));break;case 19:At(o,n),bt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fr(n,u)));break;case 30:break;case 21:break;default:At(o,n),bt(n)}}function bt(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if(tp(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var m=r.stateNode,y=Ru(n);$r(n,y,m);break;case 5:var T=r.stateNode;r.flags&32&&(Ji(T,""),r.flags&=-33);var E=Ru(n);$r(n,E,T);break;case 3:case 4:var C=r.stateNode.containerInfo,U=Ru(n);xu(n,U,C);break;default:throw Error(s(161))}}catch(H){Me(n,n.return,H)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function cp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;cp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Rn(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)op(n,o.alternate,o),o=o.sibling}function Ni(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:Xn(4,o,o.return),Ni(o);break;case 1:fn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&jh(o,o.return,r),Ni(o);break;case 27:Ds(o.stateNode);case 26:case 5:fn(o,o.return),Ni(o);break;case 22:o.memoizedState===null&&Ni(o);break;case 30:Ni(o);break;default:Ni(o)}n=n.sibling}}function xn(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=n,y=o,T=y.flags;switch(y.tag){case 0:case 11:case 15:xn(m,y,r),Es(4,y);break;case 1:if(xn(m,y,r),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(U){Me(u,u.return,U)}if(u=y,m=u.updateQueue,m!==null){var E=u.stateNode;try{var C=m.shared.hiddenCallbacks;if(C!==null)for(m.shared.hiddenCallbacks=null,m=0;m<C.length;m++)Bf(C[m],E)}catch(U){Me(u,u.return,U)}}r&&T&64&&Zh(y),ws(y,y.return);break;case 27:np(y);case 26:case 5:xn(m,y,r),r&&u===null&&T&4&&ep(y),ws(y,y.return);break;case 12:xn(m,y,r);break;case 31:xn(m,y,r),r&&T&4&&ap(m,y);break;case 13:xn(m,y,r),r&&T&4&&lp(m,y);break;case 22:y.memoizedState===null&&xn(m,y,r),ws(y,y.return);break;case 30:break;default:xn(m,y,r)}o=o.sibling}}function Iu(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&us(r))}function Mu(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&us(n))}function nn(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)dp(n,o,r,u),o=o.sibling}function dp(n,o,r,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:nn(n,o,r,u),m&2048&&Es(9,o);break;case 1:nn(n,o,r,u);break;case 3:nn(n,o,r,u),m&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&us(n)));break;case 12:if(m&2048){nn(n,o,r,u),n=o.stateNode;try{var y=o.memoizedProps,T=y.id,E=y.onPostCommit;typeof E=="function"&&E(T,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){Me(o,o.return,C)}}else nn(n,o,r,u);break;case 31:nn(n,o,r,u);break;case 13:nn(n,o,r,u);break;case 23:break;case 22:y=o.stateNode,T=o.alternate,o.memoizedState!==null?y._visibility&2?nn(n,o,r,u):As(n,o):y._visibility&2?nn(n,o,r,u):(y._visibility|=2,ho(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Iu(T,o);break;case 24:nn(n,o,r,u),m&2048&&Mu(o.alternate,o);break;default:nn(n,o,r,u)}}function ho(n,o,r,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,T=o,E=r,C=u,U=T.flags;switch(T.tag){case 0:case 11:case 15:ho(y,T,E,C,m),Es(8,T);break;case 23:break;case 22:var H=T.stateNode;T.memoizedState!==null?H._visibility&2?ho(y,T,E,C,m):As(y,T):(H._visibility|=2,ho(y,T,E,C,m)),m&&U&2048&&Iu(T.alternate,T);break;case 24:ho(y,T,E,C,m),m&&U&2048&&Mu(T.alternate,T);break;default:ho(y,T,E,C,m)}o=o.sibling}}function As(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,m=u.flags;switch(u.tag){case 22:As(r,u),m&2048&&Iu(u.alternate,u);break;case 24:As(r,u),m&2048&&Mu(u.alternate,u);break;default:As(r,u)}o=o.sibling}}var bs=8192;function po(n,o,r){if(n.subtreeFlags&bs)for(n=n.child;n!==null;)fp(n,o,r),n=n.sibling}function fp(n,o,r){switch(n.tag){case 26:po(n,o,r),n.flags&bs&&n.memoizedState!==null&&dS(r,tn,n.memoizedState,n.memoizedProps);break;case 5:po(n,o,r);break;case 3:case 4:var u=tn;tn=sa(n.stateNode.containerInfo),po(n,o,r),tn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=bs,bs=16777216,po(n,o,r),bs=u):po(n,o,r));break;default:po(n,o,r)}}function hp(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Cs(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];rt=u,mp(u,n)}hp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)pp(n),n=n.sibling}function pp(n){switch(n.tag){case 0:case 11:case 15:Cs(n),n.flags&2048&&Xn(9,n,n.return);break;case 3:Cs(n);break;case 12:Cs(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,Jr(n)):Cs(n);break;default:Cs(n)}}function Jr(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];rt=u,mp(u,n)}hp(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:Xn(8,o,o.return),Jr(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,Jr(o));break;default:Jr(o)}n=n.sibling}}function mp(n,o){for(;rt!==null;){var r=rt;switch(r.tag){case 0:case 11:case 15:Xn(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:us(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,rt=u;else e:for(r=n;rt!==null;){u=rt;var m=u.sibling,y=u.return;if(sp(u),u===r){rt=null;break e}if(m!==null){m.return=y,rt=m;break e}rt=y}}}var C_={getCacheForType:function(n){var o=ct(We),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return ct(We).controller.signal}},R_=typeof WeakMap=="function"?WeakMap:Map,xe=0,Le=null,ge=null,ve=0,Ie=0,Ot=null,Qn=!1,mo=!1,Du=!1,Nn=0,Je=0,Wn=0,Ii=0,ku=0,Pt=0,go=0,Rs=null,Ct=null,Uu=!1,Kr=0,gp=0,Yr=1/0,Xr=null,Zn=null,nt=0,jn=null,yo=null,In=0,Ou=0,Pu=null,yp=null,xs=0,Lu=null;function Lt(){return(xe&2)!==0&&ve!==0?ve&-ve:q.T!==null?zu():Dd()}function vp(){if(Pt===0)if((ve&536870912)===0||Se){var n=ir;ir<<=1,(ir&3932160)===0&&(ir=262144),Pt=n}else Pt=536870912;return n=kt.current,n!==null&&(n.flags|=32),Pt}function Rt(n,o,r){(n===Le&&(Ie===2||Ie===9)||n.cancelPendingCommit!==null)&&(vo(n,0),ei(n,ve,Pt,!1)),Xo(n,r),((xe&2)===0||n!==Le)&&(n===Le&&((xe&2)===0&&(Ii|=r),Je===4&&ei(n,ve,Pt,!1)),hn(n))}function _p(n,o,r){if((xe&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||Yo(n,o),m=u?I_(n,o):Gu(n,o,!0),y=u;do{if(m===0){mo&&!u&&ei(n,o,0,!1);break}else{if(r=n.current.alternate,y&&!x_(r)){m=Gu(n,o,!1),y=!1;continue}if(m===2){if(y=o,n.errorRecoveryDisabledLanes&y)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var E=n;m=Rs;var C=E.current.memoizedState.isDehydrated;if(C&&(vo(E,T).flags|=256),T=Gu(E,T,!1),T!==2){if(Du&&!C){E.errorRecoveryDisabledLanes|=y,Ii|=y,m=4;break e}y=Ct,Ct=m,y!==null&&(Ct===null?Ct=y:Ct.push.apply(Ct,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){vo(n,0),ei(n,o,0,!0);break}e:{switch(u=n,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ei(u,o,Pt,!Qn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Kr+300-xt(),10<m)){if(ei(u,o,Pt,!Qn),sr(u,0,!0)!==0)break e;In=o,u.timeoutHandle=Qp(Sp.bind(null,u,r,Ct,Xr,Uu,o,Pt,Ii,go,Qn,y,"Throttled",-0,0),m);break e}Sp(u,r,Ct,Xr,Uu,o,Pt,Ii,go,Qn,y,null,-0,0)}}break}while(!0);hn(n)}function Sp(n,o,r,u,m,y,T,E,C,U,H,V,P,L){if(n.timeoutHandle=-1,V=o.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},fp(o,y,V);var Z=(y&62914560)===y?Kr-xt():(y&4194048)===y?gp-xt():0;if(Z=fS(V,Z),Z!==null){In=y,n.cancelPendingCommit=Z(xp.bind(null,n,o,y,r,u,m,T,E,C,H,V,null,P,L)),ei(n,y,T,!U);return}}xp(n,o,y,r,u,m,T,E,C)}function x_(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],y=m.getSnapshot;m=m.value;try{if(!Mt(y(),m))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ei(n,o,r,u){o&=~ku,o&=~Ii,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var m=o;0<m;){var y=31-It(m),T=1<<y;u[y]=-1,m&=~T}r!==0&&Nd(n,r,o)}function Qr(){return(xe&6)===0?(Ns(0),!1):!0}function qu(){if(ge!==null){if(Ie===0)var n=ge.return;else n=ge,_n=Ti=null,eu(n),ao=null,ds=0,n=ge;for(;n!==null;)Wh(n.alternate,n),n=n.return;ge=null}}function vo(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,Y_(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),In=0,qu(),Le=n,ge=r=yn(n.current,null),ve=o,Ie=0,Ot=null,Qn=!1,mo=Yo(n,o),Du=!1,go=Pt=ku=Ii=Wn=Je=0,Ct=Rs=null,Uu=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var m=31-It(u),y=1<<m;o|=n[m],u&=~y}return Nn=o,yr(),r}function Tp(n,o){fe=null,q.H=_s,o===ro||o===br?(o=Lf(),Ie=3):o===Vl?(o=Lf(),Ie=4):Ie=o===gu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ot=o,ge===null&&(Je=1,Gr(n,$t(o,n.current)))}function Ep(){var n=kt.current;return n===null?!0:(ve&4194048)===ve?Yt===null:(ve&62914560)===ve||(ve&536870912)!==0?n===Yt:!1}function wp(){var n=q.H;return q.H=_s,n===null?_s:n}function Ap(){var n=q.A;return q.A=C_,n}function Wr(){Je=4,Qn||(ve&4194048)!==ve&&kt.current!==null||(mo=!0),(Wn&134217727)===0&&(Ii&134217727)===0||Le===null||ei(Le,ve,Pt,!1)}function Gu(n,o,r){var u=xe;xe|=2;var m=wp(),y=Ap();(Le!==n||ve!==o)&&(Xr=null,vo(n,o)),o=!1;var T=Je;e:do try{if(Ie!==0&&ge!==null){var E=ge,C=Ot;switch(Ie){case 8:qu(),T=6;break e;case 3:case 2:case 9:case 6:kt.current===null&&(o=!0);var U=Ie;if(Ie=0,Ot=null,_o(n,E,C,U),r&&mo){T=0;break e}break;default:U=Ie,Ie=0,Ot=null,_o(n,E,C,U)}}N_(),T=Je;break}catch(H){Tp(n,H)}while(!0);return o&&n.shellSuspendCounter++,_n=Ti=null,xe=u,q.H=m,q.A=y,ge===null&&(Le=null,ve=0,yr()),T}function N_(){for(;ge!==null;)bp(ge)}function I_(n,o){var r=xe;xe|=2;var u=wp(),m=Ap();Le!==n||ve!==o?(Xr=null,Yr=xt()+500,vo(n,o)):mo=Yo(n,o);e:do try{if(Ie!==0&&ge!==null){o=ge;var y=Ot;t:switch(Ie){case 1:Ie=0,Ot=null,_o(n,o,y,1);break;case 2:case 9:if(Of(y)){Ie=0,Ot=null,Cp(o);break}o=function(){Ie!==2&&Ie!==9||Le!==n||(Ie=7),hn(n)},y.then(o,o);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Of(y)?(Ie=0,Ot=null,Cp(o)):(Ie=0,Ot=null,_o(n,o,y,7));break;case 5:var T=null;switch(ge.tag){case 26:T=ge.memoizedState;case 5:case 27:var E=ge;if(T?dm(T):E.stateNode.complete){Ie=0,Ot=null;var C=E.sibling;if(C!==null)ge=C;else{var U=E.return;U!==null?(ge=U,Zr(U)):ge=null}break t}}Ie=0,Ot=null,_o(n,o,y,5);break;case 6:Ie=0,Ot=null,_o(n,o,y,6);break;case 8:qu(),Je=6;break e;default:throw Error(s(462))}}M_();break}catch(H){Tp(n,H)}while(!0);return _n=Ti=null,q.H=u,q.A=m,xe=r,ge!==null?0:(Le=null,ve=0,yr(),Je)}function M_(){for(;ge!==null&&!e0();)bp(ge)}function bp(n){var o=Xh(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,o===null?Zr(n):ge=o}function Cp(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=zh(r,o,o.pendingProps,o.type,void 0,ve);break;case 11:o=zh(r,o,o.pendingProps,o.type.render,o.ref,ve);break;case 5:eu(o);default:Wh(r,o),o=ge=Af(o,Nn),o=Xh(r,o,Nn)}n.memoizedProps=n.pendingProps,o===null?Zr(n):ge=o}function _o(n,o,r,u){_n=Ti=null,eu(o),ao=null,ds=0;var m=o.return;try{if(__(n,m,o,r,ve)){Je=1,Gr(n,$t(r,n.current)),ge=null;return}}catch(y){if(m!==null)throw ge=m,y;Je=1,Gr(n,$t(r,n.current)),ge=null;return}o.flags&32768?(Se||u===1?n=!0:mo||(ve&536870912)!==0?n=!1:(Qn=n=!0,(u===2||u===9||u===3||u===6)&&(u=kt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Rp(o,n)):Zr(o)}function Zr(n){var o=n;do{if((o.flags&32768)!==0){Rp(o,Qn);return}n=o.return;var r=E_(o.alternate,o,Nn);if(r!==null){ge=r;return}if(o=o.sibling,o!==null){ge=o;return}ge=o=n}while(o!==null);Je===0&&(Je=5)}function Rp(n,o){do{var r=w_(n.alternate,n);if(r!==null){r.flags&=32767,ge=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){ge=n;return}ge=n=r}while(n!==null);Je=6,ge=null}function xp(n,o,r,u,m,y,T,E,C){n.cancelPendingCommit=null;do jr();while(nt!==0);if((xe&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Rl,c0(n,r,y,T,E,C),n===Le&&(ge=Le=null,ve=0),yo=o,jn=n,In=r,Ou=y,Pu=m,yp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,O_(tr,function(){return kp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,m=K.p,K.p=2,T=xe,xe|=4;try{A_(n,o,r)}finally{xe=T,K.p=m,q.T=u}}nt=1,Np(),Ip(),Mp()}}function Np(){if(nt===1){nt=0;var n=jn,o=yo,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=q.T,q.T=null;var u=K.p;K.p=2;var m=xe;xe|=4;try{up(o,n);var y=Wu,T=mf(n.containerInfo),E=y.focusedElem,C=y.selectionRange;if(T!==E&&E&&E.ownerDocument&&pf(E.ownerDocument.documentElement,E)){if(C!==null&&El(E)){var U=C.start,H=C.end;if(H===void 0&&(H=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(H,E.value.length);else{var V=E.ownerDocument||document,P=V&&V.defaultView||window;if(P.getSelection){var L=P.getSelection(),Z=E.textContent.length,ie=Math.min(C.start,Z),Oe=C.end===void 0?ie:Math.min(C.end,Z);!L.extend&&ie>Oe&&(T=Oe,Oe=ie,ie=T);var M=hf(E,ie),N=hf(E,Oe);if(M&&N&&(L.rangeCount!==1||L.anchorNode!==M.node||L.anchorOffset!==M.offset||L.focusNode!==N.node||L.focusOffset!==N.offset)){var k=V.createRange();k.setStart(M.node,M.offset),L.removeAllRanges(),ie>Oe?(L.addRange(k),L.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),L.addRange(k))}}}}for(V=[],L=E;L=L.parentNode;)L.nodeType===1&&V.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<V.length;E++){var B=V[E];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}da=!!Qu,Wu=Qu=null}finally{xe=m,K.p=u,q.T=r}}n.current=o,nt=2}}function Ip(){if(nt===2){nt=0;var n=jn,o=yo,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=q.T,q.T=null;var u=K.p;K.p=2;var m=xe;xe|=4;try{op(n,o.alternate,o)}finally{xe=m,K.p=u,q.T=r}}nt=3}}function Mp(){if(nt===4||nt===3){nt=0,t0();var n=jn,o=yo,r=In,u=yp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?nt=5:(nt=0,yo=jn=null,Dp(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Zn=null),il(r),o=o.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Ko,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=q.T,m=K.p,K.p=2,q.T=null;try{for(var y=n.onRecoverableError,T=0;T<u.length;T++){var E=u[T];y(E.value,{componentStack:E.stack})}}finally{q.T=o,K.p=m}}(In&3)!==0&&jr(),hn(n),m=n.pendingLanes,(r&261930)!==0&&(m&42)!==0?n===Lu?xs++:(xs=0,Lu=n):xs=0,Ns(0)}}function Dp(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,us(o)))}function jr(){return Np(),Ip(),Mp(),kp()}function kp(){if(nt!==5)return!1;var n=jn,o=Ou;Ou=0;var r=il(In),u=q.T,m=K.p;try{K.p=32>r?32:r,q.T=null,r=Pu,Pu=null;var y=jn,T=In;if(nt=0,yo=jn=null,In=0,(xe&6)!==0)throw Error(s(331));var E=xe;if(xe|=4,pp(y.current),dp(y,y.current,T,r),xe=E,Ns(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Ko,y)}catch{}return!0}finally{K.p=m,q.T=u,Dp(n,o)}}function Up(n,o,r){o=$t(r,o),o=mu(n.stateNode,o,2),n=Jn(n,o,2),n!==null&&(Xo(n,2),hn(n))}function Me(n,o,r){if(n.tag===3)Up(n,n,r);else for(;o!==null;){if(o.tag===3){Up(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zn===null||!Zn.has(u))){n=$t(r,n),r=Oh(2),u=Jn(o,r,2),u!==null&&(Ph(r,u,o,n),Xo(u,2),hn(u));break}}o=o.return}}function Hu(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new R_;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(r)||(Du=!0,m.add(r),n=D_.bind(null,n,o,r),o.then(n,n))}function D_(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Le===n&&(ve&r)===r&&(Je===4||Je===3&&(ve&62914560)===ve&&300>xt()-Kr?(xe&2)===0&&vo(n,0):ku|=r,go===ve&&(go=0)),hn(n)}function Op(n,o){o===0&&(o=xd()),n=vi(n,o),n!==null&&(Xo(n,o),hn(n))}function k_(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),Op(n,r)}function U_(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Op(n,r)}function O_(n,o){return ja(n,o)}var ea=null,So=null,Bu=!1,ta=!1,Vu=!1,ti=0;function hn(n){n!==So&&n.next===null&&(So===null?ea=So=n:So=So.next=n),ta=!0,Bu||(Bu=!0,L_())}function Ns(n,o){if(!Vu&&ta){Vu=!0;do for(var r=!1,u=ea;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,E=u.pingedLanes;y=(1<<31-It(42|n)+1)-1,y&=m&~(T&~E),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Gp(u,y))}else y=ve,y=sr(u,u===Le?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Yo(u,y)||(r=!0,Gp(u,y));u=u.next}while(r);Vu=!1}}function P_(){Pp()}function Pp(){ta=Bu=!1;var n=0;ti!==0&&K_()&&(n=ti);for(var o=xt(),r=null,u=ea;u!==null;){var m=u.next,y=Lp(u,o);y===0?(u.next=null,r===null?ea=m:r.next=m,m===null&&(So=r)):(r=u,(n!==0||(y&3)!==0)&&(ta=!0)),u=m}nt!==0&&nt!==5||Ns(n),ti!==0&&(ti=0)}function Lp(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var T=31-It(y),E=1<<T,C=m[T];C===-1?((E&r)===0||(E&u)!==0)&&(m[T]=u0(E,o)):C<=o&&(n.expiredLanes|=E),y&=~E}if(o=Le,r=ve,r=sr(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(Ie===2||Ie===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&el(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Yo(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&el(u),il(r)){case 2:case 8:r=Cd;break;case 32:r=tr;break;case 268435456:r=Rd;break;default:r=tr}return u=qp.bind(null,n),r=ja(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&el(u),n.callbackPriority=2,n.callbackNode=null,2}function qp(n,o){if(nt!==0&&nt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(jr()&&n.callbackNode!==r)return null;var u=ve;return u=sr(n,n===Le?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(_p(n,u,o),Lp(n,xt()),n.callbackNode!=null&&n.callbackNode===r?qp.bind(null,n):null)}function Gp(n,o){if(jr())return null;_p(n,o,!0)}function L_(){X_(function(){(xe&6)!==0?ja(bd,P_):Pp()})}function zu(){if(ti===0){var n=oo;n===0&&(n=nr,nr<<=1,(nr&261888)===0&&(nr=256)),ti=n}return ti}function Hp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ur(""+n)}function Bp(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function q_(n,o,r,u,m){if(o==="submit"&&r&&r.stateNode===m){var y=Hp((m[Tt]||null).action),T=u.submitter;T&&(o=(o=T[Tt]||null)?Hp(o.formAction):T.getAttribute("formAction"),o!==null&&(y=o,T=null));var E=new hr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ti!==0){var C=T?Bp(m,T):new FormData(m);uu(r,{pending:!0,data:C,method:m.method,action:y},null,C)}}else typeof y=="function"&&(E.preventDefault(),C=T?Bp(m,T):new FormData(m),uu(r,{pending:!0,data:C,method:m.method,action:y},y,C))},currentTarget:m}]})}}for(var $u=0;$u<Cl.length;$u++){var Fu=Cl[$u],G_=Fu.toLowerCase(),H_=Fu[0].toUpperCase()+Fu.slice(1);en(G_,"on"+H_)}en(vf,"onAnimationEnd"),en(_f,"onAnimationIteration"),en(Sf,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(n_,"onTransitionRun"),en(i_,"onTransitionStart"),en(o_,"onTransitionCancel"),en(Tf,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Is));function Vp(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],m=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var T=u.length-1;0<=T;T--){var E=u[T],C=E.instance,U=E.currentTarget;if(E=E.listener,C!==y&&m.isPropagationStopped())break e;y=E,m.currentTarget=U;try{y(m)}catch(H){gr(H)}m.currentTarget=null,y=C}else for(T=0;T<u.length;T++){if(E=u[T],C=E.instance,U=E.currentTarget,E=E.listener,C!==y&&m.isPropagationStopped())break e;y=E,m.currentTarget=U;try{y(m)}catch(H){gr(H)}m.currentTarget=null,y=C}}}}function ye(n,o){var r=o[ol];r===void 0&&(r=o[ol]=new Set);var u=n+"__bubble";r.has(u)||(zp(o,n,2,!1),r.add(u))}function Ju(n,o,r){var u=0;o&&(u|=4),zp(r,n,u,o)}var na="_reactListening"+Math.random().toString(36).slice(2);function Ku(n){if(!n[na]){n[na]=!0,Od.forEach(function(r){r!=="selectionchange"&&(B_.has(r)||Ju(r,!1,n),Ju(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[na]||(o[na]=!0,Ju("selectionchange",!1,o))}}function zp(n,o,r,u){switch(vm(o)){case 2:var m=mS;break;case 8:m=gS;break;default:m=lc}r=m.bind(null,o,r,n),m=void 0,!hl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(o,r,{capture:!0,passive:m}):n.addEventListener(o,r,!0):m!==void 0?n.addEventListener(o,r,{passive:m}):n.addEventListener(o,r,!1)}function Yu(n,o,r,u,m){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var E=u.stateNode.containerInfo;if(E===m)break;if(T===4)for(T=u.return;T!==null;){var C=T.tag;if((C===3||C===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;E!==null;){if(T=Bi(E),T===null)return;if(C=T.tag,C===5||C===6||C===26||C===27){u=y=T;continue e}E=E.parentNode}}u=u.return}Kd(function(){var U=y,H=dl(r),V=[];e:{var P=Ef.get(n);if(P!==void 0){var L=hr,Z=n;switch(n){case"keypress":if(dr(r)===0)break e;case"keydown":case"keyup":L=U0;break;case"focusin":Z="focus",L=yl;break;case"focusout":Z="blur",L=yl;break;case"beforeblur":case"afterblur":L=yl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=L0;break;case vf:case _f:case Sf:L=b0;break;case Tf:L=G0;break;case"scroll":case"scrollend":L=S0;break;case"wheel":L=B0;break;case"copy":case"cut":case"paste":L=R0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Zd;break;case"toggle":case"beforetoggle":L=z0}var ie=(o&4)!==0,Oe=!ie&&(n==="scroll"||n==="scrollend"),M=ie?P!==null?P+"Capture":null:P;ie=[];for(var N=U,k;N!==null;){var B=N;if(k=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||k===null||M===null||(B=Zo(N,M),B!=null&&ie.push(Ms(N,B,k))),Oe)break;N=N.return}0<ie.length&&(P=new L(P,Z,null,r,H),V.push({event:P,listeners:ie}))}}if((o&7)===0){e:{if(P=n==="mouseover"||n==="pointerover",L=n==="mouseout"||n==="pointerout",P&&r!==cl&&(Z=r.relatedTarget||r.fromElement)&&(Bi(Z)||Z[Hi]))break e;if((L||P)&&(P=H.window===H?H:(P=H.ownerDocument)?P.defaultView||P.parentWindow:window,L?(Z=r.relatedTarget||r.toElement,L=U,Z=Z?Bi(Z):null,Z!==null&&(Oe=l(Z),ie=Z.tag,Z!==Oe||ie!==5&&ie!==27&&ie!==6)&&(Z=null)):(L=null,Z=U),L!==Z)){if(ie=Qd,B="onMouseLeave",M="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ie=Zd,B="onPointerLeave",M="onPointerEnter",N="pointer"),Oe=L==null?P:Wo(L),k=Z==null?P:Wo(Z),P=new ie(B,N+"leave",L,r,H),P.target=Oe,P.relatedTarget=k,B=null,Bi(H)===U&&(ie=new ie(M,N+"enter",Z,r,H),ie.target=k,ie.relatedTarget=Oe,B=ie),Oe=B,L&&Z)t:{for(ie=V_,M=L,N=Z,k=0,B=M;B;B=ie(B))k++;B=0;for(var ne=N;ne;ne=ie(ne))B++;for(;0<k-B;)M=ie(M),k--;for(;0<B-k;)N=ie(N),B--;for(;k--;){if(M===N||N!==null&&M===N.alternate){ie=M;break t}M=ie(M),N=ie(N)}ie=null}else ie=null;L!==null&&$p(V,P,L,ie,!1),Z!==null&&Oe!==null&&$p(V,Oe,Z,ie,!0)}}e:{if(P=U?Wo(U):window,L=P.nodeName&&P.nodeName.toLowerCase(),L==="select"||L==="input"&&P.type==="file")var Ae=af;else if(sf(P))if(lf)Ae=j0;else{Ae=W0;var ee=Q0}else L=P.nodeName,!L||L.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?U&&ul(U.elementType)&&(Ae=af):Ae=Z0;if(Ae&&(Ae=Ae(n,U))){rf(V,Ae,r,H);break e}ee&&ee(n,P,U),n==="focusout"&&U&&P.type==="number"&&U.memoizedProps.value!=null&&ll(P,"number",P.value)}switch(ee=U?Wo(U):window,n){case"focusin":(sf(ee)||ee.contentEditable==="true")&&(Qi=ee,wl=U,rs=null);break;case"focusout":rs=wl=Qi=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,gf(V,r,H);break;case"selectionchange":if(t_)break;case"keydown":case"keyup":gf(V,r,H)}var he;if(_l)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Xi?nf(n,r)&&(_e="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(_e="onCompositionStart");_e&&(jd&&r.locale!=="ko"&&(Xi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Xi&&(he=Yd()):(Gn=H,pl="value"in Gn?Gn.value:Gn.textContent,Xi=!0)),ee=ia(U,_e),0<ee.length&&(_e=new Wd(_e,n,null,r,H),V.push({event:_e,listeners:ee}),he?_e.data=he:(he=of(r),he!==null&&(_e.data=he)))),(he=F0?J0(n,r):K0(n,r))&&(_e=ia(U,"onBeforeInput"),0<_e.length&&(ee=new Wd("onBeforeInput","beforeinput",null,r,H),V.push({event:ee,listeners:_e}),ee.data=he)),q_(V,n,U,r,H)}Vp(V,o)})}function Ms(n,o,r){return{instance:n,listener:o,currentTarget:r}}function ia(n,o){for(var r=o+"Capture",u=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Zo(n,r),m!=null&&u.unshift(Ms(n,m,y)),m=Zo(n,o),m!=null&&u.push(Ms(n,m,y))),n.tag===3)return u;n=n.return}return[]}function V_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $p(n,o,r,u,m){for(var y=o._reactName,T=[];r!==null&&r!==u;){var E=r,C=E.alternate,U=E.stateNode;if(E=E.tag,C!==null&&C===u)break;E!==5&&E!==26&&E!==27||U===null||(C=U,m?(U=Zo(r,y),U!=null&&T.unshift(Ms(r,U,C))):m||(U=Zo(r,y),U!=null&&T.push(Ms(r,U,C)))),r=r.return}T.length!==0&&n.push({event:o,listeners:T})}var z_=/\r\n?/g,$_=/\u0000|\uFFFD/g;function Fp(n){return(typeof n=="string"?n:""+n).replace(z_,`
`).replace($_,"")}function Jp(n,o){return o=Fp(o),Fp(n)===o}function Ue(n,o,r,u,m,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Ji(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Ji(n,""+u);break;case"className":ar(n,"class",u);break;case"tabIndex":ar(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(n,r,u);break;case"style":Fd(n,u,y);break;case"data":if(o!=="object"){ar(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=ur(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&Ue(n,o,"name",m.name,m,null),Ue(n,o,"formEncType",m.formEncType,m,null),Ue(n,o,"formMethod",m.formMethod,m,null),Ue(n,o,"formTarget",m.formTarget,m,null)):(Ue(n,o,"encType",m.encType,m,null),Ue(n,o,"method",m.method,m,null),Ue(n,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=ur(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=mn);break;case"onScroll":u!=null&&ye("scroll",n);break;case"onScrollEnd":u!=null&&ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=ur(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":ye("beforetoggle",n),ye("toggle",n),rr(n,"popover",u);break;case"xlinkActuate":pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":pn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":pn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":pn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":pn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":rr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=v0.get(r)||r,rr(n,r,u))}}function Xu(n,o,r,u,m,y){switch(r){case"style":Fd(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?Ji(n,u):(typeof u=="number"||typeof u=="bigint")&&Ji(n,""+u);break;case"onScroll":u!=null&&ye("scroll",n);break;case"onScrollEnd":u!=null&&ye("scrollend",n);break;case"onClick":u!=null&&(n.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),o=r.slice(2,m?r.length-7:void 0),y=n[Tt]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(o,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,m);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):rr(n,r,u)}}}function ft(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",n),ye("load",n);var u=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ue(n,o,y,T,r,null)}}m&&Ue(n,o,"srcSet",r.srcSet,r,null),u&&Ue(n,o,"src",r.src,r,null);return;case"input":ye("invalid",n);var E=y=T=m=null,C=null,U=null;for(u in r)if(r.hasOwnProperty(u)){var H=r[u];if(H!=null)switch(u){case"name":m=H;break;case"type":T=H;break;case"checked":C=H;break;case"defaultChecked":U=H;break;case"value":y=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,o));break;default:Ue(n,o,u,H,r,null)}}Bd(n,y,E,C,U,T,m,!1);return;case"select":ye("invalid",n),u=T=y=null;for(m in r)if(r.hasOwnProperty(m)&&(E=r[m],E!=null))switch(m){case"value":y=E;break;case"defaultValue":T=E;break;case"multiple":u=E;default:Ue(n,o,m,E,r,null)}o=y,r=T,n.multiple=!!u,o!=null?Fi(n,!!u,o,!1):r!=null&&Fi(n,!!u,r,!0);return;case"textarea":ye("invalid",n),y=m=u=null;for(T in r)if(r.hasOwnProperty(T)&&(E=r[T],E!=null))switch(T){case"value":u=E;break;case"defaultValue":m=E;break;case"children":y=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Ue(n,o,T,E,r,null)}zd(n,u,m,y);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(u=r[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ue(n,o,C,u,r,null)}return;case"dialog":ye("beforetoggle",n),ye("toggle",n),ye("cancel",n),ye("close",n);break;case"iframe":case"object":ye("load",n);break;case"video":case"audio":for(u=0;u<Is.length;u++)ye(Is[u],n);break;case"image":ye("error",n),ye("load",n);break;case"details":ye("toggle",n);break;case"embed":case"source":case"link":ye("error",n),ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(u=r[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ue(n,o,U,u,r,null)}return;default:if(ul(o)){for(H in r)r.hasOwnProperty(H)&&(u=r[H],u!==void 0&&Xu(n,o,H,u,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(u=r[E],u!=null&&Ue(n,o,E,u,r,null))}function F_(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,E=null,C=null,U=null,H=null;for(L in r){var V=r[L];if(r.hasOwnProperty(L)&&V!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":C=V;default:u.hasOwnProperty(L)||Ue(n,o,L,null,u,V)}}for(var P in u){var L=u[P];if(V=r[P],u.hasOwnProperty(P)&&(L!=null||V!=null))switch(P){case"type":y=L;break;case"name":m=L;break;case"checked":U=L;break;case"defaultChecked":H=L;break;case"value":T=L;break;case"defaultValue":E=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,o));break;default:L!==V&&Ue(n,o,P,L,u,V)}}al(n,T,E,C,U,H,y,m);return;case"select":L=T=E=P=null;for(y in r)if(C=r[y],r.hasOwnProperty(y)&&C!=null)switch(y){case"value":break;case"multiple":L=C;default:u.hasOwnProperty(y)||Ue(n,o,y,null,u,C)}for(m in u)if(y=u[m],C=r[m],u.hasOwnProperty(m)&&(y!=null||C!=null))switch(m){case"value":P=y;break;case"defaultValue":E=y;break;case"multiple":T=y;default:y!==C&&Ue(n,o,m,y,u,C)}o=E,r=T,u=L,P!=null?Fi(n,!!r,P,!1):!!u!=!!r&&(o!=null?Fi(n,!!r,o,!0):Fi(n,!!r,r?[]:"",!1));return;case"textarea":L=P=null;for(E in r)if(m=r[E],r.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ue(n,o,E,null,u,m)}for(T in u)if(m=u[T],y=r[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":P=m;break;case"defaultValue":L=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&Ue(n,o,T,m,u,y)}Vd(n,P,L);return;case"option":for(var Z in r)if(P=r[Z],r.hasOwnProperty(Z)&&P!=null&&!u.hasOwnProperty(Z))switch(Z){case"selected":n.selected=!1;break;default:Ue(n,o,Z,null,u,P)}for(C in u)if(P=u[C],L=r[C],u.hasOwnProperty(C)&&P!==L&&(P!=null||L!=null))switch(C){case"selected":n.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Ue(n,o,C,P,u,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in r)P=r[ie],r.hasOwnProperty(ie)&&P!=null&&!u.hasOwnProperty(ie)&&Ue(n,o,ie,null,u,P);for(U in u)if(P=u[U],L=r[U],u.hasOwnProperty(U)&&P!==L&&(P!=null||L!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,o));break;default:Ue(n,o,U,P,u,L)}return;default:if(ul(o)){for(var Oe in r)P=r[Oe],r.hasOwnProperty(Oe)&&P!==void 0&&!u.hasOwnProperty(Oe)&&Xu(n,o,Oe,void 0,u,P);for(H in u)P=u[H],L=r[H],!u.hasOwnProperty(H)||P===L||P===void 0&&L===void 0||Xu(n,o,H,P,u,L);return}}for(var M in r)P=r[M],r.hasOwnProperty(M)&&P!=null&&!u.hasOwnProperty(M)&&Ue(n,o,M,null,u,P);for(V in u)P=u[V],L=r[V],!u.hasOwnProperty(V)||P===L||P==null&&L==null||Ue(n,o,V,P,u,L)}function Kp(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],y=m.transferSize,T=m.initiatorType,E=m.duration;if(y&&E&&Kp(T)){for(T=0,E=m.responseEnd,u+=1;u<r.length;u++){var C=r[u],U=C.startTime;if(U>E)break;var H=C.transferSize,V=C.initiatorType;H&&Kp(V)&&(C=C.responseEnd,T+=H*(C<E?1:(E-U)/(C-U)))}if(--u,o+=8*(y+T)/(m.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qu=null,Wu=null;function oa(n){return n.nodeType===9?n:n.ownerDocument}function Yp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xp(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Zu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ju=null;function K_(){var n=window.event;return n&&n.type==="popstate"?n===ju?!1:(ju=n,!0):(ju=null,!1)}var Qp=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,X_=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(Q_)}:Qp;function Q_(n){setTimeout(function(){throw n})}function ni(n){return n==="head"}function Zp(n,o){var r=o,u=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(m),Ao(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Ds(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Ds(r);for(var y=r.firstChild;y;){var T=y.nextSibling,E=y.nodeName;y[Qo]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&Ds(n.ownerDocument.body);r=m}while(r);Ao(o)}function jp(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function ec(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ec(r),sl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function W_(n,o,r,u){for(;n.nodeType===1;){var m=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Qo])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Xt(n.nextSibling),n===null)break}return null}function Z_(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Xt(n.nextSibling),n===null))return null;return n}function em(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Xt(n.nextSibling),n===null))return null;return n}function tc(n){return n.data==="$?"||n.data==="$~"}function nc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function j_(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Xt(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var ic=null;function tm(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return Xt(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function nm(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function im(n,o,r){switch(o=oa(r),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ds(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);sl(n)}var Qt=new Map,om=new Set;function sa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Mn=K.d;K.d={f:eS,r:tS,D:nS,C:iS,L:oS,m:sS,X:aS,S:rS,M:lS};function eS(){var n=Mn.f(),o=Qr();return n||o}function tS(n){var o=Vi(n);o!==null&&o.tag===5&&o.type==="form"?Th(o):Mn.r(n)}var To=typeof document>"u"?null:document;function sm(n,o,r){var u=To;if(u&&typeof o=="string"&&o){var m=Vt(o);m='link[rel="'+n+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),om.has(m)||(om.add(m),n={rel:n,crossOrigin:r,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),ft(o,"link",n),st(o),u.head.appendChild(o)))}}function nS(n){Mn.D(n),sm("dns-prefetch",n,null)}function iS(n,o){Mn.C(n,o),sm("preconnect",n,o)}function oS(n,o,r){Mn.L(n,o,r);var u=To;if(u&&n&&o){var m='link[rel="preload"][as="'+Vt(o)+'"]';o==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Vt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Vt(r.imageSizes)+'"]')):m+='[href="'+Vt(n)+'"]';var y=m;switch(o){case"style":y=Eo(n);break;case"script":y=wo(n)}Qt.has(y)||(n=_({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),Qt.set(y,n),u.querySelector(m)!==null||o==="style"&&u.querySelector(ks(y))||o==="script"&&u.querySelector(Us(y))||(o=u.createElement("link"),ft(o,"link",n),st(o),u.head.appendChild(o)))}}function sS(n,o){Mn.m(n,o);var r=To;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Vt(u)+'"][href="'+Vt(n)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=wo(n)}if(!Qt.has(y)&&(n=_({rel:"modulepreload",href:n},o),Qt.set(y,n),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Us(y)))return}u=r.createElement("link"),ft(u,"link",n),st(u),r.head.appendChild(u)}}}function rS(n,o,r){Mn.S(n,o,r);var u=To;if(u&&n){var m=zi(u).hoistableStyles,y=Eo(n);o=o||"default";var T=m.get(y);if(!T){var E={loading:0,preload:null};if(T=u.querySelector(ks(y)))E.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":o},r),(r=Qt.get(y))&&oc(n,r);var C=T=u.createElement("link");st(C),ft(C,"link",n),C._p=new Promise(function(U,H){C.onload=U,C.onerror=H}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ra(T,o,u)}T={type:"stylesheet",instance:T,count:1,state:E},m.set(y,T)}}}function aS(n,o){Mn.X(n,o);var r=To;if(r&&n){var u=zi(r).hoistableScripts,m=wo(n),y=u.get(m);y||(y=r.querySelector(Us(m)),y||(n=_({src:n,async:!0},o),(o=Qt.get(m))&&sc(n,o),y=r.createElement("script"),st(y),ft(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function lS(n,o){Mn.M(n,o);var r=To;if(r&&n){var u=zi(r).hoistableScripts,m=wo(n),y=u.get(m);y||(y=r.querySelector(Us(m)),y||(n=_({src:n,async:!0,type:"module"},o),(o=Qt.get(m))&&sc(n,o),y=r.createElement("script"),st(y),ft(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function rm(n,o,r,u){var m=(m=me.current)?sa(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=Eo(r.href),r=zi(m).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Eo(r.href);var y=zi(m).hoistableStyles,T=y.get(n);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,T),(y=m.querySelector(ks(n)))&&!y._p&&(T.instance=y,T.state.loading=5),Qt.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Qt.set(n,r),y||uS(m,n,r,T.state))),o&&u===null)throw Error(s(528,""));return T}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=wo(r),r=zi(m).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Eo(n){return'href="'+Vt(n)+'"'}function ks(n){return'link[rel="stylesheet"]['+n+"]"}function am(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function uS(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ft(o,"link",r),st(o),n.head.appendChild(o))}function wo(n){return'[src="'+Vt(n)+'"]'}function Us(n){return"script[async]"+n}function lm(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Vt(r.href)+'"]');if(u)return o.instance=u,st(u),u;var m=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),st(u),ft(u,"style",m),ra(u,r.precedence,n),o.instance=u;case"stylesheet":m=Eo(r.href);var y=n.querySelector(ks(m));if(y)return o.state.loading|=4,o.instance=y,st(y),y;u=am(r),(m=Qt.get(m))&&oc(u,m),y=(n.ownerDocument||n).createElement("link"),st(y);var T=y;return T._p=new Promise(function(E,C){T.onload=E,T.onerror=C}),ft(y,"link",u),o.state.loading|=4,ra(y,r.precedence,n),o.instance=y;case"script":return y=wo(r.src),(m=n.querySelector(Us(y)))?(o.instance=m,st(m),m):(u=r,(m=Qt.get(y))&&(u=_({},r),sc(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),st(m),ft(m,"link",u),n.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,ra(u,r.precedence,n));return o.instance}function ra(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var E=u[T];if(E.dataset.precedence===o)y=E;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function oc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function sc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var aa=null;function um(n,o,r){if(aa===null){var u=new Map,m=aa=new Map;m.set(r,u)}else m=aa,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),m=0;m<r.length;m++){var y=r[m];if(!(y[Qo]||y[lt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(o)||"";T=n+T;var E=u.get(T);E?E.push(y):u.set(T,[y])}}return u}function cm(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function cS(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function dm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function dS(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Eo(u.href),y=o.querySelector(ks(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=la.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=y,st(y);return}y=o.ownerDocument||o,u=am(u),(m=Qt.get(m))&&oc(u,m),y=y.createElement("link"),st(y);var T=y;T._p=new Promise(function(E,C){T.onload=E,T.onerror=C}),ft(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=la.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var rc=0;function fS(n,o){return n.stylesheets&&n.count===0&&ca(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&ca(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&rc===0&&(rc=62500*J_());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ca(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>rc?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function la(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ca(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ua=null;function ca(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ua=new Map,o.forEach(hS,n),ua=null,la.call(n))}function hS(n,o){if(!(o.state.loading&4)){var r=ua.get(n);if(r)var u=r.get(null);else{r=new Map,ua.set(n,r);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),u=T)}u&&r.set(null,u)}m=o.instance,T=m.getAttribute("data-precedence"),y=r.get(T)||u,y===u&&r.set(null,m),r.set(T,m),this.count++,u=la.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),o.state.loading|=4}}var Os={$$typeof:O,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function pS(n,o,r,u,m,y,T,E,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.hiddenUpdates=tl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function fm(n,o,r,u,m,y,T,E,C,U,H,V){return n=new pS(n,o,r,T,C,U,H,V,E),o=1,y===!0&&(o|=24),y=Dt(3,null,null,o),n.current=y,y.stateNode=n,o=Gl(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},zl(y),n}function hm(n){return n?(n=ji,n):ji}function pm(n,o,r,u,m,y){m=hm(m),u.context===null?u.context=m:u.pendingContext=m,u=Fn(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Jn(n,u,o),r!==null&&(Rt(r,n,o),hs(r,n,o))}function mm(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function ac(n,o){mm(n,o),(n=n.alternate)&&mm(n,o)}function gm(n){if(n.tag===13||n.tag===31){var o=vi(n,67108864);o!==null&&Rt(o,n,67108864),ac(n,67108864)}}function ym(n){if(n.tag===13||n.tag===31){var o=Lt();o=nl(o);var r=vi(n,o);r!==null&&Rt(r,n,o),ac(n,o)}}var da=!0;function mS(n,o,r,u){var m=q.T;q.T=null;var y=K.p;try{K.p=2,lc(n,o,r,u)}finally{K.p=y,q.T=m}}function gS(n,o,r,u){var m=q.T;q.T=null;var y=K.p;try{K.p=8,lc(n,o,r,u)}finally{K.p=y,q.T=m}}function lc(n,o,r,u){if(da){var m=uc(u);if(m===null)Yu(n,o,u,fa,r),_m(n,u);else if(vS(m,n,o,r,u))u.stopPropagation();else if(_m(n,u),o&4&&-1<yS.indexOf(n)){for(;m!==null;){var y=Vi(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=hi(y.pendingLanes);if(T!==0){var E=y;for(E.pendingLanes|=2,E.entangledLanes|=2;T;){var C=1<<31-It(T);E.entanglements[1]|=C,T&=~C}hn(y),(xe&6)===0&&(Yr=xt()+500,Ns(0))}}break;case 31:case 13:E=vi(y,2),E!==null&&Rt(E,y,2),Qr(),ac(y,2)}if(y=uc(u),y===null&&Yu(n,o,u,fa,r),y===m)break;m=y}m!==null&&u.stopPropagation()}else Yu(n,o,u,null,r)}}function uc(n){return n=dl(n),cc(n)}var fa=null;function cc(n){if(fa=null,n=Bi(n),n!==null){var o=l(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=h(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return fa=n,null}function vm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(n0()){case bd:return 2;case Cd:return 8;case tr:case i0:return 32;case Rd:return 268435456;default:return 32}default:return 32}}var dc=!1,ii=null,oi=null,si=null,Ps=new Map,Ls=new Map,ri=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _m(n,o){switch(n){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Ps.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(o.pointerId)}}function qs(n,o,r,u,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Vi(o),o!==null&&gm(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),n)}function vS(n,o,r,u,m){switch(o){case"focusin":return ii=qs(ii,n,o,r,u,m),!0;case"dragenter":return oi=qs(oi,n,o,r,u,m),!0;case"mouseover":return si=qs(si,n,o,r,u,m),!0;case"pointerover":var y=m.pointerId;return Ps.set(y,qs(Ps.get(y)||null,n,o,r,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Ls.set(y,qs(Ls.get(y)||null,n,o,r,u,m)),!0}return!1}function Sm(n){var o=Bi(n.target);if(o!==null){var r=l(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,kd(n.priority,function(){ym(r)});return}}else if(o===31){if(o=h(r),o!==null){n.blockedOn=o,kd(n.priority,function(){ym(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ha(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=uc(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);cl=u,r.target.dispatchEvent(u),cl=null}else return o=Vi(r),o!==null&&gm(o),n.blockedOn=r,!1;o.shift()}return!0}function Tm(n,o,r){ha(n)&&r.delete(o)}function _S(){dc=!1,ii!==null&&ha(ii)&&(ii=null),oi!==null&&ha(oi)&&(oi=null),si!==null&&ha(si)&&(si=null),Ps.forEach(Tm),Ls.forEach(Tm)}function pa(n,o){n.blockedOn===o&&(n.blockedOn=null,dc||(dc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_S)))}var ma=null;function Em(n){ma!==n&&(ma=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ma===n&&(ma=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],m=n[o+2];if(typeof u!="function"){if(cc(u||r)===null)continue;break}var y=Vi(r);y!==null&&(n.splice(o,3),o-=3,uu(y,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function Ao(n){function o(C){return pa(C,n)}ii!==null&&pa(ii,n),oi!==null&&pa(oi,n),si!==null&&pa(si,n),Ps.forEach(o),Ls.forEach(o);for(var r=0;r<ri.length;r++){var u=ri[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ri.length&&(r=ri[0],r.blockedOn===null);)Sm(r),r.blockedOn===null&&ri.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],y=r[u+1],T=m[Tt]||null;if(typeof y=="function")T||Em(r);else if(T){var E=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Tt]||null)E=T.formAction;else if(cc(m)!==null)continue}else E=T.action;typeof E=="function"?r[u+1]=E:(r.splice(u,3),u-=3),Em(r)}}}function wm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function fc(n){this._internalRoot=n}ga.prototype.render=fc.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=Lt();pm(r,u,n,o,null,null)},ga.prototype.unmount=fc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;pm(n.current,2,null,n,null,null),Qr(),o[Hi]=null}};function ga(n){this._internalRoot=n}ga.prototype.unstable_scheduleHydration=function(n){if(n){var o=Dd();n={blockedOn:null,target:n,priority:o};for(var r=0;r<ri.length&&o!==0&&o<ri[r].priority;r++);ri.splice(r,0,n),r===0&&Sm(n)}};var Am=e.version;if(Am!=="19.2.3")throw Error(s(527,Am,"19.2.3"));K.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var SS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Ko=ya.inject(SS),Nt=ya}catch{}}return Hs.createRoot=function(n,o){if(!a(n))throw Error(s(299));var r=!1,u="",m=Mh,y=Dh,T=kh;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=fm(n,1,!1,null,null,r,u,null,m,y,T,wm),n[Hi]=o.current,Ku(n),new fc(o)},Hs.hydrateRoot=function(n,o,r){if(!a(n))throw Error(s(299));var u=!1,m="",y=Mh,T=Dh,E=kh,C=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),o=fm(n,1,!0,o,r??null,u,m,C,y,T,E,wm),o.context=hm(null),r=o.current,u=Lt(),u=nl(u),m=Fn(u),m.callback=null,Jn(r,m,u),r=u,o.current.lanes=r,Xo(o,r),hn(o),n[Hi]=o.current,Ku(n),new ga(o)},Hs.version="19.2.3",Hs}var Um;function MS(){if(Um)return mc.exports;Um=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mc.exports=IS(),mc.exports}var DS=MS();const kS=Gy(DS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OS=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,s)=>s?s.toUpperCase():i.toLowerCase()),Om=t=>{const e=OS(t);return e.charAt(0).toUpperCase()+e.slice(1)},Hy=(...t)=>t.filter((e,i,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===i).join(" ").trim(),PS=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=Ve.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c,...h},g)=>Ve.createElement("svg",{ref:g,...LS,width:e,height:e,stroke:t,strokeWidth:s?Number(i)*24/Number(e):i,className:Hy("lucide",a),...!l&&!PS(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>Ve.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const i=Ve.forwardRef(({className:s,...a},l)=>Ve.createElement(qS,{ref:l,iconNode:e,className:Hy(`lucide-${US(Om(t))}`,`lucide-${t}`,s),...a}));return i.displayName=Om(t),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bo=ot("arrow-right",GS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m8 13 4-7 4 7",key:"4rari8"}],["path",{d:"M9.1 11h5.7",key:"1gkovt"}]],id=ot("book-a",HS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],VS=ot("chevron-left",BS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$S=ot("chevron-right",zS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],JS=ot("circle-alert",FS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YS=ot("eye",KS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],QS=ot("globe",XS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ZS=ot("house",WS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],od=ot("languages",jS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],By=ot("layers",eT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],sd=ot("list-todo",tT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rd=ot("message-square",nT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],oT=ot("pen-tool",iT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ad=ot("scroll-text",sT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ic=ot("search",rT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lT=ot("shield-check",aT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cT=ot("sparkles",uT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],fT=ot("volume-2",dT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pT=ot("x",hT),Pm={en:{appTitle:"HSK 3.0 Syllabus Explorer",heroTitle:"HSK 3.0 Standard Syllabus",heroDesc:"Explore the official vocabulary, characters, and grammar outline for the modern Chinese Proficiency Test.",searchPlaceholder:"Search for a word, character or grammar point...",levelIndex:"Level Index",totalWords:"Total Words",totalChars:"Characters",totalGrammar:"Grammar Points",vocab:"Vocabulary",chars:"Characters",grammar:"Grammar",official:"Official",ai:"AI",loadAi:"Load AI Supplement",standard:"Standard",advanced:"Advanced",level:"Level",selectLevel:"Select Level",basedOn:"Based on the HSK 3.0 Standards",aiAvailable:"AI-Powered Examples Available",searchResults:"Search Results",foundMatches:'Found {count} matches for "{query}"',tryAgain:"Try Again",loadingError:"Unable to load content",word:"Word",pinyin:"Pinyin",pos:"Part of Speech",defAndExample:"Definition & Example",source:"Source",reading:"Reading Recognition",writing:"Writing Requirements",noChars:"No characters found for this selection.",phrase:"Phrase",sentenceComponent:"Sentence Component",syllabusExplorer:"SYLLABUS EXPLORER",tasks:"Tasks",topics:"Topics",allResults:"All Results"},vi:{appTitle:"Khm ph HSK 3.0",heroTitle:"i cng tiu chun HSK 3.0",heroDesc:"Khm ph  cng t vng, ch Hn v ng php chnh thc cho k thi nng lc Hn ng hin i.",searchPlaceholder:"Tm kim t vng, ch Hn hoc ng php...",levelIndex:"Danh sch cp ",totalWords:"Tng s t",totalChars:"Ch Hn",totalGrammar:"im ng php",vocab:"T vng",chars:"Ch Hn",grammar:"Ng php",official:"Chnh thc",ai:"AI",loadAi:"Ti b sung AI",standard:"Tiu chun",advanced:"Cao cp",level:"Cp ",selectLevel:"Chn cp ",basedOn:"Da trn tiu chun HSK 3.0",aiAvailable:"C sn v d AI",searchResults:"Kt qu tm kim",foundMatches:'Tm thy {count} kt qu cho "{query}"',tryAgain:"Th li",loadingError:"Khng th ti ni dung",word:"T vng",pinyin:"Phin m",pos:"T loi",defAndExample:"nh ngha & V d",source:"Ngun",reading:"Nhn bit (c)",writing:"Yu cu vit",noChars:"Khng tm thy ch Hn no.",phrase:"Cm t",sentenceComponent:"Thnh phn cu",syllabusExplorer:"KHM PH I CNG",tasks:"Nhim v",topics:"Ch ",allResults:"Tt c"},zh:{appTitle:"HSK 3.0 ",heroTitle:"HSK 3.0 ",heroDesc:"",searchPlaceholder:"...",levelIndex:"",totalWords:"",totalChars:"",totalGrammar:"",vocab:"",chars:"",grammar:"",official:"",ai:"AI",loadAi:" AI ",standard:"",advanced:"",level:"",selectLevel:"",basedOn:" HSK 3.0 ",aiAvailable:" AI ",searchResults:"",foundMatches:' {count}  "{query}" ',tryAgain:"",loadingError:"",word:"",pinyin:"",pos:"",defAndExample:"",source:"",reading:"",writing:"",noChars:"",phrase:"",sentenceComponent:"",syllabusExplorer:"",tasks:"",topics:"",allResults:""}},Vy=Ve.createContext(void 0),mT=({children:t})=>{const[e,i]=Ve.useState("vi"),s=(a,l)=>{let c=Pm[e][a]||Pm.en[a]||a;return l&&Object.entries(l).forEach(([h,g])=>{c=c.replace(`{${h}}`,String(g))}),c};return b.jsx(Vy.Provider,{value:{language:e,setLanguage:i,t:s},children:t})},Vo=()=>{const t=Ve.useContext(Vy);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},gT=["1","2","3","4","5","6","7-9"],yT=({currentLevel:t,onSelectLevel:e})=>{const{t:i}=Vo();return b.jsxs("div",{className:"w-full md:w-64 bg-white md:h-screen border-r border-gray-200 flex flex-col shrink-0",children:[b.jsxs("div",{className:"p-6 flex items-center space-x-2 border-b border-gray-100",children:[b.jsx("div",{className:"bg-hsk-red text-white p-2 rounded-lg",children:b.jsx(By,{size:24})}),b.jsxs("div",{children:[b.jsx("h1",{className:"text-xl font-bold text-ink",children:"HSK 3.0"}),b.jsx("p",{className:"text-xs text-gray-500 font-medium tracking-wider",children:i("syllabusExplorer")})]})]}),b.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[b.jsx("h2",{className:"text-xs font-semibold text-gray-400 uppercase tracking-widest mb-4 px-2",children:i("selectLevel")}),b.jsx("div",{className:"flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible pb-2 md:pb-0",children:gT.map(s=>b.jsxs("button",{onClick:()=>e(s),className:`
                flex items-center px-4 py-3 rounded-xl transition-all duration-200 text-sm font-medium whitespace-nowrap
                ${t===s?"bg-hsk-red text-white shadow-md shadow-red-200 translate-x-1":"text-gray-600 hover:bg-gray-50 hover:text-hsk-red"}
              `,children:[b.jsx("span",{className:`
                w-8 h-8 rounded-full flex items-center justify-center mr-3 text-xs font-bold
                ${t===s?"bg-white text-hsk-red":"bg-gray-100 text-gray-500"}
              `,children:s==="7-9"?"Adv":s}),"HSK ",i("level")," ",s]},s))})]}),b.jsx("div",{className:"p-6 border-t border-gray-100 hidden md:block",children:b.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[i("basedOn")," ",b.jsx("br",{}),"(Modern Chinese Proficiency Test)"]})})]})},vT=({currentCategory:t,onSelectCategory:e})=>{const{t:i}=Vo(),s=[{id:"vocabulary",label:i("vocab"),icon:b.jsx(id,{size:18})},{id:"characters",label:i("chars"),icon:b.jsx(od,{size:18})},{id:"grammar",label:i("grammar"),icon:b.jsx(ad,{size:18})},{id:"tasks",label:i("tasks"),icon:b.jsx(sd,{size:18})},{id:"topics",label:i("topics"),icon:b.jsx(rd,{size:18})}];return b.jsx("div",{className:"flex space-x-1 bg-gray-100/50 p-1 rounded-2xl w-full max-w-2xl mx-auto mb-8",children:s.map(a=>b.jsxs("button",{onClick:()=>e(a.id),className:`
            flex-1 flex items-center justify-center py-2.5 text-sm font-medium rounded-xl transition-all duration-200
            ${t===a.id?"bg-white text-ink shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 hover:bg-gray-200/50"}
          `,children:[b.jsx("span",{className:"mr-2 opacity-70",children:a.icon}),a.label]},a.id))})},Wt=({currentPage:t,totalPages:e,onPageChange:i})=>{const[s,a]=Ve.useState(t.toString());Ve.useEffect(()=>{a(t.toString())},[t]);const l=()=>{t>1&&i(t-1)},c=()=>{t<e&&i(t+1)},h=p=>{a(p.target.value)},g=p=>{if(p.key==="Enter"){const v=parseInt(s);!isNaN(v)&&v>=1&&v<=e?i(v):a(t.toString())}};return e<=1?null:b.jsxs("div",{className:"flex justify-center items-center gap-4 py-8",children:[b.jsx("button",{onClick:l,disabled:t===1,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed text-gray-600 transition-colors","aria-label":"Previous Page",children:b.jsx(VS,{size:20})}),b.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 font-medium font-mono",children:[b.jsx("span",{children:"Page"}),b.jsx("input",{type:"text",value:s,onChange:h,onKeyDown:g,onBlur:()=>a(t.toString()),className:"w-12 h-8 text-center border border-gray-200 rounded-md focus:ring-2 focus:ring-hsk-red/20 focus:border-hsk-red outline-none transition-all"}),b.jsx("span",{className:"text-gray-400",children:"/"}),b.jsx("span",{children:e})]}),b.jsx("button",{onClick:c,disabled:t===e,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed text-gray-600 transition-colors","aria-label":"Next Page",children:b.jsx($S,{size:20})})]})},Mi=({source:t})=>{const{t:e}=Vo();return t==="official"?b.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 uppercase tracking-wide border border-green-200",children:[b.jsx(lT,{size:10,className:"mr-1"}),e("official")]}):b.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 uppercase tracking-wide border border-amber-200",children:[b.jsx(cT,{size:10,className:"mr-1"}),e("ai")]})},_T=({data:t,category:e,isLoading:i,onRefresh:s})=>{const{t:a}=Vo();if(i)return b.jsx("div",{className:"grid gap-4 w-full animate-pulse max-w-5xl mx-auto mt-8",children:[1,2,3,4,5].map(p=>b.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm h-16 w-full bg-gray-100"},p))});if(!t)return null;const[l,c]=Ve.useState(1),h=50;Ve.useEffect(()=>{c(1)},[e,t,s]);const g=()=>{const p=Math.ceil(t.items.length/h),v=t.items.slice((l-1)*h,l*h);switch(e){case"vocabulary":return b.jsxs("div",{className:"space-y-4",children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),b.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left border-collapse",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-gray-500 text-xs uppercase tracking-wider",children:[b.jsx("th",{className:"px-6 py-4 font-semibold w-16",children:"No."}),b.jsx("th",{className:"px-6 py-4 font-semibold",children:a("word")}),b.jsx("th",{className:"px-6 py-4 font-semibold",children:a("pinyin")}),b.jsx("th",{className:"px-6 py-4 font-semibold",children:a("pos")}),b.jsx("th",{className:"px-6 py-4 font-semibold",children:a("defAndExample")}),b.jsx("th",{className:"px-6 py-4 font-semibold w-24",children:a("source")})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:v.map((A,R)=>b.jsxs("tr",{className:"hover:bg-red-50/30 transition-colors group",children:[b.jsx("td",{className:"px-6 py-4 text-gray-400 font-mono text-sm",children:A.ordinal||(l-1)*h+R+1}),b.jsx("td",{className:"px-6 py-4 text-xl font-serif text-ink font-medium",children:A.hanzi}),b.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono",children:A.pinyin}),b.jsx("td",{className:"px-6 py-4",children:b.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium",children:A.partOfSpeech})}),b.jsxs("td",{className:"px-6 py-4",children:[b.jsx("p",{className:"text-gray-800 font-medium mb-1",children:A.definition}),A.exampleSentence&&b.jsxs("p",{className:"text-gray-500 text-xs italic",children:['"',A.exampleSentence,'"']})]}),b.jsx("td",{className:"px-6 py-4",children:b.jsx(Mi,{source:A.source})})]},R))})]})})}),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]});case"characters":const _=v.filter(A=>A.type==="reading"||!A.type),S=v.filter(A=>A.type==="writing"),w=(A,R,x)=>b.jsxs("div",{className:"mb-8 last:mb-0",children:[b.jsxs("h3",{className:"text-lg font-bold text-ink mb-4 flex items-center",children:[b.jsx("span",{className:"bg-gray-100 p-1.5 rounded-lg mr-2 text-gray-600",children:x}),R]}),b.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:A.map((D,G)=>b.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm flex flex-col items-center text-center hover:border-hsk-red/30 transition-colors relative",children:[b.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-hsk-red/5 flex items-center justify-center mb-1",children:b.jsx("span",{className:"text-xl md:text-2xl font-serif text-hsk-red",children:D.char})}),D.pinyin&&b.jsx("p",{className:"font-mono text-xs text-gray-500",children:D.pinyin}),D.meaning&&b.jsx("p",{className:"text-xs font-medium text-ink truncate w-full mt-1",title:D.meaning,children:D.meaning})]},G))})]});return b.jsxs("div",{children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),_.length>0&&w(_,a("reading"),b.jsx(YS,{size:16})),S.length>0&&w(S,a("writing"),b.jsx(oT,{size:16})),_.length===0&&S.length===0&&b.jsx("div",{className:"text-center py-12 text-gray-400",children:a("noChars")}),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]});case"grammar":return b.jsxs("div",{className:"space-y-6",children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),v.map((A,R)=>b.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[b.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-hsk-red/20 group-hover:bg-hsk-red transition-colors"}),b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded",children:A.category}),A.subCategory&&b.jsxs("span",{className:"text-xs font-bold text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[" ",A.subCategory]})]}),b.jsx("h3",{className:"text-lg font-bold text-ink",children:A.name})]}),b.jsx(Mi,{source:A.source})]}),b.jsx("div",{className:"mb-4",children:b.jsx("code",{className:"text-sm bg-blue-50 text-blue-800 px-3 py-1.5 rounded-lg font-mono inline-block border border-blue-100",children:A.pattern})}),b.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed text-sm",children:A.explanation}),b.jsxs("div",{className:"flex items-start bg-gray-50 p-3 rounded-lg border border-gray-100",children:[b.jsx(fT,{size:16,className:"text-hsk-red mt-0.5 mr-3 shrink-0"}),b.jsx("p",{className:"text-ink font-medium text-sm",children:A.example})]})]},R)),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]});case"tasks":return b.jsxs("div",{className:"space-y-6",children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),t.items.map((A,R)=>b.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsx("h3",{className:"text-xl font-bold text-ink",children:A.category}),b.jsx(Mi,{source:A.source})]}),A.description&&b.jsx("p",{className:"text-gray-600 mb-4",children:A.description}),b.jsxs("div",{className:"bg-blue-50/50 rounded-xl p-4 border border-blue-50",children:[b.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-3 uppercase tracking-wide",children:"Can-do Statements"}),b.jsx("ul",{className:"space-y-2",children:A.canDo&&A.canDo.length>0?A.canDo.map((x,D)=>b.jsxs("li",{className:"flex gap-2 text-ink text-sm",children:[b.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),b.jsx("span",{children:x})]},D)):b.jsx("li",{className:"text-gray-400 text-sm italic",children:"No details available."})})]})]},R)),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]});case"topics":return b.jsxs("div",{className:"space-y-4",children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),b.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left border-collapse",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-gray-500 text-xs uppercase tracking-wider",children:[b.jsx("th",{className:"px-6 py-4 font-semibold w-1/4",children:"Primary Topic"}),b.jsx("th",{className:"px-6 py-4 font-semibold w-1/4",children:"Secondary Topic"}),b.jsx("th",{className:"px-6 py-4 font-semibold",children:"Items"}),b.jsx("th",{className:"px-6 py-4 font-semibold w-24",children:"Source"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:v.map((A,R)=>b.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[b.jsx("td",{className:"px-6 py-4 text-ink font-bold align-top",children:A.primary}),b.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium align-top",children:A.secondary}),b.jsx("td",{className:"px-6 py-4 align-top",children:b.jsx("div",{className:"flex flex-wrap gap-2",children:A.items.map((x,D)=>b.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm",children:x},D))})}),b.jsx("td",{className:"px-6 py-4 align-top",children:b.jsx(Mi,{source:A.source})})]},R))})]})}),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]})]});case"search":return b.jsxs("div",{className:"space-y-4",children:[p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c}),v.map((A,R)=>{if("hanzi"in A)return b.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-baseline gap-3 mb-1",children:[b.jsx("h3",{className:"text-xl font-bold font-serif text-ink",children:A.hanzi}),b.jsx("span",{className:"text-sm font-mono text-gray-500",children:A.pinyin}),b.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:A.partOfSpeech})]}),b.jsx("p",{className:"text-gray-800 text-sm mb-1",children:A.definition}),A.exampleSentence&&b.jsxs("p",{className:"text-gray-500 text-xs italic",children:['"',A.exampleSentence,'"']})]}),b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded",children:a("vocab")}),A.level&&b.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.5 rounded border border-red-100",children:["HSK ",A.level]}),b.jsx(Mi,{source:A.source})]})]},R);if("char"in A){const x=A.level==="1-2"||A.type==="writing",D=a(x?"writing":"reading");return b.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-center",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:"w-12 h-12 rounded-lg bg-hsk-red/5 flex items-center justify-center text-2xl font-serif text-hsk-red",children:A.char}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[b.jsx("span",{className:"font-mono text-sm font-semibold",children:A.pinyin}),b.jsxs("span",{className:"text-xs text-gray-400 border border-gray-100 px-1 rounded",children:[A.strokes," strokes"]})]}),b.jsx("p",{className:"text-sm text-gray-600",children:A.meaning})]})]}),b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded text-center",children:D}),A.level&&b.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.5 rounded border border-red-100",children:["HSK ",A.level==="1-2"?"1-2":A.level]}),b.jsx(Mi,{source:A.source})]})]},R)}else if("pattern"in A)return b.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx("h3",{className:"text-md font-bold text-ink",children:A.name}),b.jsx("code",{className:"text-xs bg-blue-50 text-blue-800 px-2 py-0.5 rounded font-mono",children:A.pattern})]}),b.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.explanation}),b.jsx("p",{className:"text-xs text-gray-500 italic bg-gray-50 p-2 rounded inline-block",children:A.example})]}),b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded",children:a("grammar")}),A.level&&b.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.5 rounded border border-red-100",children:["HSK ",A.level]}),b.jsx(Mi,{source:A.source})]})]},R);return null}),p>1&&b.jsx(Wt,{currentPage:l,totalPages:p,onPageChange:c})]})}};return b.jsxs("div",{className:"max-w-6xl mx-auto pb-12",children:[b.jsxs("div",{className:"mb-6 bg-paper border border-gray-200 p-4 rounded-xl flex items-center justify-between",children:[b.jsx("p",{className:"text-sm text-gray-600",children:t.description}),b.jsxs("div",{className:"text-xs text-gray-400 font-mono",children:[t.items.length," Items"]})]}),g()]})},ST=({onNavigate:t,onSearch:e})=>{const{t:i}=Vo(),[s,a]=Ve.useState(""),l=()=>{s.trim()&&e(s)},c=h=>{h.key==="Enter"&&l()};return b.jsxs("div",{className:"flex-1 overflow-y-auto bg-paper",children:[b.jsxs("div",{className:"py-24 px-6 relative overflow-hidden bg-cover bg-center",style:{backgroundImage:"url('https://img.freepik.com/free-vector/chinese-ink-painting-bamboo-background_23-2148886361.jpg?w=1380')",backgroundColor:"#f9f7f2"},children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-white/40 to-paper/90 pointer-events-none"}),b.jsxs("div",{className:"max-w-4xl mx-auto relative z-10 text-center",children:[b.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-bold mb-6 tracking-tight text-ink drop-shadow-sm",children:i("heroTitle")}),b.jsx("p",{className:"text-lg md:text-xl text-gray-700 font-medium mb-10 max-w-2xl mx-auto leading-relaxed",children:i("heroDesc")}),b.jsxs("div",{className:"w-full max-w-lg mx-auto relative group",children:[b.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-hsk-red pointer-events-none",children:b.jsx(Ic,{size:20})}),b.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),onKeyDown:c,placeholder:i("searchPlaceholder"),className:"w-full bg-white/90 backdrop-blur-sm text-ink pl-14 pr-14 py-4 rounded-full shadow-xl hover:shadow-2xl transition-all border border-gray-200/50 outline-none focus:ring-2 focus:ring-hsk-red/20 text-base"}),b.jsx("button",{onClick:l,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-hsk-red text-white p-2 rounded-full hover:bg-red-700 transition-colors shadow-sm",children:b.jsx(bo,{size:20})})]})]})]}),b.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[b.jsxs("h2",{className:"text-2xl font-bold text-ink mb-8 flex items-center",children:[b.jsx(By,{className:"mr-2 text-hsk-red"}),i("levelIndex")]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["1","2","3","4","5","6","7-9"].map(h=>b.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("span",{className:"text-2xl font-bold text-ink",children:[i("level")," ",h]}),b.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${h==="7-9"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:i(h==="7-9"?"advanced":"standard")})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("button",{onClick:()=>t(h,"vocabulary"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx(id,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("vocab")]}),b.jsx(bo,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),b.jsxs("button",{onClick:()=>t(h,"characters"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx(od,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("chars")]}),b.jsx(bo,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),b.jsxs("button",{onClick:()=>t(h,"grammar"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx(ad,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("grammar")]}),b.jsx(bo,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),b.jsx("div",{className:"border-t border-gray-50 my-1"}),b.jsxs("button",{onClick:()=>t(h,"tasks"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx(sd,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("tasks")]}),b.jsx(bo,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),b.jsxs("button",{onClick:()=>t(h,"topics"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx(rd,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("topics")]}),b.jsx(bo,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]})]})]},h))}),b.jsxs("div",{className:"mt-16 grid grid-cols-3 gap-4 text-center border-t border-gray-200 pt-12",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"11,092"}),b.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalWords")})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"3,000"}),b.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalChars")})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"572"}),b.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalGrammar")})]})]})]})]})};var TT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ET,wT;function AT(){return{geminiUrl:ET,vertexUrl:wT}}function bT(t,e,i,s){var a,l;if(!(t!=null&&t.baseUrl)){const c=AT();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Un{}function Q(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(l+1),i[p])}else for(const p of g)f(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(s+1),i)):i}else return i}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function CT(t,e){for(const[i,s]of Object.entries(e)){const a=i.split("."),l=s.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Mc(t,a,l,0,c)}}function Mc(t,e,i,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Mc(g,e,i,s+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const _=[];for(const S of i.slice(s))S==="*"?_.push(p):_.push(S);f(c,_,v)}for(const p of h)delete c[p]}}else{const c=t;l in c&&Mc(c[l],e,i,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ld(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RT(t){const e={},i=d(t,["operationName"]);i!=null&&f(e,["operationName"],i);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function xT(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],IT(c)),e}function NT(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],MT(c)),e}function IT(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>DT(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function MT(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>kT(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function DT(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],GT(i)),e}function kT(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],HT(i)),e}function UT(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function OT(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function PT(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],LT(c)),e}function LT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function zy(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],qT(c)),e}function qT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function GT(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],ld(s));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function HT(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],ld(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Lm||(Lm={}));var qm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(qm||(qm={}));var Gm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Gm||(Gm={}));var Te;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Te||(Te={}));var Hm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Hm||(Hm={}));var Bm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Bm||(Bm={}));var Vm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vm||(Vm={}));var zm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(zm||(zm={}));var $m;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})($m||($m={}));var Fm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Fm||(Fm={}));var Jm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Jm||(Jm={}));var Km;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Km||(Km={}));var Ym;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ym||(Ym={}));var Xm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Xm||(Xm={}));var Qm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Qm||(Qm={}));var Wm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Wm||(Wm={}));var Zm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Zm||(Zm={}));var jm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jm||(jm={}));var eg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eg||(eg={}));var tg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(tg||(tg={}));var ng;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ng||(ng={}));var Ia;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ia||(Ia={}));var ig;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ig||(ig={}));var og;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(og||(og={}));var sg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sg||(sg={}));var Dc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dc||(Dc={}));var rg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rg||(rg={}));var ag;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ag||(ag={}));var lg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(lg||(lg={}));var ug;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ug||(ug={}));var cg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(cg||(cg={}));var dg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(dg||(dg={}));var fg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(fg||(fg={}));var hg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hg||(hg={}));var pg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pg||(pg={}));var mg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mg||(mg={}));var gg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(gg||(gg={}));var yg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(yg||(yg={}));var vg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(vg||(vg={}));var _g;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_g||(_g={}));var Sg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Sg||(Sg={}));var Tg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Tg||(Tg={}));var Eg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Eg||(Eg={}));var wg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wg||(wg={}));var Ag;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Ag||(Ag={}));var bg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bg||(bg={}));var Cg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Cg||(Cg={}));var Rg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Rg||(Rg={}));var xg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(xg||(xg={}));var Ng;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ng||(Ng={}));var Ig;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ig||(Ig={}));var Mg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Mg||(Mg={}));var Dg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dg||(Dg={}));var kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kg||(kg={}));var Ug;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ug||(Ug={}));var Po;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Po||(Po={}));class kc{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bs{get text(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[w,A]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(A!==null||A!==void 0)&&_.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(_))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,s,a,l,c,h,g,p;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,s,a,l,c,h,g,p;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Og{}class Pg{}class BT{}class VT{}class zT{}class $T{}class Lg{}class qg{}class Gg{}class FT{}class Ma{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Ma;let a;const l=e;return i?a=NT(l):a=xT(l),Object.assign(s,a),s}}class Hg{}class Bg{}class Vg{}class zg{}class JT{}class KT{}class YT{}class ud{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new ud,l=PT(e);return Object.assign(s,l),s}}class XT{}class QT{}class WT{}class $g{}class ZT{get text(){var e,i,s;let a="",l=!1;const c=[];for(const h of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,s;let a="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class jT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class cd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new cd,l=zy(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ce(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $y(t,e){const i=Ce(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Fy(t){return Array.isArray(t)?t.map(e=>Da(e)):[Da(t)]}function Da(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Jy(t){const e=Da(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ky(t){const e=Da(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Yy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Fg(e)):[Fg(t)]}function Uc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Jg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Kg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function gt(t){if(t==null)throw new Error("ContentUnion is required");return Uc(t)?t:{role:"user",parts:Yy(t)}}function dd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=gt(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=gt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>gt(i)):[gt(e)]}function Zt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Jg(t)||Kg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gt(t)]}const e=[],i=[],s=Uc(t[0]);for(const a of t){const l=Uc(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Jg(a)||Kg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return s||e.push({role:"user",parts:Yy(i)}),e}function eE(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Te).includes(i[0].toUpperCase())?i[0].toUpperCase():Te.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Te).includes(s.toUpperCase())?s.toUpperCase():Te.TYPE_UNSPECIFIED})}}function Go(t){const e={},i=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&eE(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Te).includes(h.toUpperCase())?h.toUpperCase():Te.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=Go(h);else if(s.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(Go(p))}e[c]=g}else if(a.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=Go(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function fd(t){return Go(t)}function hd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function pd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Go(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Go(e.response));return t}function $o(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function tE(t,e,i,s=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function On(t,e){if(typeof e!="string")throw new Error("name must be a string");return tE(t,e,"cachedContents")}function Xy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function di(t){return ld(t)}function nE(t){return t!=null&&typeof t=="object"&&"name"in t}function iE(t){return t!=null&&typeof t=="object"&&"video"in t}function oE(t){return t!=null&&typeof t=="object"&&"uri"in t}function Qy(t){var e;let i;if(nE(t)&&(i=t.name),!(oE(t)&&(i=t.uri,i===void 0))&&!(iE(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Wy(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Zy(t){for(const e of["models","tunedModels","publisherModels"])if(sE(t,e))return t[e];return[]}function sE(t,e){return t!==null&&typeof t=="object"&&e in t}function rE(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function aE(t,e={}){const i=[],s=new Set;for(const a of t){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=rE(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function jy(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function lE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ev(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fo(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function tv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uE(t){const e={},i=d(t,["responsesFile"]);i!=null&&f(e,["fileName"],i);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zE(c))),f(e,["inlinedResponses"],l)}const a=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function cE(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&f(e,["format"],i);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const a=d(t,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function dE(t){const e={},i=d(t,["format"]);i!=null&&f(e,["predictionsFormat"],i);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ra(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["metadata","state"]);a!=null&&f(e,["state"],tv(a));const l=d(t,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],uE(ev(p))),e}function Oc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["state"]);a!=null&&f(e,["state"],tv(a));const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],fE(_));const S=d(t,["outputConfig"]);S!=null&&f(e,["dest"],cE(ev(S)));const w=d(t,["completionStats"]);return w!=null&&f(e,["completionStats"],w),e}function fE(t){const e={},i=d(t,["instancesFormat"]);i!=null&&f(e,["format"],i);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const a=d(t,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function hE(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(i,["fileName"],s);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>VE(t,c))),f(i,["requests","requests"],l)}return i}function pE(t){const e={},i=d(t,["format"]);i!=null&&f(e,["instancesFormat"],i);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mE(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function gE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function yE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function vE(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],_E(s));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function _E(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function nv(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>QE(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function SE(t,e){const i={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function TE(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],dE(lE(a))),i}function Yg(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],hE(t,jy(t,a)));const l=d(e,["config"]);return l!=null&&SE(l,i),i}function EE(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],Ce(t,s));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],pE(jy(t,a)));const l=d(e,["config"]);return l!=null&&TE(l,i),i}function wE(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),i}function AE(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],ME(t,a));const l=d(e,["config"]);return l!=null&&wE(l,i),i}function bE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function CE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function RE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function xE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function NE(t,e){const i={},s=d(e,["contents"]);if(s!=null){let l=dd(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],IE(a,i)),CT(i,{"requests[].*":"requests[].request.*"})),i}function IE(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function ME(t,e){const i={},s=d(e,["fileName"]);s!=null&&f(i,["file_name"],s);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],NE(t,a)),i}function DE(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function kE(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UE(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OE(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],nv(gt(a)));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const A=d(e,["frequencyPenalty"]);A!=null&&f(s,["frequencyPenalty"],A);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const D=d(e,["responseSchema"]);D!=null&&f(s,["responseSchema"],fd(D));const G=d(e,["responseJsonSchema"]);if(G!=null&&f(s,["responseJsonSchema"],G),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=d(e,["safetySettings"]);if(i!==void 0&&O!=null){let we=O;Array.isArray(we)&&(we=we.map(oe=>WE(oe))),f(i,["safetySettings"],we)}const $=d(e,["tools"]);if(i!==void 0&&$!=null){let we=$o($);Array.isArray(we)&&(we=we.map(oe=>jE(zo(oe)))),f(i,["tools"],we)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],ZE(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=d(e,["cachedContent"]);i!==void 0&&J!=null&&f(i,["cachedContent"],On(t,J));const F=d(e,["responseModalities"]);F!=null&&f(s,["responseModalities"],F);const ae=d(e,["mediaResolution"]);ae!=null&&f(s,["mediaResolution"],ae);const W=d(e,["speechConfig"]);if(W!=null&&f(s,["speechConfig"],hd(W)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=d(e,["thinkingConfig"]);pe!=null&&f(s,["thinkingConfig"],pe);const Ee=d(e,["imageConfig"]);Ee!=null&&f(s,["imageConfig"],BE(Ee));const Ge=d(e,["enableEnhancedCivicAnswers"]);return Ge!=null&&f(s,["enableEnhancedCivicAnswers"],Ge),s}function PE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>vE(p))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function LE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function qE(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Fo(t,s)),i}function GE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function HE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function BE(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function VE(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["request","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let h=Zt(a);Array.isArray(h)&&(h=h.map(g=>nv(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],OE(t,c,d(i,["request"],{}))),i}function zE(t){const e={},i=d(t,["response"]);i!=null&&f(e,["response"],PE(i));const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function $E(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function FE(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function JE(t){const e={},i=d(t,["config"]);return i!=null&&$E(i,e),e}function KE(t){const e={},i=d(t,["config"]);return i!=null&&FE(i,e),e}function YE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ra(c))),f(e,["batchJobs"],l)}return e}function XE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Oc(c))),f(e,["batchJobs"],l)}return e}function QE(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],DE(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],kE(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],mE(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function WE(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function ZE(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],UE(s)),e}function jE(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],GE(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],HE(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(kn||(kn={}));class Gi{constructor(e,i,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,a)}init(e,i,s){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ew extends Un{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Gi(kn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Yg(this.apiClient,e),s=i._url,a=Q("{model}:batchGenerateContent",s),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=S,_.request=w}p.push(_)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=EE(this.apiClient,e);return h=Q("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Oc(v))}else{const p=Yg(this.apiClient,e);return h=Q("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ra(v))}}async createEmbeddingsInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AE(this.apiClient,e);return l=Q("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>Ra(g))}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qE(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Oc(v))}else{const p=LE(this.apiClient,e);return h=Q("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ra(v))}}async cancel(e){var i,s,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=yE(this.apiClient,e);c=Q("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=gE(this.apiClient,e);c=Q("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=KE(e);return h=Q("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=XE(v),S=new $g;return Object.assign(S,_),S})}else{const p=JE(e);return h=Q("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=YE(v),S=new $g;return Object.assign(S,_),S})}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=CE(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>xE(v))}else{const p=bE(this.apiClient,e);return h=Q("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>RE(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tw(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Xg(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Aw(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function nw(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=Zt(c);Array.isArray(v)&&(v=v.map(_=>Xg(_))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Xg(gt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>Cw(_))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],bw(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function iw(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=Zt(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],gt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>Rw(S))),f(e,["tools"],_)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function ow(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],$y(t,s));const a=d(e,["config"]);return a!=null&&nw(a,i),i}function sw(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],$y(t,s));const a=d(e,["config"]);return a!=null&&iw(a,i),i}function rw(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],On(t,s)),i}function aw(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],On(t,s)),i}function lw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function uw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function cw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function dw(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fw(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hw(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pw(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],On(t,s)),i}function mw(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],On(t,s)),i}function gw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function yw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function vw(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function _w(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Sw(t){const e={},i=d(t,["config"]);return i!=null&&vw(i,e),e}function Tw(t){const e={},i=d(t,["config"]);return i!=null&&_w(i,e),e}function Ew(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function ww(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function Aw(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],cw(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],dw(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],tw(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function bw(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],fw(s)),e}function Cw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],gw(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],yw(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function Rw(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>hw(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function xw(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Nw(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Iw(t,e){const i={},s=d(e,["name"]);s!=null&&f(i,["_url","name"],On(t,s));const a=d(e,["config"]);return a!=null&&xw(a,i),i}function Mw(t,e){const i={},s=d(e,["name"]);s!=null&&f(i,["_url","name"],On(t,s));const a=d(e,["config"]);return a!=null&&Nw(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dw extends Un{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Gi(kn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=sw(this.apiClient,e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=ow(this.apiClient,e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=mw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=pw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=aw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=uw(v),S=new Vg;return Object.assign(S,_),S})}else{const p=rw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=lw(v),S=new Vg;return Object.assign(S,_),S})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Mw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Iw(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Tw(e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ww(v),S=new zg;return Object.assign(S,_),S})}else{const p=Sw(e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Ew(v),S=new zg;return Object.assign(S,_),S})}}}function ka(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function Qg(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t){return this instanceof ue?(this.v=t,this):new ue(t)}function an(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(w){return function(A){return Promise.resolve(A).then(w,_)}}function h(w,A){s[w]&&(a[w]=function(R){return new Promise(function(x,D){l.push([w,R,x,D])>1||g(w,R)})},A&&(a[w]=A(a[w])))}function g(w,A){try{p(s[w](A))}catch(R){S(l[0][3],R)}}function p(w){w.value instanceof ue?Promise.resolve(w.value.v).then(v,_):S(l[0][2],w)}function v(w){g("next",w)}function _(w){g("throw",w)}function S(w,A){w(A),l.shift(),l.length&&g(l[0][0],l[0][1])}}function ln(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Qg=="function"?Qg(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:iv(i)}function iv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Uw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wg(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let l=!0;for(;s<i&&t[s].role==="model";)a.push(t[s]),l&&!iv(t[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class Ow{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Pw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pw{constructor(e,i,s,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),Uw(l)}async sendMessage(e){var i;await this.sendPromise;const s=gt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const w=p?[p]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const s=gt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?Wg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return an(this,arguments,function*(){var a,l,c,h,g,p;const v=[];try{for(var _=!0,S=ln(e),w;w=yield ue(S.next()),a=w.done,!a;_=!0){h=w.value,_=!1;const A=h;if(kw(A)){const R=(p=(g=A.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;R!==void 0&&v.push(R)}yield yield ue(A)}}catch(A){l={error:A}}finally{try{!_&&!a&&(c=S.return)&&(yield ue(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Wg(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ga extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ga.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lw(t){const e={},i=d(t,["file"]);return i!=null&&f(e,["file"],i),e}function qw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Gw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],Qy(i)),e}function Hw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Bw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],Qy(i)),e}function Vw(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function zw(t){const e={},i=d(t,["config"]);return i!=null&&Vw(i,e),e}function $w(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fw extends Un{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Gi(kn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zw(e);return l=Q("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=$w(g),v=new XT;return Object.assign(v,p),v})}}async createInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Lw(e);return l=Q("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=qw(g),v=new QT;return Object.assign(v,p),v})}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Bw(e);return l=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Gw(e);return l=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Hw(g),v=new WT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xa(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Jw(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>lA(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function Kw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Yw(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xw(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Qw(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&f(e,["responseMimeType"],w);const A=d(t,["responseModalities"]);A!=null&&f(e,["responseModalities"],A);const R=d(t,["responseSchema"]);R!=null&&f(e,["responseSchema"],R);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const D=d(t,["seed"]);D!=null&&f(e,["seed"],D);const G=d(t,["speechConfig"]);G!=null&&f(e,["speechConfig"],G);const O=d(t,["stopSequences"]);O!=null&&f(e,["stopSequences"],O);const $=d(t,["temperature"]);$!=null&&f(e,["temperature"],$);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const J=d(t,["topK"]);J!=null&&f(e,["topK"],J);const F=d(t,["topP"]);if(F!=null&&f(e,["topP"],F),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ww(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Zw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function jw(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],pd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],Jw(gt(A)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let J=$o(R);Array.isArray(J)&&(J=J.map(F=>cA(zo(F)))),f(e,["setup","tools"],J)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],uA(x));const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const O=d(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&f(e,["setup","realtimeInputConfig"],O);const $=d(t,["contextWindowCompression"]);e!==void 0&&$!=null&&f(e,["setup","contextWindowCompression"],$);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function eA(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],Qw(s));const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],pd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],gt(A));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let F=$o(R);Array.isArray(F)&&(F=F.map(ae=>dA(zo(ae)))),f(e,["setup","tools"],F)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const O=d(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&f(e,["setup","realtimeInputConfig"],O);const $=d(t,["contextWindowCompression"]);e!==void 0&&$!=null&&f(e,["setup","contextWindowCompression"],$);const Y=d(t,["proactivity"]);e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y);const J=d(t,["explicitVadSignal"]);return e!==void 0&&J!=null&&f(e,["setup","explicitVadSignal"],J),i}function tA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ce(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],jw(a,i)),i}function nA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ce(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],eA(a,i)),i}function iA(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function oA(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["weightedPrompts"],s)}return e}function sA(t){const e={},i=d(t,["media"]);if(i!=null){let p=Fy(i);Array.isArray(p)&&(p=p.map(v=>xa(v))),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],xa(Ky(s)));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],xa(Jy(l)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function rA(t){const e={},i=d(t,["media"]);if(i!=null){let p=Fy(i);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],Ky(s));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],Jy(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function aA(t){const e={},i=d(t,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const a=d(t,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(t,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],fA(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],hA(v)),e}function lA(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],Kw(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Yw(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],xa(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function uA(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],Ww(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],Zw(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function dA(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>Xw(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function fA(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const a=d(t,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(A=>A)),f(e,["promptTokensDetails"],w)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(A=>A)),f(e,["cacheTokensDetails"],w)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(A=>A)),f(e,["responseTokensDetails"],w)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(A=>A)),f(e,["toolUsePromptTokensDetails"],w)}const S=d(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function hA(t){const e={},i=d(t,["type"]);return i!=null&&f(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pA(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function mA(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],gA(s));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function gA(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function yA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let l=Zt(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function vA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function _A(t){const e={},i=d(t,["values"]);i!=null&&f(e,["values"],i);const s=d(t,["statistics"]);return s!=null&&f(e,["statistics"],SA(s)),e}function SA(t){const e={},i=d(t,["truncated"]);i!=null&&f(e,["truncated"],i);const s=d(t,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function Ha(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Nb(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function TA(t){const e={},i=d(t,["controlType"]);i!=null&&f(e,["controlType"],i);const s=d(t,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function EA(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function wA(t,e){const i={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],gt(s));const a=d(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>av(h))),f(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],pb(l)),i}function AA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let c=Zt(a);Array.isArray(c)&&(c=c.map(h=>Ha(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&EA(l),i}function bA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let c=Zt(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&wA(l,i),i}function CA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const a=d(t,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function RA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function xA(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ce(t,s)),i}function NA(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ce(t,s)),i}function IA(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function MA(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function DA(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","mimeType"],A);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const G=d(t,["editMode"]);e!==void 0&&G!=null&&f(e,["parameters","editMode"],G);const O=d(t,["baseSteps"]);return e!==void 0&&O!=null&&f(e,["parameters","editConfig","baseSteps"],O),i}function kA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>Ob(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&DA(c,i),i}function UA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Ba(l))),f(e,["generatedImages"],a)}return e}function OA(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function PA(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function LA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let h=dd(t,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&OA(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],Ce(t,c)),i}function qA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let c=dd(t,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&PA(l,i),i}function GA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function HA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_A(c))),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function BA(t){const e={},i=d(t,["endpoint"]);i!=null&&f(e,["name"],i);const s=d(t,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function VA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function zA(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $A(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FA(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function JA(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],Ha(gt(a)));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const A=d(e,["frequencyPenalty"]);A!=null&&f(s,["frequencyPenalty"],A);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const D=d(e,["responseSchema"]);D!=null&&f(s,["responseSchema"],fd(D));const G=d(e,["responseJsonSchema"]);if(G!=null&&f(s,["responseJsonSchema"],G),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=d(e,["safetySettings"]);if(i!==void 0&&O!=null){let we=O;Array.isArray(we)&&(we=we.map(oe=>Pb(oe))),f(i,["safetySettings"],we)}const $=d(e,["tools"]);if(i!==void 0&&$!=null){let we=$o($);Array.isArray(we)&&(we=we.map(oe=>zb(zo(oe)))),f(i,["tools"],we)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],Vb(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=d(e,["cachedContent"]);i!==void 0&&J!=null&&f(i,["cachedContent"],On(t,J));const F=d(e,["responseModalities"]);F!=null&&f(s,["responseModalities"],F);const ae=d(e,["mediaResolution"]);ae!=null&&f(s,["mediaResolution"],ae);const W=d(e,["speechConfig"]);if(W!=null&&f(s,["speechConfig"],hd(W)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=d(e,["thinkingConfig"]);pe!=null&&f(s,["thinkingConfig"],pe);const Ee=d(e,["imageConfig"]);Ee!=null&&f(s,["imageConfig"],_b(Ee));const Ge=d(e,["enableEnhancedCivicAnswers"]);return Ge!=null&&f(s,["enableEnhancedCivicAnswers"],Ge),s}function KA(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],gt(a));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const A=d(e,["frequencyPenalty"]);A!=null&&f(s,["frequencyPenalty"],A);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const D=d(e,["responseSchema"]);D!=null&&f(s,["responseSchema"],fd(D));const G=d(e,["responseJsonSchema"]);G!=null&&f(s,["responseJsonSchema"],G);const O=d(e,["routingConfig"]);O!=null&&f(s,["routingConfig"],O);const $=d(e,["modelSelectionConfig"]);$!=null&&f(s,["modelConfig"],$);const Y=d(e,["safetySettings"]);if(i!==void 0&&Y!=null){let q=Y;Array.isArray(q)&&(q=q.map(K=>K)),f(i,["safetySettings"],q)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let q=$o(J);Array.isArray(q)&&(q=q.map(K=>av(zo(K)))),f(i,["tools"],q)}const F=d(e,["toolConfig"]);i!==void 0&&F!=null&&f(i,["toolConfig"],F);const ae=d(e,["labels"]);i!==void 0&&ae!=null&&f(i,["labels"],ae);const W=d(e,["cachedContent"]);i!==void 0&&W!=null&&f(i,["cachedContent"],On(t,W));const pe=d(e,["responseModalities"]);pe!=null&&f(s,["responseModalities"],pe);const Ee=d(e,["mediaResolution"]);Ee!=null&&f(s,["mediaResolution"],Ee);const Ge=d(e,["speechConfig"]);Ge!=null&&f(s,["speechConfig"],hd(Ge));const we=d(e,["audioTimestamp"]);we!=null&&f(s,["audioTimestamp"],we);const oe=d(e,["thinkingConfig"]);oe!=null&&f(s,["thinkingConfig"],oe);const Re=d(e,["imageConfig"]);if(Re!=null&&f(s,["imageConfig"],Sb(Re)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Zg(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let c=Zt(a);Array.isArray(c)&&(c=c.map(h=>Ha(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],JA(t,l,i)),i}function jg(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["contents"]);if(a!=null){let c=Zt(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],KA(t,l,i)),i}function ey(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>mA(p))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function ty(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const a=d(t,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function YA(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(t,["imageSize"]);if(e!==void 0&&w!=null&&f(e,["parameters","sampleImageSize"],w),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function XA(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","mimeType"],A);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const G=d(t,["imageSize"]);e!==void 0&&G!=null&&f(e,["parameters","sampleImageSize"],G);const O=d(t,["enhancePrompt"]);return e!==void 0&&O!=null&&f(e,["parameters","enhancePrompt"],O),i}function QA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&YA(l,i),i}function WA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&XA(l,i),i}function ZA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>cb(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],sv(a)),e}function jA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ba(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],rv(a)),e}function eb(t,e){const i={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(t,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Va(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>nC(w))),f(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function tb(t,e){const i={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(t,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&f(e,["parameters","enhancePrompt"],w);const A=d(t,["generateAudio"]);e!==void 0&&A!=null&&f(e,["parameters","generateAudio"],A);const R=d(t,["lastFrame"]);e!==void 0&&R!=null&&f(e,["instances[0]","lastFrame"],un(R));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let O=x;Array.isArray(O)&&(O=O.map($=>iC($))),f(e,["instances[0]","referenceImages"],O)}const D=d(t,["mask"]);e!==void 0&&D!=null&&f(e,["instances[0]","mask"],tC(D));const G=d(t,["compressionQuality"]);return e!==void 0&&G!=null&&f(e,["parameters","compressionQuality"],G),i}function nb(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],rb(c)),e}function ib(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],ab(c)),e}function ob(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],Va(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],lv(c));const h=d(e,["source"]);h!=null&&lb(h,i);const g=d(e,["config"]);return g!=null&&eb(g,i),i}function sb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],un(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],uv(c));const h=d(e,["source"]);h!=null&&ub(h,i);const g=d(e,["config"]);return g!=null&&tb(g,i),i}function rb(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>fb(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function ab(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>hb(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function lb(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Va(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],lv(l)),i}function ub(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],un(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],uv(l)),i}function cb(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],Tb(i));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=d(t,["_self"]);return a!=null&&f(e,["safetyAttributes"],sv(a)),e}function Ba(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],ov(i));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=d(t,["_self"]);a!=null&&f(e,["safetyAttributes"],rv(a));const l=d(t,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function db(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["mask"],ov(i));const s=d(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function fb(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],jb(i)),e}function hb(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],eC(i)),e}function pb(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&f(e,["responseMimeType"],w);const A=d(t,["responseModalities"]);A!=null&&f(e,["responseModalities"],A);const R=d(t,["responseSchema"]);R!=null&&f(e,["responseSchema"],R);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const D=d(t,["seed"]);D!=null&&f(e,["seed"],D);const G=d(t,["speechConfig"]);G!=null&&f(e,["speechConfig"],G);const O=d(t,["stopSequences"]);O!=null&&f(e,["stopSequences"],O);const $=d(t,["temperature"]);$!=null&&f(e,["temperature"],$);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const J=d(t,["topK"]);J!=null&&f(e,["topK"],J);const F=d(t,["topP"]);if(F!=null&&f(e,["topP"],F),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mb(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ce(t,s)),i}function gb(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ce(t,s)),i}function yb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function vb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function _b(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Sb(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);s!=null&&f(e,["imageSize"],s);const a=d(t,["personGeneration"]);a!=null&&f(e,["personGeneration"],a);const l=d(t,["outputMimeType"]);l!=null&&f(e,["imageOutputOptions","mimeType"],l);const c=d(t,["outputCompressionQuality"]);return c!=null&&f(e,["imageOutputOptions","compressionQuality"],c),e}function Tb(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],di(i));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function ov(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],di(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Va(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],di(i));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function un(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],di(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Eb(t,e,i){const s={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],Wy(t,h)),s}function wb(t,e,i){const s={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],Wy(t,h)),s}function Ab(t,e){const i={},s=d(e,["config"]);return s!=null&&Eb(t,s,i),i}function bb(t,e){const i={},s=d(e,["config"]);return s!=null&&wb(t,s,i),i}function Cb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["_self"]);if(a!=null){let l=Zy(a);Array.isArray(l)&&(l=l.map(c=>Pc(c))),f(e,["models"],l)}return e}function Rb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["_self"]);if(a!=null){let l=Zy(a);Array.isArray(l)&&(l=l.map(c=>Lc(c))),f(e,["models"],l)}return e}function xb(t){const e={},i=d(t,["maskMode"]);i!=null&&f(e,["maskMode"],i);const s=d(t,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const a=d(t,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Pc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["version"]);l!=null&&f(e,["version"],l);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],$b(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const S=d(t,["topP"]);S!=null&&f(e,["topP"],S);const w=d(t,["topK"]);w!=null&&f(e,["topK"],w);const A=d(t,["thinking"]);return A!=null&&f(e,["thinking"],A),e}function Lc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["versionId"]);l!=null&&f(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>BA(S))),f(e,["endpoints"],_)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],Fb(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),f(e,["checkpoints"],_)}return e}function Nb(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],VA(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],zA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],pA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Ib(t){const e={},i=d(t,["productImage"]);return i!=null&&f(e,["image"],un(i)),e}function Mb(t,e){const i={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const w=d(t,["labels"]);return e!==void 0&&w!=null&&f(e,["labels"],w),i}function Db(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["source"]);a!=null&&Ub(a,i);const l=d(e,["config"]);return l!=null&&Mb(l,i),i}function kb(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ba(a))),f(e,["generatedImages"],s)}return e}function Ub(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],un(a));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Ib(h))),f(e,["instances[0]","productImages"],c)}return i}function Ob(t){const e={},i=d(t,["referenceImage"]);i!=null&&f(e,["referenceImage"],un(i));const s=d(t,["referenceId"]);s!=null&&f(e,["referenceId"],s);const a=d(t,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(t,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],xb(l));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],TA(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function sv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function rv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function Pb(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function Lb(t){const e={},i=d(t,["image"]);return i!=null&&f(e,["image"],un(i)),e}function qb(t,e){const i={},s=d(t,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const a=d(t,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function Gb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["source"]);a!=null&&Bb(a,i);const l=d(e,["config"]);return l!=null&&qb(l,i),i}function Hb(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>db(a))),f(e,["generatedMasks"],s)}return e}function Bb(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],un(a));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],Lb(l)),i}function Vb(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],$A(s)),e}function zb(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],yb(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],vb(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function av(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>FA(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function $b(t){const e={},i=d(t,["baseModel"]);i!=null&&f(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function Fb(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function Jb(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function Kb(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function Yb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","name"],Ce(t,s));const a=d(e,["config"]);return a!=null&&Jb(a,i),i}function Xb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["config"]);return a!=null&&Kb(a,i),i}function Qb(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const w=d(t,["mode"]);return e!==void 0&&w!=null&&f(e,["parameters","mode"],w),i}function Wb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ce(t,s));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],un(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&Qb(c,i),i}function Zb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Ba(l))),f(e,["generatedImages"],a)}return e}function jb(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],di(s));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function eC(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],di(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function tC(t){const e={},i=d(t,["image"]);i!=null&&f(e,["_self"],un(i));const s=d(t,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function nC(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],Va(i));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function iC(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],un(i));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function lv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["videoBytes"]);s!=null&&f(e,["encodedVideo"],di(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function uv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],di(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oC(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),i}function sC(t){const e={},i=d(t,["config"]);return i!=null&&oC(i,e),e}function rC(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function aC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&rC(s,e),e}function lC(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function uC(t,e){const i={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function cC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],fC(c)),e}function dC(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const a=d(t,["config"]);return a!=null&&uC(a,e),e}function fC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function hC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function pC(t){const e={},i=d(t,["config"]);return i!=null&&hC(i,e),e}function mC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function cv(t,e){const i={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function gC(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=d(t,["config"]);return s!=null&&cv(s,e),e}function yC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vC="Content-Type",_C="X-Server-Timeout",SC="User-Agent",qc="x-goog-api-client",TC="1.37.0",EC=`google-genai-sdk/${TC}`,wC="v1beta1",AC="v1beta";class bC{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:wC,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:AC,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const a=[this.getRequestUrlInternal(i)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&CC(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await ny(a),new kc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await ny(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return an(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield ue(a.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const A=JSON.parse(_);if("error"in A){const R=JSON.parse(JSON.stringify(A.error)),x=R.status,D=R.code,G=`got status: ${x}. ${JSON.stringify(A)}`;if(D>=400&&D<600)throw new Ga({message:G,status:D})}}catch(A){if(A.name==="ApiError")throw A}c+=_;let S=-1,w=0;for(;;){S=-1,w=0;for(const x of g){const D=c.indexOf(x);D!==-1&&(S===-1||D<S)&&(S=D,w=x.length)}if(S===-1)break;const A=c.substring(0,S);c=c.substring(S+w);const R=A.trim();if(R.startsWith(h)){const x=R.substring(h.length).trim();try{const D=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ue(new kc(D))}catch(D){throw new Error(`exception parsing stream chunk ${x}. ${D}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=EC+" "+this.clientOptions.userAgentExtra;return e[SC]=i,e[qc]=i,e[vC]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(_C,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),v=Q("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,p,g,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&cv(s,_);const S=await this.fetchUploadUrl(p,h,g,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function ny(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw i>=400&&i<600?new Ga({message:a,status:i}):new Error(a)}}function CC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=s(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RC="mcp_used/unknown";let xC=!1;function dv(t){for(const e of t)if(NC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xC}function fv(t){var e;const i=(e=t[qc])!==null&&e!==void 0?e:"";t[qc]=(i+` ${RC}`).trimStart()}function NC(t){return t!==null&&typeof t=="object"&&t instanceof md}function IC(t){return an(this,arguments,function*(i,s=100){let a,l=0;for(;l<s;){const c=yield ue(i.listTools({cursor:a}));for(const h of c.tools)yield yield ue(h),l++;if(!c.nextCursor)break;a=c.nextCursor}})}class md{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new md(e,i)}async initialize(){var e,i,s,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,ln(IC(v))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const _=a;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),aE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function MC(t,e,i){const s=new jT;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(s,a),e(s)}class DC{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=OC(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(O=>{p=O}),_=e.callbacks,S=function(){p({})},w=this.apiClient,A={onopen:S,onmessage:O=>{MC(w,_.onmessage,O)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(O){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(O){}},R=this.webSocketFactory.create(g,UC(c),A);R.connect(),await v;const G={setup:{model:Ce(this.apiClient,e.model)}};return R.send(JSON.stringify(G)),new kC(R,this.apiClient)}}class kC{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=oA(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=iA(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Po.PLAY)}pause(){this.sendPlaybackControl(Po.PAUSE)}stop(){this.sendPlaybackControl(Po.STOP)}resetContext(){this.sendPlaybackControl(Po.RESET_CONTEXT)}close(){this.conn.close()}}function UC(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function OC(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LC(t,e,i){const s=new ZT;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const c=aA(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class qC{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new DC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&dv(e.config.tools)&&fv(_);const S=VC(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const W=this.apiClient.getApiKey();let pe="BidiGenerateContent",Ee="key";W!=null&&W.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),pe="BidiGenerateContentConstrained",Ee="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${pe}?${Ee}=${W}`}let w=()=>{};const A=new Promise(W=>{w=W}),R=e.callbacks,x=function(){var W;(W=R==null?void 0:R.onopen)===null||W===void 0||W.call(R),w({})},D=this.apiClient,G={onopen:x,onmessage:W=>{LC(D,R.onmessage,W)},onerror:(i=R==null?void 0:R.onerror)!==null&&i!==void 0?i:function(W){},onclose:(s=R==null?void 0:R.onclose)!==null&&s!==void 0?s:function(W){}},O=this.webSocketFactory.create(v,BC(S),G);O.connect(),await A;let $=Ce(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const W=this.apiClient.getProject(),pe=this.apiClient.getLocation();$=`projects/${W}/locations/${pe}/`+$}let Y={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ia.AUDIO]}:e.config.responseModalities=[Ia.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],F=[];for(const W of J)if(this.isCallableTool(W)){const pe=W;F.push(await pe.tool())}else F.push(W);F.length>0&&(e.config.tools=F);const ae={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=nA(this.apiClient,ae):Y=tA(this.apiClient,ae),delete Y.config,O.send(JSON.stringify(Y)),new HC(O,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GC={turnComplete:!0};class HC{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=Zt(i.turns),e.isVertexAI()||(s=s.map(a=>Ha(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(PC)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},GC),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:rA(e)}:i={realtimeInput:sA(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function BC(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function VC(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iy=10;function oy(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ho(c)){a=!0;break}if(!a)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ho(t){return"callTool"in t&&typeof t.callTool=="function"}function zC(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Ho(a)))!==null&&s!==void 0?s:!1}function sy(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(Ho(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function ry(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $C extends Un{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!zC(i)||oy(i.config))return await this.generateContentInternal(g);const p=sy(i);if(p.length>0){const R=p.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let v,_;const S=Zt(g.contents),w=(l=(a=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:iy;let A=0;for(;A<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const R=v.candidates[0].content,x=[];for(const D of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ho(D)){const O=await D.callTool(v.functionCalls);x.push(...O)}A++,_={role:"user",parts:x},g.contents=Zt(g.contents),g.contents.push(R),g.contents.push(_),ry(g.config)&&(S.push(R),S.push(_))}return ry(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var s,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),oy(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const g=sy(i);if(g.length>0){const _=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var a;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Gi(kn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var s,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Ho(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&dv(e.config.tools)){const g=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),fv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,s,a;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(Ho(c)){const h=c,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,s,a;const l=(a=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:iy;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,_){return an(this,arguments,function*(){for(var S,w,A,R,x,D;h<l;){c&&(h++,c=!1);const Y=yield ue(p.processParamsMaybeAddMcpUsage(_)),J=yield ue(p.generateContentStreamInternal(Y)),F=[],ae=[];try{for(var G=!0,O=(w=void 0,ln(J)),$;$=yield ue(O.next()),S=$.done,!S;G=!0){R=$.value,G=!1;const W=R;if(yield yield ue(W),W.candidates&&(!((x=W.candidates[0])===null||x===void 0)&&x.content)){ae.push(W.candidates[0].content);for(const pe of(D=W.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(h<l&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(pe.functionCall.name)){const Ee=yield ue(v.get(pe.functionCall.name).callTool([pe.functionCall]));F.push(...Ee)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(W){w={error:W}}finally{try{!G&&!S&&(A=O.return)&&(yield ue(A.call(O)))}finally{if(w)throw w.error}}if(F.length>0){c=!0;const W=new Bs;W.candidates=[{content:{role:"user",parts:F}}],yield yield ue(W);const pe=[];pe.push(...ae),pe.push({role:"user",parts:F});const Ee=Zt(_.contents).concat(pe);_.contents=Ee}else break}})})(this,g,e)}async generateContentInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jg(this.apiClient,e);return h=Q("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ty(v),S=new Bs;return Object.assign(S,_),S})}else{const p=Zg(this.apiClient,e);return h=Q("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ey(v),S=new Bs;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jg(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return an(this,arguments,function*(){var S,w,A,R;try{for(var x=!0,D=ln(_),G;G=yield ue(D.next()),S=G.done,!S;x=!0){R=G.value,x=!1;const O=R,$=ty(yield ue(O.json()));$.sdkHttpResponse={headers:O.headers};const Y=new Bs;Object.assign(Y,$),yield yield ue(Y)}}catch(O){w={error:O}}finally{try{!x&&!S&&(A=D.return)&&(yield ue(A.call(D)))}finally{if(w)throw w.error}}})})}else{const p=Zg(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return an(this,arguments,function*(){var S,w,A,R;try{for(var x=!0,D=ln(_),G;G=yield ue(D.next()),S=G.done,!S;x=!0){R=G.value,x=!1;const O=R,$=ey(yield ue(O.json()));$.sdkHttpResponse={headers:O.headers};const Y=new Bs;Object.assign(Y,$),yield yield ue(Y)}}catch(O){w={error:O}}finally{try{!x&&!S&&(A=D.return)&&(yield ue(A.call(D)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qA(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=HA(v),S=new Og;return Object.assign(S,_),S})}else{const p=LA(this.apiClient,e);return h=Q("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=GA(v),S=new Og;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=WA(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jA(v),S=new Pg;return Object.assign(S,_),S})}else{const p=QA(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ZA(v),S=new Pg;return Object.assign(S,_),S})}}async editImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=kA(this.apiClient,e);return l=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=UA(g),v=new BT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Wb(this.apiClient,e);return l=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Zb(g),v=new VT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Db(this.apiClient,e);return l=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=kb(g),v=new zT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Gb(this.apiClient,e);return l=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=Hb(g),v=new $T;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=gb(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lc(v))}else{const p=mb(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Pc(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=bb(this.apiClient,e);return h=Q("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Rb(v),S=new Lg;return Object.assign(S,_),S})}else{const p=Ab(this.apiClient,e);return h=Q("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Cb(v),S=new Lg;return Object.assign(S,_),S})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Xb(this.apiClient,e);return h=Q("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lc(v))}else{const p=Yb(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Pc(v))}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=NA(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=MA(v),S=new qg;return Object.assign(S,_),S})}else{const p=xA(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=IA(v),S=new qg;return Object.assign(S,_),S})}}async countTokens(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=bA(this.apiClient,e);return h=Q("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=RA(v),S=new Gg;return Object.assign(S,_),S})}else{const p=AA(this.apiClient,e);return h=Q("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=CA(v),S=new Gg;return Object.assign(S,_),S})}}async computeTokens(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=yA(this.apiClient,e);return l=Q("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=vA(g),v=new FT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=sb(this.apiClient,e);return h=Q("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=ib(v),S=new Ma;return Object.assign(S,_),S})}else{const p=ob(this.apiClient,e);return h=Q("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=nb(v),S=new Ma;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC extends Un{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=OT(e);return h=Q("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=UT(e);return h=Q("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=RT(e);return l=Q("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function KC(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>nR(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function YC(t,e,i){const s={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],tR(t,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),s}function XC(t,e){const i={},s=d(e,["config"]);return s!=null&&f(i,["config"],YC(t,s,i)),i}function QC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function WC(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function jC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function eR(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],pd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&f(e,["setup","systemInstruction"],KC(gt(A)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let J=$o(R);Array.isArray(J)&&(J=J.map(F=>oR(zo(F)))),f(e,["setup","tools"],J)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],iR(x));const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const O=d(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&f(e,["setup","realtimeInputConfig"],O);const $=d(t,["contextWindowCompression"]);e!==void 0&&$!=null&&f(e,["setup","contextWindowCompression"],$);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function tR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ce(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],eR(a,i)),i}function nR(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],QC(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],WC(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],JC(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function iR(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],ZC(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],jC(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sR(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function rR(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=sR(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class aR extends Un{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=XC(this.apiClient,e);l=Q("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=rR(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lR(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function uR(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&lR(s,e),e}function cR(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function dR(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function fR(t){const e={},i=d(t,["parent"]);i!=null&&f(e,["_url","parent"],i);const s=d(t,["config"]);return s!=null&&dR(s,e),e}function hR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pR extends Un{constructor(e){super(),this.apiClient=e,this.list=async i=>new Gi(kn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cR(e);return l=Q("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uR(e);a=Q("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fR(e);return l=Q("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=hR(g),v=new JT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mR extends Un{constructor(e,i=new pR(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new Gi(kn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sC(e);return l=Q("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lC(e);return l=Q("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aC(e);a=Q("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pC(e);return l=Q("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=mC(g),v=new KT;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gC(e);return l=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=yC(g),v=new YT;return Object.assign(v,p),v})}}async importFile(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dC(e);return l=Q("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=cC(g),v=new ud;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const gR=()=>hv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Hc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jt extends Error{}class St extends jt{constructor(e,i,s,a){super(`${St.makeMessage(e,i,s)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,s){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,s,a){if(!e||!a)return new za({message:s,cause:Hc(i)});const l=i;return e===400?new mv(e,l,s,a):e===401?new gv(e,l,s,a):e===403?new yv(e,l,s,a):e===404?new vv(e,l,s,a):e===409?new _v(e,l,s,a):e===422?new Sv(e,l,s,a):e===429?new Tv(e,l,s,a):e>=500?new Ev(e,l,s,a):new St(e,l,s,a)}}class Bc extends St{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class za extends St{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class pv extends za{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mv extends St{}class gv extends St{}class yv extends St{}class vv extends St{}class _v extends St{}class Sv extends St{}class Tv extends St{}class Ev extends St{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yR=/^[a-z][a-z0-9+.-]*:/i,vR=t=>yR.test(t);let Vc=t=>(Vc=Array.isArray,Vc(t));const _R=Vc;let SR=_R;const ay=SR;function TR(t){if(!t)return!0;for(const e in t)return!1;return!0}function ER(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const wR=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new jt(`${t} must be an integer`);if(e<0)throw new jt(`${t} must be a positive integer`);return e},AR=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bR=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Do="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RR=()=>{var t,e,i,s,a;const l=CR();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":uy(Deno.build.os),"X-Stainless-Arch":ly(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":uy((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":ly((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=xR();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const ly=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",uy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let va;const NR=()=>va??(va=RR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function wv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function MR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return wv({start(){},async pull(i){const{done:s,value:a}=await e.next();s?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function Av(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function DR(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kR=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bv=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _c(t,e,i){return bv(),new File(t,e??"unknown_file",i)}function UR(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const OR=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",PR=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Cv(t),LR=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function qR(t,e,i){if(bv(),t=await t,PR(t))return t instanceof File?t:_c([await t.arrayBuffer()],t.name);if(LR(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),_c(await zc(a),e,i)}const s=await zc(t);if(e||(e=UR(t)),!(i!=null&&i.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return _c(s,e,i)}async function zc(t){var e,i,s,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(Cv(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(OR(t))try{for(var h=!0,g=ln(t),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const v=a;c.push(...await zc(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${GR(t)}`)}return c}function GR(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rv{constructor(e){this._client=e}}Rv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const cy=Object.freeze(Object.create(null)),HR=(t=xv)=>(function(i,...s){if(i.length===1)return i[0];let a=!1;const l=[],c=i.reduce((v,_,S)=>{var w,A,R;/[?#]/.test(_)&&(a=!0);const x=s[S];let D=(a?encodeURIComponent:t)(""+x);return S!==s.length&&(x==null||typeof x=="object"&&x.toString===((R=Object.getPrototypeOf((A=Object.getPrototypeOf((w=x.hasOwnProperty)!==null&&w!==void 0?w:cy))!==null&&A!==void 0?A:cy))===null||R===void 0?void 0:R.toString))&&(D=x+"",l.push({start:v.length+_.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),v+_+(S===s.length?"":D)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,w)=>{const A=" ".repeat(w.start-v),R="^".repeat(w.length);return v=w.start+w.length,S+A+R},"");throw new jt(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),_a=HR(xv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nv extends Rv{create(e,i){var s;const{api_version:a=this._client.apiVersion}=e,l=ka(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new jt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new jt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_a`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(_a`/${a}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(_a`/${a}/interactions/${e}/cancel`,s)}get(e,i={},s){var a;const l=i??{},{api_version:c=this._client.apiVersion}=l,h=ka(l,["api_version"]);return this._client.get(_a`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}Nv._key=Object.freeze(["interactions"]);class Iv extends Nv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BR(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let s=0;for(const a of t)i.set(a,s),s+=a.length;return i}let Sa;function gd(t){let e;return(Sa??(e=new globalThis.TextEncoder,Sa=e.encode.bind(e)))(t)}let Ta;function dy(t){let e;return(Ta??(e=new globalThis.TextDecoder,Ta=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $a{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?gd(e):e;this.buffer=BR([this.buffer,i]);const s=[];let a;for(;(a=VR(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(dy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=dy(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}$a.NEWLINE_CHARS=new Set([`
`,"\r"]);$a.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VR(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function zR(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ua={off:0,error:200,warn:300,info:400,debug:500},fy=(t,e,i)=>{if(t){if(ER(Ua,t))return t;_t(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ua))}`)}};function zs(){}function Ea(t,e,i){return!e||Ua[t]>Ua[i]?zs:e[t].bind(e)}const $R={error:zs,warn:zs,info:zs,debug:zs};let hy=new WeakMap;function _t(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return $R;const a=hy.get(i);if(a&&a[0]===s)return a[1];const l={error:Ea("error",i,s),warn:Ea("warn",i,s),info:Ea("info",i,s),debug:Ea("debug",i,s)};return hy.set(i,[s,l]),l}const Ui=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lo{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let a=!1;const l=s?_t(s):console;function c(){return an(this,arguments,function*(){var g,p,v,_;if(a)throw new jt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var w=!0,A=ln(FR(e,i)),R;R=yield ue(A.next()),g=R.done,!g;w=!0){_=R.value,w=!1;const x=_;if(!S)if(x.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield ue(JSON.parse(x.data))}catch(D){throw l.error("Could not parse message into JSON:",x.data),l.error("From chunk:",x.raw),D}}}catch(x){p={error:x}}finally{try{!w&&!g&&(v=A.return)&&(yield ue(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(x){if(Gc(x))return yield ue(void 0);throw x}finally{S||i.abort()}})}return new Lo(c,i,s)}static fromReadableStream(e,i,s){let a=!1;function l(){return an(this,arguments,function*(){var g,p,v,_;const S=new $a,w=Av(e);try{for(var A=!0,R=ln(w),x;x=yield ue(R.next()),g=x.done,!g;A=!0){_=x.value,A=!1;const D=_;for(const G of S.decode(D))yield yield ue(G)}}catch(D){p={error:D}}finally{try{!A&&!g&&(v=R.return)&&(yield ue(v.call(R)))}finally{if(p)throw p.error}}for(const D of S.flush())yield yield ue(D)})}function c(){return an(this,arguments,function*(){var g,p,v,_;if(a)throw new jt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var w=!0,A=ln(l()),R;R=yield ue(A.next()),g=R.done,!g;w=!0){_=R.value,w=!1;const x=_;S||x&&(yield yield ue(JSON.parse(x)))}}catch(x){p={error:x}}finally{try{!w&&!g&&(v=A.return)&&(yield ue(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(x){if(Gc(x))return yield ue(void 0);throw x}finally{S||i.abort()}})}return new Lo(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),i.push(c)}return l.shift()}});return[new Lo(()=>a(e),this.controller,this.client),new Lo(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return wv({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await i.next();if(l)return s.close();const c=gd(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function FR(t,e){return an(this,arguments,function*(){var s,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jt("Attempted to iterate over a response with no body");const h=new KR,g=new $a,p=Av(t.body);try{for(var v=!0,_=ln(JR(p)),S;S=yield ue(_.next()),s=S.done,!s;v=!0){c=S.value,v=!1;const w=c;for(const A of g.decode(w)){const R=h.decode(A);R&&(yield yield ue(R))}}}catch(w){a={error:w}}finally{try{!v&&!s&&(l=_.return)&&(yield ue(l.call(_)))}finally{if(a)throw a.error}}for(const w of g.flush()){const A=h.decode(w);A&&(yield yield ue(A))}})}function JR(t){return an(this,arguments,function*(){var i,s,a,l;let c=new Uint8Array;try{for(var h=!0,g=ln(t),p;p=yield ue(g.next()),i=p.done,!i;h=!0){l=p.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?gd(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let w;for(;(w=zR(c))!==-1;)yield yield ue(c.slice(0,w)),c=c.slice(w)}}catch(v){s={error:v}}finally{try{!h&&!i&&(a=g.return)&&(yield ue(a.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield ue(c))})}class KR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,a]=YR(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function YR(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function XR(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return _t(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Lo.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await i.json():await i.text()})();return _t(t).debug(`[${s}] response parsed`,Ui({retryOfRequestLogID:a,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yd extends Promise{constructor(e,i,s=XR){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new yd(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mv=Symbol("brand.privateNullableHeaders");function*QR(t){if(!t)return;if(Mv in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():ay(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=ay(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const Vs=t=>{const e=new Headers,i=new Set;for(const s of t){const a=new Set;for(const[l,c]of QR(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),i.add(h)):(e.append(l,c),i.delete(h))}}return{[Mv]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sc=t=>{var e,i,s,a,l,c;if(typeof globalThis.process<"u")return(s=(i=(e=TT)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dv;class Fa{constructor(e){var i,s,a,l,c,h,g,{baseURL:p=Sc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Sc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,S=ka(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:_},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(s=w.timeout)!==null&&s!==void 0?s:Fa.DEFAULT_TIMEOUT,this.logger=(a=w.logger)!==null&&a!==void 0?a:console;const A="warn";this.logLevel=A,this.logLevel=(c=(l=fy(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:fy(Sc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:A,this.fetchOptions=w.fetchOptions,this.maxRetries=(h=w.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:IR(),this.encoder=kR,this._options=w,this.apiKey=v,this.apiVersion=_,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=Vs([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Vs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new jt(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Do}`}defaultIdempotencyKey(){return`stainless-node-retry-${gR()}`}makeStatusError(e,i,s,a){return St.generate(e,i,s,a)}buildURL(e,i,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=vR(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return TR(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new yd(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var a,l,c;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:p,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(p,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=s===void 0?"":`, retryOf: ${s}`,A=Date.now();if(_t(this).debug(`[${S}] sending request`,Ui({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:p.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Bc;const R=new AbortController,x=await this.fetchWithTimeout(v,p,_,R).catch(Hc),D=Date.now();if(x instanceof globalThis.Error){const O=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Bc;const $=Gc(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(i)return _t(this).info(`[${S}] connection ${$?"timed out":"failed"} - ${O}`),_t(this).debug(`[${S}] connection ${$?"timed out":"failed"} (${O})`,Ui({retryOfRequestLogID:s,url:v,durationMs:D-A,message:x.message})),this.retryRequest(h,i,s??S);throw _t(this).info(`[${S}] connection ${$?"timed out":"failed"} - error; no more retries left`),_t(this).debug(`[${S}] connection ${$?"timed out":"failed"} (error; no more retries left)`,Ui({retryOfRequestLogID:s,url:v,durationMs:D-A,message:x.message})),$?new pv:new za({cause:x})}const G=`[${S}${w}] ${p.method} ${v} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${D-A}ms`;if(!x.ok){const O=await this.shouldRetry(x);if(i&&O){const W=`retrying, ${i} attempts remaining`;return await DR(x.body),_t(this).info(`${G} - ${W}`),_t(this).debug(`[${S}] response error (${W})`,Ui({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:D-A})),this.retryRequest(h,i,s??S,x.headers)}const $=O?"error; no more retries left":"error; not retryable";_t(this).info(`${G} - ${$}`);const Y=await x.text().catch(W=>Hc(W).message),J=AR(Y),F=J?void 0:Y;throw _t(this).debug(`[${S}] response error (${$})`,Ui({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,message:F,durationMs:Date.now()-A})),this.makeStatusError(x.status,J,F,x.headers)}return _t(this).info(G),_t(this).debug(`[${S}] response start`,Ui({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:D-A})),{response:x,options:h,controller:R,requestLogID:S,retryOfRequestLogID:s,startTime:A}}async fetchWithTimeout(e,i,s,a){const l=i||{},{signal:c,method:h}=l,g=ka(l,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const p=setTimeout(()=>a.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,a){var l;let c;const h=a==null?void 0:a.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=a==null?void 0:a.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,p)}return await bR(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,a,l;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,_=this.buildURL(g,p,v);"timeout"in c&&wR("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:c}),A=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:A},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Vs([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),NR()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Vs([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:MR(e)}:this.encoder({body:e,headers:s})}}Fa.DEFAULT_TIMEOUT=6e4;class at extends Fa{constructor(){super(...arguments),this.interactions=new Iv(this)}}Dv=at;at.GeminiNextGenAPIClient=Dv;at.GeminiNextGenAPIClientError=jt;at.APIError=St;at.APIConnectionError=za;at.APIConnectionTimeoutError=pv;at.APIUserAbortError=Bc;at.NotFoundError=vv;at.ConflictError=_v;at.RateLimitError=Tv;at.BadRequestError=mv;at.AuthenticationError=gv;at.InternalServerError=Ev;at.PermissionDeniedError=yv;at.UnprocessableEntityError=Sv;at.toFile=qR;at.Interactions=Iv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WR(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function ZR(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function jR(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function ex(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function tx(t,e,i){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function nx(t,e,i){const s={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec"],py(w))}else if(a==="PREFERENCE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec"],py(w))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function ix(t,e){const i={},s=d(t,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&px(l);const c=d(t,["config"]);return c!=null&&tx(c,i),i}function ox(t,e){const i={},s=d(t,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&mx(l,i,e);const c=d(t,["config"]);return c!=null&&nx(c,i,e),i}function sx(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function rx(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function ax(t,e,i){const s={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function lx(t,e,i){const s={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function ux(t,e){const i={},s=d(t,["config"]);return s!=null&&ax(s,i),i}function cx(t,e){const i={},s=d(t,["config"]);return s!=null&&lx(s,i),i}function dx(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>kv(h))),f(i,["tuningJobs"],c)}return i}function fx(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>$c(h))),f(i,["tuningJobs"],c)}return i}function hx(t,e){const i={},s=d(t,["name"]);s!=null&&f(i,["model"],s);const a=d(t,["name"]);return a!=null&&f(i,["endpoint"],a),i}function px(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function mx(t,e,i){const s={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function kv(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],Xy(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(t,["description"]);v!=null&&f(i,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(i,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&f(i,["tunedModel"],hx(S)),i}function $c(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],Xy(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(i,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(t,["error"]);v!=null&&f(i,["error"],v);const _=d(t,["description"]);_!=null&&f(i,["description"],_);const S=d(t,["baseModel"]);S!=null&&f(i,["baseModel"],S);const w=d(t,["tunedModel"]);w!=null&&f(i,["tunedModel"],w);const A=d(t,["preTunedModel"]);A!=null&&f(i,["preTunedModel"],A);const R=d(t,["supervisedTuningSpec"]);R!=null&&f(i,["supervisedTuningSpec"],R);const x=d(t,["preferenceOptimizationSpec"]);x!=null&&f(i,["preferenceOptimizationSpec"],x);const D=d(t,["tuningDataStats"]);D!=null&&f(i,["tuningDataStats"],D);const G=d(t,["encryptionSpec"]);G!=null&&f(i,["encryptionSpec"],G);const O=d(t,["partnerModelTuningSpec"]);O!=null&&f(i,["partnerModelTuningSpec"],O);const $=d(t,["customBaseModel"]);$!=null&&f(i,["customBaseModel"],$);const Y=d(t,["experiment"]);Y!=null&&f(i,["experiment"],Y);const J=d(t,["labels"]);J!=null&&f(i,["labels"],J);const F=d(t,["outputUri"]);F!=null&&f(i,["outputUri"],F);const ae=d(t,["pipelineJob"]);ae!=null&&f(i,["pipelineJob"],ae);const W=d(t,["serviceAccount"]);W!=null&&f(i,["serviceAccount"],W);const pe=d(t,["tunedModelDisplayName"]);pe!=null&&f(i,["tunedModelDisplayName"],pe);const Ee=d(t,["veoTuningSpec"]);return Ee!=null&&f(i,["veoTuningSpec"],Ee),i}function gx(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(t,["done"]);c!=null&&f(i,["done"],c);const h=d(t,["error"]);return h!=null&&f(i,["error"],h),i}function py(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&f(i,["validationDatasetUri"],s);const a=d(t,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yx extends Un{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Gi(kn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Dc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=rx(e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>$c(v))}else{const p=sx(e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>kv(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=cx(e);return h=Q("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=fx(v),S=new Hg;return Object.assign(S,_),S})}else{const p=ux(e);return h=Q("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=dx(v),S=new Hg;return Object.assign(S,_),S})}}async cancel(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ZR(e);return h=Q("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ex(v),S=new Bg;return Object.assign(S,_),S})}else{const p=WR(e);return h=Q("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jR(v),S=new Bg;return Object.assign(S,_),S})}}async tuneInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=ox(e,e);return l=Q("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>$c(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ix(e);return l=Q("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>gx(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vx{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _x=1024*1024*8,Sx=3,Tx=1e3,Ex=2,Oa="x-goog-upload-status";async function wx(t,e,i){var s;const a=await Uv(t,e,i),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Oa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Ax(t,e,i){var s;const a=await Uv(t,e,i),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Oa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=zy(l),h=new cd;return Object.assign(h,c),h}async function Uv(t,e,i){var s,a;let l=0,c=0,h=new kc(new Response),g="upload";for(l=t.size;c<l;){const p=Math.min(_x,l-c),v=t.slice(c,c+p);c+p>=l&&(g+=", finalize");let _=0,S=Tx;for(;_<Sx&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Oa]));)_++,await Cx(S),S=S*Ex;if(c+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Oa])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function bx(t){return{size:t.size,type:t.type}}function Cx(t){return new Promise(e=>setTimeout(e,t))}class Rx{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wx(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ax(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx{create(e,i,s){return new Nx(e,i,s)}}class Nx{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const my="x-goog-api-key";class Ix{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(my)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(my,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mx="gl-node/";class Dx{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new at({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=bT(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new Ix(this.apiKey);this.apiClient=new bC({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Mx+"web",uploader:new Rx,downloader:new vx}),this.models=new $C(this.apiClient),this.live=new qC(this.apiClient,a,new xx),this.batches=new ew(this.apiClient),this.chats=new Ow(this.models,this.apiClient),this.caches=new Dw(this.apiClient),this.files=new Fw(this.apiClient),this.operations=new FC(this.apiClient),this.authTokens=new aR(this.apiClient),this.tunings=new yx(this.apiClient),this.fileSearchStores=new mR(this.apiClient)}}function Ja(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function kx(t,e,i,s){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{p(s.next(v))}catch(_){c(_)}}function g(v){try{p(s.throw(v))}catch(_){c(_)}}function p(v){v.done?l(v.value):a(v.value).then(h,g)}p((s=s.apply(t,e||[])).next())})}const Ux=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class vd extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}}class Ox extends vd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gy extends vd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yy extends vd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fc||(Fc={}));class Px{constructor(e,{headers:i={},customFetch:s,region:a=Fc.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=Ux(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return kx(this,arguments,void 0,function*(i,s={}){var a;let l,c;try{const{headers:h,method:g,body:p,signal:v,timeout:_}=s;let S={},{region:w}=s;w||(w=this.region);const A=new URL(`${this.url}/${i}`);w&&w!=="any"&&(S["x-region"]=w,A.searchParams.set("forceFunctionRegion",w));let R;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",R=p):typeof p=="string"?(S["Content-Type"]="text/plain",R=p):typeof FormData<"u"&&p instanceof FormData?R=p:(S["Content-Type"]="application/json",R=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?R=JSON.stringify(p):R=p;let x=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(x=c.signal,v.addEventListener("abort",()=>c.abort())):x=c.signal);const D=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:R,signal:x}).catch(Y=>{throw new Ox(Y)}),G=D.headers.get("x-relay-error");if(G&&G==="true")throw new gy(D);if(!D.ok)throw new yy(D);let O=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),$;return O==="application/json"?$=yield D.json():O==="application/octet-stream"||O==="application/pdf"?$=yield D.blob():O==="text/event-stream"?$=D:O==="multipart/form-data"?$=yield D.formData():$=yield D.text(),{data:$,error:null,response:D}}catch(h){return{data:null,error:h,response:h instanceof yy||h instanceof gy?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var Lx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},qx=class{constructor(t){var e,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,p=l.status,v=l.statusText;if(l.ok){var _,S;if(i.method!=="HEAD"){var w;const D=await l.text();D===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((w=i.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?h=D:h=JSON.parse(D))}const R=(_=i.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),x=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");R&&x&&x.length>1&&(g=parseInt(x[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var A;const R=await l.text();try{c=JSON.parse(R),Array.isArray(c)&&l.status===404&&(h=[],c=null,p=200,v="OK")}catch{l.status===404&&R===""?(p=204,v="No Content"):c={message:R}}if(c&&i.isMaybeSingle&&(!(c==null||(A=c.details)===null||A===void 0)&&A.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&i.shouldThrowOnError)throw new Lx(c)}return{error:c,data:h,count:g,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let h="";const g=l==null?void 0:l.cause;if(g){var p,v,_,S;const A=(p=g==null?void 0:g.message)!==null&&p!==void 0?p:"",R=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";h=`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(S=g==null?void 0:g.name)!==null&&S!==void 0?S:"Error"}: ${A}`,R&&(h+=` (${R})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var w;h=(w=l==null?void 0:l.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},Gx=class extends qx{select(t){let e=!1;const i=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:s=i}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const vy=new RegExp("[,()]");var ko=class extends Gx{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&vy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&vy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},Hx=class{constructor(t,{headers:e={},schema:i,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:i=!1,count:s}=e??{},a=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",c),s&&g.append("Prefer",`count=${s}`),new ko({method:a,url:h,headers:g,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:i=!0}={}){var s;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",g.join(","))}}return new ko({method:a,url:l,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:s,defaultToNull:a=!0}={}){var l;const c="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),s&&g.append("Prefer",`count=${s}`),a||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);h.searchParams.set("columns",v.join(","))}}return new ko({method:c,url:h,headers:g,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var i;const s="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new ko({method:s,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:t}={}){var e;const i="DELETE",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new ko({method:i,url:s,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Bx=class Ov{constructor(e,{headers:i={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(i),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Hx(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ov(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:s=!1,get:a=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const v=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(v)),_=s&&Object.values(i).some(v);_?(h="POST",p=i):s||a?(h=s?"HEAD":"GET",Object.entries(i).filter(([w,A])=>A!==void 0).map(([w,A])=>[w,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([w,A])=>{g.searchParams.append(w,A)})):(h="POST",p=i);const S=new Headers(this.headers);return _?S.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&S.set("Prefer",`count=${l}`),new ko({method:h,url:g,headers:S,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class Vx{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const s=i.versions;if(s&&s.node){const a=s.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zx="2.90.1",$x=`realtime-js/${zx}`,Pv="1.0.0",Fx="2.0.0",_y=Pv,Jc=1e4,Jx=1e3,Kx=100;var li;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(li||(li={}));var it;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(it||(it={}));var rn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rn||(rn={}));var Kc;(function(t){t.websocket="websocket"})(Kc||(Kc={}));var Pi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pi||(Pi={}));class Yx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,s){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+_.length,w=new ArrayBuffer(this.HEADER_LENGTH+S);let A=new DataView(w),R=0;A.setUint8(R++,this.KINDS.userBroadcastPush),A.setUint8(R++,g.length),A.setUint8(R++,h.length),A.setUint8(R++,c.length),A.setUint8(R++,p.length),A.setUint8(R++,_.length),A.setUint8(R++,i),Array.from(g,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(h,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(c,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(p,D=>A.setUint8(R++,D.charCodeAt(0))),Array.from(_,D=>A.setUint8(R++,D.charCodeAt(0)));var x=new Uint8Array(w.byteLength+s.byteLength);return x.set(new Uint8Array(w),0),x.set(new Uint8Array(s),w.byteLength),x.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,h,g]=s;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,s){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const v=s.decode(e.slice(g,g+l));g=g+l;const _=s.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),w=h===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,A={type:this.BROADCAST_EVENT,event:v,payload:w};return c>0&&(A.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>i.includes(s)))}}class Lv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qe||(qe={}));const Sy=(t,e,i={})=>{var s;const a=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=Xx(c,t,e,a),l),{}):{}},Xx=(t,e,i,s)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,c=i[t];return l&&!s.includes(l)?qv(l,c):Yc(c)},qv=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return jx(e,i)}switch(t){case qe.bool:return Qx(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return Wx(e);case qe.json:case qe.jsonb:return Zx(e);case qe.timestamp:return eN(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Yc(e);default:return Yc(e)}},Yc=t=>t,Qx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Wx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Zx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},jx=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>qv(e,h))}return t},eN=t=>typeof t=="string"?t.replace(" ","T"):t,Gv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Tc{constructor(e,i,s={},a=Jc){this.channel=e,this.event=i,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ty;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ty||(Ty={}));class Fs{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fs.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Fs.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Fs.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const _=l[p];if(_){const S=v.map(x=>x.presence_ref),w=_.map(x=>x.presence_ref),A=v.filter(x=>w.indexOf(x.presence_ref)<0),R=_.filter(x=>S.indexOf(x.presence_ref)<0);A.length>0&&(h[p]=A),R.length>0&&(g[p]=R)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:g},s,a)}static syncDiff(e,i,s,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(w=>w.presence_ref),S=v.filter(w=>_.indexOf(w.presence_ref)<0);e[h].unshift(...S)}s(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(_=>_.presence_ref);p=p.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const a=e[s];return"metas"in a?i[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ey;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ey||(Ey={}));var Js;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Js||(Js={}));var Dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class qo{constructor(e,i={config:{}},s){var a,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Tc(this,rn.join,this.params,this.timeout),this.rejoinTimer=new Lv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Fs(this),this.broadcastEndpointURL=Gv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==it.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Js.PRESENCE]&&this.bindings[Js.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Dn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:w})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(Dn.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,x=(A=R==null?void 0:R.length)!==null&&A!==void 0?A:0,D=[];for(let G=0;G<x;G++){const O=R[G],{filter:{event:$,schema:Y,table:J,filter:F}}=O,ae=w&&w[G];if(ae&&ae.event===$&&qo.isFilterValueEqual(ae.schema,Y)&&qo.isFilterValueEqual(ae.table,J)&&qo.isFilterValueEqual(ae.filter,F))D.push(Object.assign(Object.assign({},O),{id:ae.id}));else{this.unsubscribe(),this.state=it.errored,e==null||e(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Dn.SUBSCRIBED);return}}).receive("error",w=>{this.state=it.errored,e==null||e(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===it.joined&&e===Js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=it.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Tc(this,rn.leave,{},e),s.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=it.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Tc(this,e,i,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Kx){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=rn;if(s&&[h,g,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,i,s);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var A,R,x;return((A=w.filter)===null||A===void 0?void 0:A.event)==="*"||((x=(R=w.filter)===null||R===void 0?void 0:R.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===c}).map(w=>w.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(w=>{var A,R,x,D,G,O,$,Y;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const J=w.id,F=(A=w.filter)===null||A===void 0?void 0:A.event;return J&&((R=i.ids)===null||R===void 0?void 0:R.includes(J))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((x=i.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))&&(!(!((D=w.filter)===null||D===void 0)&&D.table)||w.filter.table===((G=i.data)===null||G===void 0?void 0:G.table))}else{const J=($=(O=w==null?void 0:w.filter)===null||O===void 0?void 0:O.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return J==="*"||J===((Y=i==null?void 0:i.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof S=="object"&&"ids"in S){const A=S.data,{schema:R,table:x,commit_timestamp:D,type:G,errors:O}=A;S=Object.assign(Object.assign({},{schema:R,table:x,commit_timestamp:D,eventType:G,new:{},old:{},errors:O}),this._getPayloadRecords(A))}w.callback(S,s)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&qo.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rn.close,{},e)}_onError(e){this._on(rn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Sy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Sy(e.columns,e.old_record)),i}}const Ec=()=>{},wa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tN=[1e3,2e3,5e3,1e4],nN=1e4,iN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oN{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jc,this.transport=null,this.heartbeatIntervalMs=wa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ec,this.ref=0,this.reconnectTimer=null,this.vsn=_y,this.logger=Ec,this.conn=null,this.sendBuffer=[],this.serializer=new Yx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=i==null?void 0:i.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Kc.websocket}`,this.httpEndpoint=Gv(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case li.connecting:return Pi.Connecting;case li.open:return Pi.Open;case li.closing:return Pi.Closing;default:return Pi.Closed}}isConnected(){return this.connectionState()===Pi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new qo(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jx,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},wa.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===li.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===li.open||this.conn.readyState===li.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${s}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([iN],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,s=!1;if(e)i=e,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:$x};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(rn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Lv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,a,l,c,h,g,p,v,_,S,w;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Jc,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:wa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Ec,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:_y,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(A=>tN[A-1]||nN),this.vsn){case Pv:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((A,R)=>R(JSON.stringify(A))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((A,R)=>R(JSON.parse(A)));break;case Fx:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ks=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function sN(t,e,i){const s=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function rN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function aN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:a,body:l,headers:c}){const h=sN(t.baseUrl,s,a),g=await rN(t.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!p.ok){const w=_?S:void 0,A=w==null?void 0:w.error;throw new Ks((A==null?void 0:A.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:w})}return{status:p.status,headers:p.headers,data:S}}}}function Aa(t){return t.join("")}var lN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Aa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Aa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Aa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Aa(t.namespace)}`}),!0}catch(e){if(e instanceof Ks&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof Ks&&i.status===409)return;throw i}}};function Co(t){return t.join("")}var uN=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Co(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof Ks&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof Ks&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},cN=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=aN({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new lN(this.client,e),this.tableOps=new uN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ka=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function $e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var dN=class extends Ka{constructor(t,e,i){super(t),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Xc=class extends Ka{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const _d=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fN=()=>Response,Qc=t=>{if(Array.isArray(t))return t.map(i=>Qc(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Qc(s)}),e},hN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Ys(t){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ys(t)}function mN(t,e){if(Ys(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Ys(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gN(t){var e=mN(t,"string");return Ys(e)=="symbol"?e:e+""}function yN(t,e,i){return(e=gN(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function wy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function re(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?wy(Object(i),!0).forEach(function(s){yN(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wy(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const wc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},vN=async(t,e,i)=>{t instanceof await fN()&&!(i!=null&&i.noResolveJson)?t.json().then(s=>{const a=t.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new dN(wc(s),a,l))}).catch(s=>{e(new Xc(wc(s),s))}):e(new Xc(wc(t),t))},_N=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(hN(s)?(a.headers=re({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),re(re({},a),i))};async function js(t,e,i,s,a,l){return new Promise((c,h)=>{t(i,_N(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>vN(g,h,s))})}async function Xs(t,e,i,s){return js(t,"GET",e,i,s)}async function sn(t,e,i,s,a){return js(t,"POST",e,s,a,i)}async function Wc(t,e,i,s,a){return js(t,"PUT",e,s,a,i)}async function SN(t,e,i,s){return js(t,"HEAD",e,re(re({},i),{},{noResolveJson:!0}),s)}async function Sd(t,e,i,s,a){return js(t,"DELETE",e,s,a,i)}var TN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($e(e))return{data:null,error:e};throw e}}};let Hv;Hv=Symbol.toStringTag;var EN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Hv]="BlobDownloadBuilder",this.promise=null}asStream(){return new TN(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($e(e))return{data:null,error:e};throw e}}};const wN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ay={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var AN=class{constructor(t,e={},i,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=i,this.fetch=_d(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,i,s){var a=this;try{let l;const c=re(re({},Ay),s);let h=re(re({},a.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s!=null&&s.headers&&(h=re(re({},h),s.headers));const p=a._removeEmptyFolders(e),v=a._getFinalPath(p),_=await(t=="PUT"?Wc:sn)(a.fetch,`${a.url}/object/${v}`,l,re({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,s){var a=this;const l=a._removeEmptyFolders(t),c=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${c}`);h.searchParams.set("token",e);try{let g;const p=re({upsert:Ay.upsert},s),v=re(re({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",p.cacheControl)):(g=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{data:{path:l,fullPath:(await Wc(a.fetch,h.toString(),g,{headers:v})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if($e(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(t,e){var i=this;try{let s=i._getFinalPath(t);const a=re({},i.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await sn(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(i.url+l.url),h=c.searchParams.get("token");if(!h)throw new Ka("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:h},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var s=this;try{return{data:await sn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}}async copy(t,e,i){var s=this;try{return{data:{path:(await sn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,i){var s=this;try{let a=s._getFinalPath(t),l=await sn(s.fetch,`${s.url}/object/sign/${a}`,re({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:s.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,i){var s=this;try{const a=await sn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>re(re({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}}download(t,e){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",l=this._getFinalPath(t),c=()=>Xs(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new EN(c,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);try{return{data:Qc(await Xs(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await SN(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($e(s)&&s instanceof Xc){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const i=this._getFinalPath(t),s=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;try{return{data:await Sd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async list(t,e,i){var s=this;try{const a=re(re(re({},wN),e),{},{prefix:t||""});return{data:await sn(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},i),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($e(a))return{data:null,error:a};throw a}}async listV2(t,e){var i=this;try{const s=re({},t);return{data:await sn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},e),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Bv="2.90.1",Vv={"X-Client-Info":`storage-js/${Bv}`};var bN=class{constructor(t,e={},i,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=re(re({},Vv),e),this.fetch=_d(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const i=e.listBucketOptionsToQueryString(t);return{data:await Xs(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Xs(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async createBucket(t,e={public:!1}){var i=this;try{return{data:await sn(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var i=this;try{return{data:await Wc(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await sn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Sd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},CN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=re(re({},Vv),e),this.fetch=_d(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await sn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async listBuckets(t){var e=this;try{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const s=i.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Xs(e.fetch,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Sd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}from(t){var e=this;if(!pN(t))throw new Ka("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new cN({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(a,h),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}};const Td={"X-Client-Info":`storage-js/${Bv}`,"Content-Type":"application/json"};var zv=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Gt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Ac=class extends zv{constructor(t,e,i){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},RN=class extends zv{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ed=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},by=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NN=async(t,e,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new Ac(by(l),s,c))}).catch(()=>{const l=s+"";e(new Ac(a.statusText||`HTTP ${s} error`,s,l))});else{const l=s+"";e(new Ac(a.statusText||`HTTP ${s} error`,s,l))}}else e(new RN(by(t),t))},IN=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(xN(s)?(a.headers=re({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,re(re({},a),i)):a};async function MN(t,e,i,s,a,l){return new Promise((c,h)=>{t(i,IN(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>NN(g,h,s))})}async function Ht(t,e,i,s,a){return MN(t,"POST",e,s,a,i)}var DN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=re(re({},Td),e),this.fetch=Ed(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async getIndex(t,e){var i=this;try{return{data:await Ht(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async deleteIndex(t,e){var i=this;try{return{data:await Ht(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}}},kN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=re(re({},Td),e),this.fetch=Ed(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ht(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async getVectors(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ht(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async queryVectors(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ht(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}},UN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=re(re({},Td),e),this.fetch=Ed(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async listBuckets(t={}){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Ht(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}}},ON=class extends UN{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new PN(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},PN=class extends DN{constructor(t,e,i,s){super(t,e,s),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new LN(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},LN=class extends kN{constructor(t,e,i,s,a){super(t,e,a),this.vectorBucketName=i,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,re(re({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},qN=class extends bN{constructor(t,e={},i,s){super(t,e,i,s)}from(t){return new AN(this.url,this.headers,t,this.fetch)}get vectors(){return new ON(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new CN(this.url+"/iceberg",this.headers,this.fetch)}};const $v="2.90.1",Uo=30*1e3,Zc=3,bc=Zc*Uo,GN="http://localhost:9999",HN="supabase.auth.token",BN={"X-Client-Info":`gotrue-js/${$v}`},jc="X-Supabase-Api-Version",Fv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zN=600*1e3;class Qs extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $N extends Qs{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function FN(t){return te(t)&&t.name==="AuthApiError"}class Li extends Qs{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class Pn extends Qs{constructor(e,i,s,a){super(e,s,a),this.name=i,this.status=s}}class qt extends Pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JN(t){return te(t)&&t.name==="AuthSessionMissingError"}class Ro extends Pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ba extends Pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ca extends Pn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function KN(t){return te(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cy extends Pn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class YN extends Pn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ed extends Pn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Cc(t){return te(t)&&t.name==="AuthRetryableFetchError"}class Ry extends Pn{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class td extends Pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xy=` 	
\r=`.split(""),XN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<xy.length;e+=1)t[xy[e].charCodeAt(0)]=-2;for(let e=0;e<Pa.length;e+=1)t[Pa[e].charCodeAt(0)]=e;return t})();function Ny(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Pa[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Pa[s]),e.queuedBits-=6}}function Jv(t,e,i){const s=XN[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Iy(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{ZN(c,s,i)};for(let c=0;c<t.length;c+=1)Jv(t.charCodeAt(c),a,l);return e.join("")}function QN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function WN(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}QN(s,e)}}function ZN(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Bo(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Jv(t.charCodeAt(a),i,s);return new Uint8Array(e)}function jN(t){const e=[];return WN(t,i=>e.push(i)),new Uint8Array(e)}function qi(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Ny(a,i,s)),Ny(null,i,s),e.join("")}function e1(t){return Math.round(Date.now()/1e3)+t}function t1(){return Symbol("auth-callback")}const pt=()=>typeof window<"u"&&typeof document<"u",Di={tested:!1,writable:!1},Kv=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Di.tested)return Di.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Di.tested=!0,Di.writable=!0}catch{Di.tested=!0,Di.writable=!1}return Di.writable};function n1(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((s,a)=>{e[a]=s}),e}const Yv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),i1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oo=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},ki=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},ht=async(t,e)=>{await t.removeItem(e)};class Ya{constructor(){this.promise=new Ya.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Ya.promiseConstructor=Promise;function Rc(t){const e=t.split(".");if(e.length!==3)throw new td("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!VN.test(e[s]))throw new td("JWT not in base64url format");return{header:JSON.parse(Iy(e[0])),payload:JSON.parse(Iy(e[1])),signature:Bo(e[2]),raw:{header:e[0],payload:e[1]}}}async function o1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function s1(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function r1(t){return("0"+t.toString(16)).substr(-2)}function a1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,r1).join("")}async function l1(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function u1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await l1(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xo(t,e,i=!1){const s=a1();let a=s;i&&(a+="/PASSWORD_RECOVERY"),await Oo(t,`${e}-code-verifier`,a);const l=await u1(s);return[l,s===l?"plain":"s256"]}const c1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d1(t){const e=t.headers.get(jc);if(!e||!e.match(c1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function f1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function h1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const p1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function No(t){if(!p1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function m1(t,e){return new Proxy(t,{get:(i,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,a)}})}function My(t){return JSON.parse(JSON.stringify(t))}const Oi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g1=[502,503,504];async function Dy(t){var e;if(!i1(t))throw new ed(Oi(t),0);if(g1.includes(t.status))throw new ed(Oi(t),t.status);let i;try{i=await t.json()}catch(l){throw new Li(Oi(l),l)}let s;const a=d1(t);if(a&&a.getTime()>=Fv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new Ry(Oi(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new qt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Ry(Oi(i),t.status,i.weak_password.reasons);throw new $N(Oi(i),t.status||500,s)}const y1=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),i))};async function se(t,e,i,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[jc]||(l[jc]=Fv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await v1(t,e,i+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function v1(t,e,i,s,a,l){const c=y1(e,s,a,l);let h;try{h=await t(i,Object.assign({},c))}catch(g){throw console.error(g),new ed(Oi(g),0)}if(h.ok||await Dy(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Dy(g)}}function on(t){var e;let i=null;T1(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=e1(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function ky(t){const e=on(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ui(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _1(t){return{data:t,error:null}}function S1(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Ja(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Uy(t){return t}function T1(t){return t.access_token&&t.refresh_token&&t.expires_in}const Nc=["global","local","others"];class E1{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=Yv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Nc[0]){if(Nc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nc.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:ui})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=Ja(e,["options"]),a=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:S1,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(te(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ui})}catch(i){if(te(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Uy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(A.split(";")[1].split("=")[1]);p[`${x}Page`]=R}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(te(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){No(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ui})}catch(i){if(te(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){No(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:ui})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){No(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:ui})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){No(e.userId);try{const{data:i,error:s}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:s}}catch(i){if(te(i))return{data:null,error:i};throw i}}async _deleteFactor(e){No(e.userId),No(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(te(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Uy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(A.split(";")[1].split("=")[1]);p[`${x}Page`]=R}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(te(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(te(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(te(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(te(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(te(i))return{data:null,error:i};throw i}}}function Oy(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const Io={debug:!!(globalThis&&Kv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class w1 extends Xv{}async function A1(t,e,i){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new w1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Io.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function b1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function C1(t){return parseInt(t,16)}function R1(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function x1(t){var e;const{chainId:i,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Qv(t.address),A=v?`${v}://${s}`:s,R=t.statement?`${t.statement}
`:"",x=`${A} wants you to sign in with your Ethereum account:
${w}

${R}`;let D=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),h&&(D+=`
Not Before: ${h.toISOString()}`),g&&(D+=`
Request ID: ${g}`),p){let G=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);G+=`
- ${O}`}D+=G}return`${x}
${D}`}class tt extends Error{constructor({message:e,code:i,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class La extends tt{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function N1({error:t,options:e}){var i,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(Wv(c)){if(l.rp.id!==c)return new tt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function I1({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Wv(s)){if(i.rpId!==s)return new tt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class M1{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const D1=new M1;function k1(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,a=Ja(t,["challenge","user","excludeCredentials"]),l=Bo(e).buffer,c=Object.assign(Object.assign({},i),{id:Bo(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Bo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function U1(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=Ja(t,["challenge","allowCredentials"]),a=Bo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Bo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function O1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:qi(new Uint8Array(t.response.attestationObject)),clientDataJSON:qi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function P1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:qi(new Uint8Array(a.authenticatorData)),clientDataJSON:qi(new Uint8Array(a.clientDataJSON)),signature:qi(new Uint8Array(a.signature)),userHandle:a.userHandle?qi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Wv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Py(){var t,e;return!!(pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function L1(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new La("Browser returned unexpected credential type",e)}:{data:null,error:new La("Empty credential response",e)}}catch(e){return{data:null,error:N1({error:e,options:t})}}}async function q1(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new La("Browser returned unexpected credential type",e)}:{data:null,error:new La("Empty credential response",e)}}catch(e){return{data:null,error:I1({error:e,options:t})}}}const G1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qa(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const h=s[l];e(h)?s[l]=qa(h,c):s[l]=qa(c)}else s[l]=c}return s}function B1(t,e){return qa(G1,t,e||{})}function V1(t,e){return qa(H1,t,e||{})}class z1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??D1.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=B1(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await L1({publicKey:p,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const p=V1(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await q1(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return te(c)?{data:null,error:c}:{data:null,error:new Li("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Qs("rpId is required for WebAuthn authentication")};try{if(!Py())return{data:null,error:new Li("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return te(c)?{data:null,error:c}:{data:null,error:new Li("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Qs("rpId is required for WebAuthn registration")};try{if(!Py())return{data:null,error:new Li("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return te(c)?{data:null,error:c}:{data:null,error:new Li("Unexpected error in register",c)}}}}b1();const $1={url:GN,storageKey:HN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ly(t,e,i){return await i()}const Mo={};class Ws{get jwks(){var e,i;return(i=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},$1),e);if(this.storageKey=l.storageKey,this.instanceID=(i=Ws.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Ws.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&pt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new E1({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Yv(l.fetch),this.lock=l.lock||Ly,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&pt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=A1:this.lock=Ly,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new z1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Kv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Oy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Oy(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$v}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(pt()&&(i=n1(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),pt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),KN(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return te(i)?this._returnResult({error:i}):this._returnResult({error:new Li("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,a;try{const l=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:on}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,a;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let w=null,A=null;this.flowType==="pkce"&&([w,A]=await xo(this.storage,this.storageKey)),l=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:w,code_challenge_method:A},xform:on})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:on})}else throw new ba("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else throw new ba("You must provide either an email or phone number and a password");const{data:s,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new Ro;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(i){if(te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,a,l,c,h,g,p,v,_,S;let w,A;if("message"in e)w=e.message,A=e.signature;else{const{chain:R,wallet:x,statement:D,options:G}=e;let O;if(pt())if(typeof x=="object")O=x;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")O=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const $=new URL((i=G==null?void 0:G.url)!==null&&i!==void 0?i:window.location.href),Y=await O.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=Qv(Y[0]);let F=(s=G==null?void 0:G.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!F){const W=await O.request({method:"eth_chainId"});F=C1(W)}const ae={domain:$.host,address:J,statement:D,uri:$.href,version:"1",chainId:F,nonce:(a=G==null?void 0:G.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=G==null?void 0:G.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=G==null?void 0:G.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=G==null?void 0:G.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=G==null?void 0:G.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=G==null?void 0:G.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=x1(ae),A=await O.request({method:"personal_sign",params:[R1(w),J]})}try{const{data:R,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:A},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:on});if(x)throw x;if(!R||!R.session||!R.user){const D=new Ro;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:x})}catch(R){if(te(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(e){var i,s,a,l,c,h,g,p,v,_,S,w;let A,R;if("message"in e)A=e.message,R=e.signature;else{const{chain:x,wallet:D,statement:G,options:O}=e;let $;if(pt())if(typeof D=="object")$=D;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))$=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=D}const Y=new URL((i=O==null?void 0:O.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in $&&$.signIn){const J=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),G?{statement:G}:null));let F;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")F=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)F=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)A=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),R=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${Y.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(a=(s=O==null?void 0:O.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((g=O==null?void 0:O.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((_=(v=O==null?void 0:O.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...O.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const J=await $.signMessage(new TextEncoder().encode(A),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=J}}try{const{data:x,error:D}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:qi(R)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:on});if(D)throw D;if(!x||!x.session||!x.user){const G=new Ro;return this._returnResult({data:{user:null,session:null},error:G})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:D})}catch(x){if(te(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const i=await ki(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new YN;const{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:on});if(await ht(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Ro;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:a,access_token:l,nonce:c}=e,h=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:on}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new Ro;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await xo(this.storage,this.storageKey));const{error:_}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new ba("You must provide either an email or phone number.")}catch(h){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,s;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:on});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,s,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await xo(this.storage,this.storageKey));const p=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:_1});return!((l=p.data)===null||l===void 0)&&l.url&&pt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new qt;const{error:a}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(te(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await se(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:h}=await se(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new ba("You must provide either an email or phone number and a type")}catch(i){if(te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<bc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ki(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=xc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=m1(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ui}):await this._useSession(async i=>{var s,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:ui})})}catch(i){if(te(i))return JN(i)&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new qt;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await xo(this.storage,this.storageKey));const{data:p,error:v}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:ui});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qt;const i=Date.now()/1e3;let s=i,a=!0,l=null;const{payload:c}=Rc(e.access_token);if(c.exp&&(s=c.exp,a=s<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(te(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new qt;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!pt())throw new Ca("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ca(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Cy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ca("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cy("No code detected.");const{data:G,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new Ca("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const w=S-v;w*1e3<=Uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const A=S-_;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,S,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,S,v);const{data:R,error:x}=await this._getUser(l);if(x)throw x;const D={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:p,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(s){if(te(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(FN(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=t1(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xo(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:a}=await this._useSession(async l=>{var c,h,g,p,v;const{data:_,error:S}=l;if(S)throw S;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return pt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(te(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,_=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:on}),{data:S,error:w}=_;return w?this._returnResult({data:{user:null,session:null},error:w}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Ro}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:w}))}catch(a){if(await ht(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)throw c;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await s1(async a=>(a>0&&await o1(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:on})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Cc(l)&&Date.now()+c-s<Uo})}catch(s){if(this._debug(i,"error",s),te(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),pt()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ki(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Oo(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:xc()}else if(a&&!a.user&&!a.user){const c=await ki(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await ht(this.storage,this.storageKey+"-user"),await Oo(this.storage,this.storageKey,a)):a.user=xc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<bc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${bc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Cc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ya;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new qt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),te(l)){const c={data:null,error:l};return Cc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ht(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await Oo(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=My(a);await Oo(this.storage,this.storageKey,l)}else{const a=My(i);await Oo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ht(this.storage,this.storageKey),await ht(this.storage,this.storageKey+"-code-verifier"),await ht(this.storage,this.storageKey+"-user"),this.userStorage&&await ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Uo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Uo}ms, refresh threshold is ${Zc} ticks`),a<=Zc&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Xv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const a=[`provider=${encodeURIComponent(i)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await xo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await se(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?O1(e.webauthn.credential_response):P1(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:k1(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:U1(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Rc(s.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new qt})})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new qt});const c=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&pt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new qt});const c=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&pt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;return s?this._returnResult({data:null,error:s}):i?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new qt})})}catch(e){if(te(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qt})})}catch(i){if(te(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+zN>a)return s;const{data:l,error:c}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:w,error:A}=await this.getSession();if(A||!w.session)return this._returnResult({data:null,error:A});s=w.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=Rc(s);i!=null&&i.allowExpired||f1(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:a,signature:c},error:null}}const v=h1(a.alg),_=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,jN(`${h}.${g}`)))throw new td("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}}Ws.nextInstanceID={};const F1=Ws,J1="2.90.1";let $s="";typeof Deno<"u"?$s="deno":typeof document<"u"?$s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$s="react-native":$s="node";const K1={"X-Client-Info":`supabase-js-${$s}/${J1}`},Y1={headers:K1},X1={schema:"public"},Q1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W1={};function Zs(t){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(t)}function Z1(t,e){if(Zs(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Zs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j1(t){var e=Z1(t,"string");return Zs(e)=="symbol"?e:e+""}function eI(t,e,i){return(e=j1(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function Ke(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qy(Object(i),!0).forEach(function(s){eI(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qy(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const tI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nI=()=>Headers,iI=(t,e,i)=>{const s=tI(i),a=nI();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Ke(Ke({},c),{},{headers:p}))}};function oI(t){return t.endsWith("/")?t:t+"/"}function sI(t,e){var i,s;const{db:a,auth:l,realtime:c,global:h}=t,{db:g,auth:p,realtime:v,global:_}=e,S={db:Ke(Ke({},g),a),auth:Ke(Ke({},p),l),realtime:Ke(Ke({},v),c),storage:{},global:Ke(Ke(Ke({},_),h),{},{headers:Ke(Ke({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function rI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(oI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var aI=class extends F1{constructor(t){super(t)}},lI=class{constructor(t,e,i){var s,a;this.supabaseUrl=t,this.supabaseKey=e;const l=rI(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:X1,realtime:W1,auth:Ke(Ke({},Q1),{},{storageKey:c}),global:Y1},g=sI(i??{},h);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=iI(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Bx(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new qN(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Px(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:p},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aI({url:this.authUrl.href,headers:Ke(Ke({},S),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:h,debug:g,throwOnError:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new oN(this.realtimeUrl.href,Ke(Ke({},t),{},{params:Ke(Ke({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const uI=(t,e,i)=>new lI(t,e,i);function cI(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}cI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dI="https://myrbpmpwrujdvqxswmqv.supabase.co",fI="sb_publishable_a7WiUizArAAA5IOhNej-2A_m1HEv1Rt",ci=uI(dI,fI),hI=new Dx({apiKey:""}),pI={type:Te.OBJECT,properties:{items:{type:Te.ARRAY,items:{type:Te.OBJECT,properties:{hanzi:{type:Te.STRING},pinyin:{type:Te.STRING},partOfSpeech:{type:Te.STRING,description:"e.g. , , , "},definition:{type:Te.STRING},exampleSentence:{type:Te.STRING}},required:["hanzi","pinyin","definition","partOfSpeech"]}},description:{type:Te.STRING,description:"A brief summary of what this level expects for vocabulary."}}},mI={type:Te.OBJECT,properties:{items:{type:Te.ARRAY,items:{type:Te.OBJECT,properties:{char:{type:Te.STRING},pinyin:{type:Te.STRING},meaning:{type:Te.STRING},strokes:{type:Te.NUMBER},type:{type:Te.STRING,description:"Either 'reading' or 'writing'"}},required:["char","pinyin","meaning"]}},description:{type:Te.STRING,description:"A brief summary of character requirements for this level."}}},gI={type:Te.OBJECT,properties:{items:{type:Te.ARRAY,items:{type:Te.OBJECT,properties:{category:{type:Te.STRING,description:"Main category like 'Phrase' or 'Sentence Component'"},pattern:{type:Te.STRING,description:"The grammar structure, e.g., 'Subject + Verb + Object'"},name:{type:Te.STRING,description:"The name of the grammar point"},explanation:{type:Te.STRING},example:{type:Te.STRING}},required:["pattern","name","explanation","example"]}},description:{type:Te.STRING,description:"A brief summary of grammar complexity for this level."}}},yI=async(t,e,i=!1,s="vi")=>{if(!i)try{let g=[],p=null;if(e==="vocabulary"){const v=await ci.from("entries_vocabulary").select("*").eq("level",t).order("ordinal",{ascending:!0});g=v.data||[],p=v.error}else if(e==="characters"){let v=ci.from("entries_character").select("*");t==="1"||t==="2"?v=v.in("level",[t,"1-2"]):v=v.eq("level",t);const _=await v.order("ordinal",{ascending:!0});g=_.data||[],p=_.error}else if(e==="tasks"){const v=await ci.from("entries_task").select("*").eq("level",t);g=v.data||[],p=v.error}else if(e==="topics"){const v=await ci.from("entries_topic").select("*").eq("level",t);g=v.data||[],p=v.error}else{const v=await ci.from("entries_grammar").select("*").eq("level",t);g=v.data||[],p=v.error}if(p&&console.error("Supabase Error:",p),g&&g.length>0)return{items:g.map(S=>Na(S,e,s)),description:s==="vi"?"Ni dung t c s d liu":s==="zh"?"":"Content from Database"}}catch(g){console.error("Unexpected error fetching from Supabase:",g)}console.log("Falling back to Gemini AI generation...");const a="gemini-2.0-flash-exp";let l="",c=null;const h=s==="vi"?"Vietnamese":s==="zh"?"Chinese (Simplified)":"English";e==="vocabulary"?(l=`Generate a representative list of 8 distinctive HSK Level ${t} vocabulary words. 
    Include the Simplified Chinese (hanzi), Pinyin, Part of Speech (e.g. , , ) as 'partOfSpeech', ${h} definition, and a simple example sentence using the word.
    Focus on words that are introduced specifically at Level ${t} (HSK 3.0 standard).`,c=pI):e==="characters"?(l=`Generate a list of 8 representative Chinese characters (Hanzi) that are required for HSK Level ${t} (3.0 standard).
    Include the character, pinyin, basic meaning in ${h}, stroke count, and set type to 'reading'.`,c=mI):(l=`Generate a list of 5 key grammar points specifically for HSK Level ${t} (3.0 standard).
    Include a category (e.g. Phrase, Sentence Pattern), structural pattern, name, explanation in ${h}, and example sentence.`,c=gI);try{const p=(await hI.models.generateContent({model:a,contents:l,config:{responseMimeType:"application/json",responseSchema:c,systemInstruction:`You are an expert Chinese language teacher specializing in the HSK 3.0 curriculum. Provide accurate, educational content. Ensure all definitions and explanations are in ${h}.`}})).text;if(!p)throw new Error("No response from AI");const v=JSON.parse(p);return v.items=v.items.map(_=>({..._,source:"ai"})),v}catch(g){throw console.error("Gemini API Error:",g),new Error("Failed to fetch HSK content. Please check your API Key or network.")}},Na=(t,e,i="zh")=>e==="vocabulary"?{hanzi:t.hanzi,pinyin:t.pinyin,partOfSpeech:t.part_of_speech,definition:t.definition,exampleSentence:t.example_sentence,ordinal:t.ordinal,source:t.source||"official",level:t.level,section:e}:e==="characters"?{char:t.char,pinyin:t.pinyin,meaning:t.meaning,strokes:t.strokes,type:t.type,ordinal:t.ordinal,source:t.source||"official",level:t.level,section:e}:e==="tasks"?{category:i==="vi"?t.category_vi||t.category:i==="en"&&t.category_en||t.category,description:i==="vi"?t.description_vi||t.description:i==="en"&&t.description_en||t.description,canDo:i==="vi"?t.can_do_vi&&t.can_do_vi.length>0?t.can_do_vi:t.can_do:i==="en"&&t.can_do_en&&t.can_do_en.length>0?t.can_do_en:t.can_do,source:t.source||"official",level:t.level,section:e}:e==="topics"?{primary:i==="vi"?t.primary_topic_vi||t.primary_topic:i==="en"&&t.primary_topic_en||t.primary_topic,secondary:i==="vi"?t.secondary_topic_vi||t.secondary_topic:i==="en"&&t.secondary_topic_en||t.secondary_topic,items:i==="vi"?t.tertiary_items_vi&&t.tertiary_items_vi.length>0?t.tertiary_items_vi:t.tertiary_items:i==="en"&&t.tertiary_items_en&&t.tertiary_items_en.length>0?t.tertiary_items_en:t.tertiary_items,source:t.source||"official",level:t.level,section:e}:{category:t.category,subCategory:t.sub_category,name:t.name,pattern:t.pattern,explanation:t.explanation,example:t.example,source:t.source||"official",level:t.level,section:e},vI=async t=>{if(!t)return[];const e=[];try{const i=await ci.from("entries_vocabulary").select("*").or(`hanzi.ilike.%${t}%,pinyin.ilike.%${t}%,pinyin_clean.ilike.%${t}%,definition.ilike.%${t}%`).limit(10);i.data&&e.push(...i.data.map(l=>Na(l,"vocabulary")));const s=await ci.from("entries_character").select("*").or(`char.ilike.%${t}%,pinyin.ilike.%${t}%,pinyin_clean.ilike.%${t}%`).limit(10);s.data&&e.push(...s.data.map(l=>Na(l,"characters")));const a=await ci.from("entries_grammar").select("*").or(`name.ilike.%${t}%,pattern.ilike.%${t}%`).limit(10);a.data&&e.push(...a.data.map(l=>Na(l,"grammar")))}catch(i){console.error("Search Error:",i)}return e},_I=()=>{const{language:t,setLanguage:e,t:i}=Vo(),[s,a]=Ve.useState("home"),[l,c]=Ve.useState("1"),[h,g]=Ve.useState("vocabulary"),[p,v]=Ve.useState(null),[_,S]=Ve.useState({status:"idle"}),[w,A]=Ve.useState(!1),[R,x]=Ve.useState(""),[D,G]=Ve.useState(!1),O=Ve.useRef(null),[$,Y]=Ve.useState("all"),J=(oe,Re)=>{c(oe),g(Re),a("explorer"),x(""),G(!1)},F=async(oe=!1)=>{S({status:"loading"}),v(null);try{const Re=await yI(l,h,oe,t);v(Re),S({status:"success"})}catch(Re){S({status:"error",message:Re instanceof Error?Re.message:"Unknown error"})}},ae=async oe=>{if(!oe.trim()){G(!1);return}G(!0),S({status:"loading"});try{const Re=await vI(oe);v({items:Re,description:i("foundMatches",{count:Re.length,query:oe})}),Y("all"),S({status:"success"})}catch(Re){console.error("Search failed",Re),S({status:"error",message:"Search failed"})}};Ve.useEffect(()=>{s==="explorer"&&!D&&F(!1)},[l,h,s,D,t]);const W=oe=>{x(oe),a("explorer"),ae(oe)},pe=()=>{x(""),G(!1),s==="explorer"&&F(!1)},Ee=oe=>{e(oe),A(!1)},Ge=oe=>{switch(oe){case"zh":return"";case"vi":return"Ting Vit";case"en":return"English";default:return"Language"}},we=oe=>{switch(oe){case"vocabulary":return{label:i("vocab"),icon:b.jsx(id,{size:16})};case"characters":return{label:i("chars"),icon:b.jsx(od,{size:16})};case"grammar":return{label:i("grammar"),icon:b.jsx(ad,{size:16})};case"tasks":return{label:i("tasks"),icon:b.jsx(sd,{size:16})};case"topics":return{label:i("topics"),icon:b.jsx(rd,{size:16})};default:return{label:oe,icon:null}}};return b.jsxs("div",{className:"flex flex-col md:flex-row h-screen bg-paper font-sans overflow-hidden",children:[s==="explorer"&&b.jsx(yT,{currentLevel:l,onSelectLevel:oe=>{G(!1),x(""),c(oe)}}),b.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[b.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between shrink-0 z-20 gap-4",children:[b.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s==="explorer"&&b.jsx("button",{onClick:()=>a("home"),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Home",children:b.jsx(ZS,{size:20})}),b.jsxs("div",{className:"relative flex-1 max-w-xl",children:[b.jsx("button",{onClick:()=>{R.trim()&&(s==="home"&&a("explorer"),ae(R))},className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-hsk-red transition-colors",disabled:_.status==="loading",children:_.status==="loading"?b.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-hsk-red border-t-transparent"}):b.jsx(Ic,{size:18})}),b.jsx("input",{ref:O,type:"text",placeholder:i("searchPlaceholder"),value:R,onChange:oe=>x(oe.target.value),onKeyDown:oe=>{oe.key==="Enter"&&R.trim()&&(s==="home"&&a("explorer"),ae(R))},className:"w-full bg-gray-100 border-none rounded-full pl-10 pr-10 py-2 text-sm focus:ring-2 focus:ring-hsk-red/20 focus:bg-white transition-all outline-none text-ink placeholder-gray-500"}),R&&b.jsx("button",{onClick:pe,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b.jsx(pT,{size:16})})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs("button",{onClick:()=>A(!w),className:"flex items-center gap-2 px-3 py-2 text-sm font-bold text-ink hover:bg-gray-100 rounded-full transition-colors",children:[b.jsx(QS,{size:18}),b.jsx("span",{className:"hidden sm:inline",children:Ge(t)})]}),w&&b.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-xl border border-gray-100 py-1 z-50 animate-in fade-in slide-in-from-top-2",children:[b.jsxs("button",{onClick:()=>Ee("vi"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:["Ting Vit ",t==="vi"&&b.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]}),b.jsxs("button",{onClick:()=>Ee("zh"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:[" ",t==="zh"&&b.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]}),b.jsxs("button",{onClick:()=>Ee("en"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:["English ",t==="en"&&b.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]})]})]})]}),s==="home"?b.jsx(ST,{onNavigate:J,onSearch:W}):b.jsx("main",{className:"flex-1 overflow-y-auto w-full relative",children:b.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto",children:[!D&&b.jsx("div",{className:"mb-8 text-center md:text-left flex flex-col md:flex-row justify-between items-end",children:b.jsxs("div",{children:[b.jsxs("h2",{className:"text-3xl font-bold text-ink mb-2 font-serif",children:["HSK ",i("level")," ",l]}),b.jsx("p",{className:"text-gray-500",children:i("heroDesc")})]})}),!D&&b.jsx(vT,{currentCategory:h,onSelectCategory:g}),D&&b.jsx("div",{className:"mb-8",children:b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsx("h2",{className:"text-2xl font-bold text-ink",children:i("searchResults")}),(p==null?void 0:p.items)&&p.items.length>0&&b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsxs("button",{onClick:()=>Y("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${$==="all"?"bg-ink text-white shadow-md":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-gray-200"}`,children:[b.jsx(Ic,{size:16}),i("allResults")]}),Array.from(new Set(p.items.map(oe=>oe.section).filter(Boolean))).sort().map(oe=>{const Re=oe,{label:q,icon:K}=we(Re);return b.jsxs("button",{onClick:()=>Y(Re),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${$===Re?"bg-ink text-white shadow-md":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-gray-200"}`,children:[K,q]},Re)})]})]})}),_.status==="error"?b.jsxs("div",{className:"max-w-xl mx-auto text-center p-8 bg-red-50 rounded-2xl border border-red-100",children:[b.jsx(JS,{className:"w-10 h-10 text-red-500 mx-auto mb-4"}),b.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:i("loadingError")}),b.jsx("p",{className:"text-red-600 mb-6",children:_.message}),b.jsx("button",{onClick:()=>F(!0),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:i("tryAgain")})]}):b.jsx(_T,{data:D&&$!=="all"&&p?{...p,items:p.items.filter(oe=>oe.section===$)}:p,category:D?"search":h,isLoading:_.status==="loading",onRefresh:()=>F(!0)})]})})]})]})},Zv=document.getElementById("root");if(!Zv)throw new Error("Could not find root element to mount to");const SI=kS.createRoot(Zv);SI.render(b.jsx(bS.StrictMode,{children:b.jsx(mT,{children:b.jsx(_I,{})})}));
