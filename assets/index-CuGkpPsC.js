(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function Wy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bc={exports:{}},Zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function IS(){if(Pm)return Zo;Pm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:o,key:c,ref:a!==void 0?a:null,props:l}}return Zo.Fragment=e,Zo.jsx=i,Zo.jsxs=i,Zo}var Lm;function MS(){return Lm||(Lm=1,bc.exports=IS()),bc.exports}var E=MS(),Cc={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function kS(){if(Om)return me;Om=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,R={};function U(N,B,W){this.props=N,this.context=B,this.refs=R,this.updater=W||C}U.prototype.isReactComponent={},U.prototype.setState=function(N,B){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,B,"setState")},U.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function G(){}G.prototype=U.prototype;function P(N,B,W){this.props=N,this.context=B,this.refs=R,this.updater=W||C}var J=P.prototype=new G;J.constructor=P,x(J,U.prototype),J.isPureReactComponent=!0;var Q=Array.isArray;function Y(){}var K={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function j(N,B,W){var ne=W.ref;return{$$typeof:t,type:N,key:B,ref:ne!==void 0?ne:null,props:W}}function ge(N,B){return j(N.type,B,N.props)}function Ne(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function Ie(N){var B={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return B[W]})}var Re=/\/+/g;function _e(N,B){return typeof N=="object"&&N!==null&&N.key!=null?Ie(""+N.key):B.toString(36)}function X(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Y,Y):(N.status="pending",N.then(function(B){N.status==="pending"&&(N.status="fulfilled",N.value=B)},function(B){N.status==="pending"&&(N.status="rejected",N.reason=B)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function D(N,B,W,ne,pe){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var Me=!1;if(N===null)Me=!0;else switch(Se){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(N.$$typeof){case t:case e:Me=!0;break;case v:return Me=N._init,D(Me(N._payload),B,W,ne,pe)}}if(Me)return pe=pe(N),Me=ne===""?"."+_e(N,0):ne,Q(pe)?(W="",Me!=null&&(W=Me.replace(Re,"$&/")+"/"),D(pe,B,W,"",function(Ei){return Ei})):pe!=null&&(Ne(pe)&&(pe=ge(pe,W+(pe.key==null||N&&N.key===pe.key?"":(""+pe.key).replace(Re,"$&/")+"/")+Me)),B.push(pe)),1;Me=0;var ht=ne===""?".":ne+":";if(Q(N))for(var Ye=0;Ye<N.length;Ye++)ne=N[Ye],Se=ht+_e(ne,Ye),Me+=D(ne,B,W,Se,pe);else if(Ye=b(N),typeof Ye=="function")for(N=Ye.call(N),Ye=0;!(ne=N.next()).done;)ne=ne.value,Se=ht+_e(ne,Ye++),Me+=D(ne,B,W,Se,pe);else if(Se==="object"){if(typeof N.then=="function")return D(X(N),B,W,ne,pe);throw B=String(N),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Me}function $(N,B,W){if(N==null)return N;var ne=[],pe=0;return D(N,ne,"","",function(Se){return B.call(W,Se,pe++)}),ne}function ee(N){if(N._status===-1){var B=N._result;B=B(),B.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=B)}if(N._status===1)return N._result.default;throw N._result}var fe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},te={map:$,forEach:function(N,B,W){$(N,function(){B.apply(this,arguments)},W)},count:function(N){var B=0;return $(N,function(){B++}),B},toArray:function(N){return $(N,function(B){return B})||[]},only:function(N){if(!Ne(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return me.Activity=_,me.Children=te,me.Component=U,me.Fragment=i,me.Profiler=a,me.PureComponent=P,me.StrictMode=o,me.Suspense=g,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return K.H.useMemoCache(N)}},me.cache=function(N){return function(){return N.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(N,B,W){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ne=x({},N.props),pe=N.key;if(B!=null)for(Se in B.key!==void 0&&(pe=""+B.key),B)!ae.call(B,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&B.ref===void 0||(ne[Se]=B[Se]);var Se=arguments.length-2;if(Se===1)ne.children=W;else if(1<Se){for(var Me=Array(Se),ht=0;ht<Se;ht++)Me[ht]=arguments[ht+2];ne.children=Me}return j(N.type,pe,ne)},me.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},me.createElement=function(N,B,W){var ne,pe={},Se=null;if(B!=null)for(ne in B.key!==void 0&&(Se=""+B.key),B)ae.call(B,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(pe[ne]=B[ne]);var Me=arguments.length-2;if(Me===1)pe.children=W;else if(1<Me){for(var ht=Array(Me),Ye=0;Ye<Me;Ye++)ht[Ye]=arguments[Ye+2];pe.children=ht}if(N&&N.defaultProps)for(ne in Me=N.defaultProps,Me)pe[ne]===void 0&&(pe[ne]=Me[ne]);return j(N,Se,pe)},me.createRef=function(){return{current:null}},me.forwardRef=function(N){return{$$typeof:h,render:N}},me.isValidElement=Ne,me.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:ee}},me.memo=function(N,B){return{$$typeof:p,type:N,compare:B===void 0?null:B}},me.startTransition=function(N){var B=K.T,W={};K.T=W;try{var ne=N(),pe=K.S;pe!==null&&pe(W,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Y,fe)}catch(Se){fe(Se)}finally{B!==null&&W.types!==null&&(B.types=W.types),K.T=B}},me.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},me.use=function(N){return K.H.use(N)},me.useActionState=function(N,B,W){return K.H.useActionState(N,B,W)},me.useCallback=function(N,B){return K.H.useCallback(N,B)},me.useContext=function(N){return K.H.useContext(N)},me.useDebugValue=function(){},me.useDeferredValue=function(N,B){return K.H.useDeferredValue(N,B)},me.useEffect=function(N,B){return K.H.useEffect(N,B)},me.useEffectEvent=function(N){return K.H.useEffectEvent(N)},me.useId=function(){return K.H.useId()},me.useImperativeHandle=function(N,B,W){return K.H.useImperativeHandle(N,B,W)},me.useInsertionEffect=function(N,B){return K.H.useInsertionEffect(N,B)},me.useLayoutEffect=function(N,B){return K.H.useLayoutEffect(N,B)},me.useMemo=function(N,B){return K.H.useMemo(N,B)},me.useOptimistic=function(N,B){return K.H.useOptimistic(N,B)},me.useReducer=function(N,B,W){return K.H.useReducer(N,B,W)},me.useRef=function(N){return K.H.useRef(N)},me.useState=function(N){return K.H.useState(N)},me.useSyncExternalStore=function(N,B,W){return K.H.useSyncExternalStore(N,B,W)},me.useTransition=function(){return K.H.useTransition()},me.version="19.2.3",me}var qm;function pd(){return qm||(qm=1,Cc.exports=kS()),Cc.exports}var Te=pd();const DS=Wy(Te);var Ac={exports:{}},er={},xc={exports:{}},Rc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function US(){return Gm||(Gm=1,(function(t){function e(D,$){var ee=D.length;D.push($);e:for(;0<ee;){var fe=ee-1>>>1,te=D[fe];if(0<a(te,$))D[fe]=$,D[ee]=te,ee=fe;else break e}}function i(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var $=D[0],ee=D.pop();if(ee!==$){D[0]=ee;e:for(var fe=0,te=D.length,N=te>>>1;fe<N;){var B=2*(fe+1)-1,W=D[B],ne=B+1,pe=D[ne];if(0>a(W,ee))ne<te&&0>a(pe,W)?(D[fe]=pe,D[ne]=ee,fe=ne):(D[fe]=W,D[B]=ee,fe=B);else if(ne<te&&0>a(pe,ee))D[fe]=pe,D[ne]=ee,fe=ne;else break e}}return $}function a(D,$){var ee=D.sortIndex-$.sortIndex;return ee!==0?ee:D.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,_=null,S=3,b=!1,C=!1,x=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function J(D){for(var $=i(p);$!==null;){if($.callback===null)o(p);else if($.startTime<=D)o(p),$.sortIndex=$.expirationTime,e(g,$);else break;$=i(p)}}function Q(D){if(x=!1,J(D),!C)if(i(g)!==null)C=!0,Y||(Y=!0,Ie());else{var $=i(p);$!==null&&X(Q,$.startTime-D)}}var Y=!1,K=-1,ae=5,j=-1;function ge(){return R?!0:!(t.unstable_now()-j<ae)}function Ne(){if(R=!1,Y){var D=t.unstable_now();j=D;var $=!0;try{e:{C=!1,x&&(x=!1,G(K),K=-1),b=!0;var ee=S;try{t:{for(J(D),_=i(g);_!==null&&!(_.expirationTime>D&&ge());){var fe=_.callback;if(typeof fe=="function"){_.callback=null,S=_.priorityLevel;var te=fe(_.expirationTime<=D);if(D=t.unstable_now(),typeof te=="function"){_.callback=te,J(D),$=!0;break t}_===i(g)&&o(g),J(D)}else o(g);_=i(g)}if(_!==null)$=!0;else{var N=i(p);N!==null&&X(Q,N.startTime-D),$=!1}}break e}finally{_=null,S=ee,b=!1}$=void 0}}finally{$?Ie():Y=!1}}}var Ie;if(typeof P=="function")Ie=function(){P(Ne)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,_e=Re.port2;Re.port1.onmessage=Ne,Ie=function(){_e.postMessage(null)}}else Ie=function(){U(Ne,0)};function X(D,$){K=U(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(D){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var ee=S;S=$;try{return D()}finally{S=ee}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ee=S;S=D;try{return $()}finally{S=ee}},t.unstable_scheduleCallback=function(D,$,ee){var fe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?fe+ee:fe):ee=fe,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ee+te,D={id:v++,callback:$,priorityLevel:D,startTime:ee,expirationTime:te,sortIndex:-1},ee>fe?(D.sortIndex=ee,e(p,D),i(g)===null&&D===i(p)&&(x?(G(K),K=-1):x=!0,X(Q,ee-fe))):(D.sortIndex=te,e(g,D),C||b||(C=!0,Y||(Y=!0,Ie()))),D},t.unstable_shouldYield=ge,t.unstable_wrapCallback=function(D){var $=S;return function(){var ee=S;S=$;try{return D.apply(this,arguments)}finally{S=ee}}}})(Rc)),Rc}var Hm;function PS(){return Hm||(Hm=1,xc.exports=US()),xc.exports}var Nc={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function LS(){if(Bm)return Et;Bm=1;var t=pd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Et.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},Et.flushSync=function(g){var p=c.T,v=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=p,o.p=v,o.d.f()}},Et.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},Et.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},Et.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:b}):v==="script"&&o.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},Et.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);o.d.L(g,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},Et.requestFormReset=function(g){o.d.r(g)},Et.unstable_batchedUpdates=function(g,p){return g(p)},Et.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Et.useFormStatus=function(){return c.H.useHostTransitionStatus()},Et.version="19.2.3",Et}var Vm;function OS(){if(Vm)return Nc.exports;Vm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Nc.exports=LS(),Nc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function qS(){if(zm)return er;zm=1;var t=PS(),e=pd(),i=OS();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(o(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var r=n,u=s;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return g(m),n;if(y===u)return g(m),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=m,u=y;else{for(var T=!1,w=m.child;w;){if(w===r){T=!0,r=m,u=y;break}if(w===u){T=!0,u=m,r=y;break}w=w.sibling}if(!T){for(w=y.child;w;){if(w===r){T=!0,r=y,u=m;break}if(w===u){T=!0,u=y,r=m;break}w=w.sibling}if(!T)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),P=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function Ie(n){return n===null||typeof n!="object"?null:(n=Ne&&n[Ne]||n["@@iterator"],typeof n=="function"?n:null)}var Re=Symbol.for("react.client.reference");function _e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Re?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case U:return"Profiler";case R:return"StrictMode";case Q:return"Suspense";case Y:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case P:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case K:return s=n.displayName||null,s!==null?s:_e(n.type)||"Memo";case ae:s=n._payload,n=n._init;try{return _e(n(s))}catch{}}return null}var X=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},fe=[],te=-1;function N(n){return{current:n}}function B(n){0>te||(n.current=fe[te],fe[te]=null,te--)}function W(n,s){te++,fe[te]=n.current,n.current=s}var ne=N(null),pe=N(null),Se=N(null),Me=N(null);function ht(n,s){switch(W(Se,s),W(pe,n),W(ne,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?sm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=sm(s),n=om(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(ne),W(ne,n)}function Ye(){B(ne),B(pe),B(Se)}function Ei(n){n.memoizedState!==null&&W(Me,n);var s=ne.current,r=om(s,n.type);s!==r&&(W(pe,n),W(ne,r))}function $n(n){pe.current===n&&(B(ne),B(pe)),Me.current===n&&(B(Me),Xo._currentValue=ee)}var so,gr;function _n(n){if(so===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);so=s&&s[1]||"",gr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+so+n+gr}var M=!1;function se(n,s){if(!n||M)return"";M=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(H){var q=H}Reflect.construct(n,[],F)}else{try{F.call()}catch(H){q=H}n.call(F.prototype)}}else{try{throw Error()}catch(H){q=H}(F=n())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],w=y[1];if(T&&w){var A=T.split(`
`),O=w.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<O.length&&!O[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===O.length)for(u=A.length-1,m=O.length-1;1<=u&&0<=m&&A[u]!==O[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==O[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==O[m]){var V=`
`+A[u].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=u&&0<=m);break}}}finally{M=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?_n(r):""}function Le(n,s){switch(n.tag){case 26:case 27:case 5:return _n(n.type);case 16:return _n("Lazy");case 13:return n.child!==s&&s!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return se(n.type,!1);case 11:return se(n.type.render,!1);case 1:return se(n.type,!0);case 31:return _n("Activity");default:return""}}function Oe(n){try{var s="",r=null;do s+=Le(n,r),r=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var rt=Object.prototype.hasOwnProperty,Fn=t.unstable_scheduleCallback,Jn=t.unstable_cancelCallback,Wi=t.unstable_shouldYield,oo=t.unstable_requestPaint,pt=t.unstable_now,Sn=t.unstable_getCurrentPriorityLevel,Pd=t.unstable_ImmediatePriority,Ld=t.unstable_UserBlockingPriority,yr=t.unstable_NormalPriority,d0=t.unstable_LowPriority,Od=t.unstable_IdlePriority,f0=t.log,h0=t.unstable_setDisableYieldValue,ro=null,Pt=null;function Kn(n){if(typeof f0=="function"&&h0(n),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(ro,n)}catch{}}var Lt=Math.clz32?Math.clz32:g0,p0=Math.log,m0=Math.LN2;function g0(n){return n>>>=0,n===0?32:31-(p0(n)/m0|0)|0}var vr=256,_r=262144,Sr=4194304;function wi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Tr(n,s,r){var u=n.pendingLanes;if(u===0)return 0;var m=0,y=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~y,u!==0?m=wi(u):(T&=w,T!==0?m=wi(T):r||(r=w&~n,r!==0&&(m=wi(r))))):(w=u&~y,w!==0?m=wi(w):T!==0?m=wi(T):r||(r=u&~n,r!==0&&(m=wi(r)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:m}function ao(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function y0(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qd(){var n=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),n}function fl(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function lo(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function v0(n,s,r,u,m,y){var T=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var w=n.entanglements,A=n.expirationTimes,O=n.hiddenUpdates;for(r=T&~r;0<r;){var V=31-Lt(r),F=1<<V;w[V]=0,A[V]=-1;var q=O[V];if(q!==null)for(O[V]=null,V=0;V<q.length;V++){var H=q[V];H!==null&&(H.lane&=-536870913)}r&=~F}u!==0&&Gd(n,u,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(T&~s))}function Gd(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Lt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function Hd(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var u=31-Lt(r),m=1<<u;m&s|n[u]&s&&(n[u]|=s),r&=~m}}function Bd(n,s){var r=s&-s;return r=(r&42)!==0?1:hl(r),(r&(n.suspendedLanes|s))!==0?0:r}function hl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Vd(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:Rm(n.type))}function zd(n,s){var r=$.p;try{return $.p=n,s()}finally{$.p=r}}var Yn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Yn,Rt="__reactProps$"+Yn,ji="__reactContainer$"+Yn,ml="__reactEvents$"+Yn,_0="__reactListeners$"+Yn,S0="__reactHandles$"+Yn,$d="__reactResources$"+Yn,uo="__reactMarker$"+Yn;function gl(n){delete n[mt],delete n[Rt],delete n[ml],delete n[_0],delete n[S0]}function Zi(n){var s=n[mt];if(s)return s;for(var r=n.parentNode;r;){if(s=r[ji]||r[mt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=fm(n);n!==null;){if(r=n[mt])return r;n=fm(n)}return s}n=r,r=n.parentNode}return null}function es(n){if(n=n[mt]||n[ji]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function co(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function ts(n){var s=n[$d];return s||(s=n[$d]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ct(n){n[uo]=!0}var Fd=new Set,Jd={};function bi(n,s){ns(n,s),ns(n+"Capture",s)}function ns(n,s){for(Jd[n]=s,n=0;n<s.length;n++)Fd.add(s[n])}var T0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Yd={};function E0(n){return rt.call(Yd,n)?!0:rt.call(Kd,n)?!1:T0.test(n)?Yd[n]=!0:(Kd[n]=!0,!1)}function Er(n,s,r){if(E0(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function wr(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function Tn(n,s,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+u)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function w0(n,s,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function yl(n){if(!n._valueTracker){var s=Xd(n)?"checked":"value";n._valueTracker=w0(n,s,""+n[s])}}function Qd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return n&&(u=Xd(n)?n.checked?"true":"false":n.value),n=u,n!==r?(s.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var b0=/[\n"\\]/g;function Yt(n){return n.replace(b0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function vl(n,s,r,u,m,y,T,w){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),s!=null?T==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Kt(s)):n.value!==""+Kt(s)&&(n.value=""+Kt(s)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),s!=null?_l(n,T,Kt(s)):r!=null?_l(n,T,Kt(r)):u!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Kt(w):n.removeAttribute("name")}function Wd(n,s,r,u,m,y,T,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){yl(n);return}r=r!=null?""+Kt(r):"",s=s!=null?""+Kt(s):r,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),yl(n)}function _l(n,s,r){s==="number"&&br(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function is(n,s,r,u){if(n=n.options,s){s={};for(var m=0;m<r.length;m++)s["$"+r[m]]=!0;for(r=0;r<n.length;r++)m=s.hasOwnProperty("$"+n[r].value),n[r].selected!==m&&(n[r].selected=m),m&&u&&(n[r].defaultSelected=!0)}else{for(r=""+Kt(r),s=null,m=0;m<n.length;m++){if(n[m].value===r){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function jd(n,s,r){if(s!=null&&(s=""+Kt(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+Kt(r):""}function Zd(n,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(X(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=Kt(s),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),yl(n)}function ss(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var C0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ef(n,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,r):typeof r!="number"||r===0||C0.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function tf(n,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&r[m]!==u&&ef(n,m,u)}else for(var y in s)s.hasOwnProperty(y)&&ef(n,y,s[y])}function Sl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cr(n){return x0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function En(){}var Tl=null;function El(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var os=null,rs=null;function nf(n){var s=es(n);if(s&&(n=s.stateNode)){var r=n[Rt]||null;e:switch(n=s.stateNode,s.type){case"input":if(vl(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Yt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==n&&u.form===n.form){var m=u[Rt]||null;if(!m)throw Error(o(90));vl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===n.form&&Qd(u)}break e;case"textarea":jd(n,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&is(n,!!r.multiple,s,!1)}}}var wl=!1;function sf(n,s,r){if(wl)return n(s,r);wl=!0;try{var u=n(s);return u}finally{if(wl=!1,(os!==null||rs!==null)&&(fa(),os&&(s=os,n=rs,rs=os=null,nf(s),n)))for(s=0;s<n.length;s++)nf(n[s])}}function fo(n,s){var r=n.stateNode;if(r===null)return null;var u=r[Rt]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bl=!1;if(wn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){bl=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{bl=!1}var Xn=null,Cl=null,Ar=null;function of(){if(Ar)return Ar;var n,s=Cl,r=s.length,u,m="value"in Xn?Xn.value:Xn.textContent,y=m.length;for(n=0;n<r&&s[n]===m[n];n++);var T=r-n;for(u=1;u<=T&&s[r-u]===m[y-u];u++);return Ar=m.slice(n,1<u?1-u:void 0)}function xr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Rr(){return!0}function rf(){return!1}function Nt(n){function s(r,u,m,y,T){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(r=n[w],this[w]=r?r(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Rr:rf,this.isPropagationStopped=rf,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),s}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nr=Nt(Ci),po=_({},Ci,{view:0,detail:0}),R0=Nt(po),Al,xl,mo,Ir=_({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mo&&(mo&&n.type==="mousemove"?(Al=n.screenX-mo.screenX,xl=n.screenY-mo.screenY):xl=Al=0,mo=n),Al)},movementY:function(n){return"movementY"in n?n.movementY:xl}}),af=Nt(Ir),N0=_({},Ir,{dataTransfer:0}),I0=Nt(N0),M0=_({},po,{relatedTarget:0}),Rl=Nt(M0),k0=_({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),D0=Nt(k0),U0=_({},Ci,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),P0=Nt(U0),L0=_({},Ci,{data:0}),lf=Nt(L0),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=G0[n])?!!s[n]:!1}function Nl(){return H0}var B0=_({},po,{key:function(n){if(n.key){var s=O0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(n){return n.type==="keypress"?xr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),V0=Nt(B0),z0=_({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uf=Nt(z0),$0=_({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),F0=Nt($0),J0=_({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),K0=Nt(J0),Y0=_({},Ir,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X0=Nt(Y0),Q0=_({},Ci,{newState:0,oldState:0}),W0=Nt(Q0),j0=[9,13,27,32],Il=wn&&"CompositionEvent"in window,go=null;wn&&"documentMode"in document&&(go=document.documentMode);var Z0=wn&&"TextEvent"in window&&!go,cf=wn&&(!Il||go&&8<go&&11>=go),df=" ",ff=!1;function hf(n,s){switch(n){case"keyup":return j0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var as=!1;function e_(n,s){switch(n){case"compositionend":return pf(s);case"keypress":return s.which!==32?null:(ff=!0,df);case"textInput":return n=s.data,n===df&&ff?null:n;default:return null}}function t_(n,s){if(as)return n==="compositionend"||!Il&&hf(n,s)?(n=of(),Ar=Cl=Xn=null,as=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cf&&s.locale!=="ko"?null:s.data;default:return null}}var n_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!n_[n.type]:s==="textarea"}function gf(n,s,r,u){os?rs?rs.push(u):rs=[u]:os=u,s=_a(s,"onChange"),0<s.length&&(r=new Nr("onChange","change",null,r,u),n.push({event:r,listeners:s}))}var yo=null,vo=null;function i_(n){jp(n,0)}function Mr(n){var s=co(n);if(Qd(s))return n}function yf(n,s){if(n==="change")return s}var vf=!1;if(wn){var Ml;if(wn){var kl="oninput"in document;if(!kl){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),kl=typeof _f.oninput=="function"}Ml=kl}else Ml=!1;vf=Ml&&(!document.documentMode||9<document.documentMode)}function Sf(){yo&&(yo.detachEvent("onpropertychange",Tf),vo=yo=null)}function Tf(n){if(n.propertyName==="value"&&Mr(vo)){var s=[];gf(s,vo,n,El(n)),sf(i_,s)}}function s_(n,s,r){n==="focusin"?(Sf(),yo=s,vo=r,yo.attachEvent("onpropertychange",Tf)):n==="focusout"&&Sf()}function o_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Mr(vo)}function r_(n,s){if(n==="click")return Mr(s)}function a_(n,s){if(n==="input"||n==="change")return Mr(s)}function l_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ot=typeof Object.is=="function"?Object.is:l_;function _o(n,s){if(Ot(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!rt.call(s,m)||!Ot(n[m],s[m]))return!1}return!0}function Ef(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wf(n,s){var r=Ef(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=s&&u>=s)return{node:r,offset:s-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ef(r)}}function bf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?bf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Cf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=br(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=br(n.document)}return s}function Dl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var u_=wn&&"documentMode"in document&&11>=document.documentMode,ls=null,Ul=null,So=null,Pl=!1;function Af(n,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pl||ls==null||ls!==br(u)||(u=ls,"selectionStart"in u&&Dl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),So&&_o(So,u)||(So=u,u=_a(Ul,"onSelect"),0<u.length&&(s=new Nr("onSelect","select",null,s,r),n.push({event:s,listeners:u}),s.target=ls)))}function Ai(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var us={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionrun:Ai("Transition","TransitionRun"),transitionstart:Ai("Transition","TransitionStart"),transitioncancel:Ai("Transition","TransitionCancel"),transitionend:Ai("Transition","TransitionEnd")},Ll={},xf={};wn&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function xi(n){if(Ll[n])return Ll[n];if(!us[n])return n;var s=us[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in xf)return Ll[n]=s[r];return n}var Rf=xi("animationend"),Nf=xi("animationiteration"),If=xi("animationstart"),c_=xi("transitionrun"),d_=xi("transitionstart"),f_=xi("transitioncancel"),Mf=xi("transitionend"),kf=new Map,Ol="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ol.push("scrollEnd");function rn(n,s){kf.set(n,s),bi(s,[n])}var kr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Xt=[],cs=0,ql=0;function Dr(){for(var n=cs,s=ql=cs=0;s<n;){var r=Xt[s];Xt[s++]=null;var u=Xt[s];Xt[s++]=null;var m=Xt[s];Xt[s++]=null;var y=Xt[s];if(Xt[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&Df(r,m,y)}}function Ur(n,s,r,u){Xt[cs++]=n,Xt[cs++]=s,Xt[cs++]=r,Xt[cs++]=u,ql|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Gl(n,s,r,u){return Ur(n,s,r,u),Pr(n)}function Ri(n,s){return Ur(n,null,null,s),Pr(n)}function Df(n,s,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var m=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&s!==null&&(m=31-Lt(r),n=y.hiddenUpdates,u=n[m],u===null?n[m]=[s]:u.push(s),s.lane=r|536870912),y):null}function Pr(n){if(50<Vo)throw Vo=0,Yu=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ds={};function h_(n,s,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(n,s,r,u){return new h_(n,s,r,u)}function Hl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bn(n,s){var r=n.alternate;return r===null?(r=qt(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Uf(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Lr(n,s,r,u,m,y){var T=0;if(u=n,typeof n=="function")Hl(n)&&(T=1);else if(typeof n=="string")T=vS(n,r,ne.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=qt(31,r,s,m),n.elementType=j,n.lanes=y,n;case x:return Ni(r.children,m,y,s);case R:T=8,m|=24;break;case U:return n=qt(12,r,s,m|2),n.elementType=U,n.lanes=y,n;case Q:return n=qt(13,r,s,m),n.elementType=Q,n.lanes=y,n;case Y:return n=qt(19,r,s,m),n.elementType=Y,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:T=10;break e;case G:T=9;break e;case J:T=11;break e;case K:T=14;break e;case ae:T=16,u=null;break e}T=29,r=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=qt(T,r,s,m),s.elementType=n,s.type=u,s.lanes=y,s}function Ni(n,s,r,u){return n=qt(7,n,u,s),n.lanes=r,n}function Bl(n,s,r){return n=qt(6,n,null,s),n.lanes=r,n}function Pf(n){var s=qt(18,null,null,0);return s.stateNode=n,s}function Vl(n,s,r){return s=qt(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Lf=new WeakMap;function Qt(n,s){if(typeof n=="object"&&n!==null){var r=Lf.get(n);return r!==void 0?r:(s={value:n,source:s,stack:Oe(s)},Lf.set(n,s),s)}return{value:n,source:s,stack:Oe(s)}}var fs=[],hs=0,Or=null,To=0,Wt=[],jt=0,Qn=null,mn=1,gn="";function Cn(n,s){fs[hs++]=To,fs[hs++]=Or,Or=n,To=s}function Of(n,s,r){Wt[jt++]=mn,Wt[jt++]=gn,Wt[jt++]=Qn,Qn=n;var u=mn;n=gn;var m=32-Lt(u)-1;u&=~(1<<m),r+=1;var y=32-Lt(s)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,mn=1<<32-Lt(s)+m|r<<m|u,gn=y+n}else mn=1<<y|r<<m|u,gn=n}function zl(n){n.return!==null&&(Cn(n,1),Of(n,1,0))}function $l(n){for(;n===Or;)Or=fs[--hs],fs[hs]=null,To=fs[--hs],fs[hs]=null;for(;n===Qn;)Qn=Wt[--jt],Wt[jt]=null,gn=Wt[--jt],Wt[jt]=null,mn=Wt[--jt],Wt[jt]=null}function qf(n,s){Wt[jt++]=mn,Wt[jt++]=gn,Wt[jt++]=Qn,mn=s.id,gn=s.overflow,Qn=n}var gt=null,Fe=null,Ae=!1,Wn=null,Zt=!1,Fl=Error(o(519));function jn(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eo(Qt(s,n)),Fl}function Gf(n){var s=n.stateNode,r=n.type,u=n.memoizedProps;switch(s[mt]=n,s[Rt]=u,r){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(r=0;r<$o.length;r++)we($o[r],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":we("invalid",s),Wd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":we("invalid",s);break;case"textarea":we("invalid",s),Zd(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||nm(s.textContent,r)?(u.popover!=null&&(we("beforetoggle",s),we("toggle",s)),u.onScroll!=null&&we("scroll",s),u.onScrollEnd!=null&&we("scrollend",s),u.onClick!=null&&(s.onclick=En),s=!0):s=!1,s||jn(n,!0)}function Hf(n){for(gt=n.return;gt;)switch(gt.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:gt=gt.return}}function ps(n){if(n!==gt)return!1;if(!Ae)return Hf(n),Ae=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||uc(n.type,n.memoizedProps)),r=!r),r&&Fe&&jn(n),Hf(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Fe=dm(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Fe=dm(n)}else s===27?(s=Fe,fi(n.type)?(n=pc,pc=null,Fe=n):Fe=s):Fe=gt?tn(n.stateNode.nextSibling):null;return!0}function Ii(){Fe=gt=null,Ae=!1}function Jl(){var n=Wn;return n!==null&&(Dt===null?Dt=n:Dt.push.apply(Dt,n),Wn=null),n}function Eo(n){Wn===null?Wn=[n]:Wn.push(n)}var Kl=N(null),Mi=null,An=null;function Zn(n,s,r){W(Kl,s._currentValue),s._currentValue=r}function xn(n){n._currentValue=Kl.current,B(Kl)}function Yl(n,s,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===r)break;n=n.return}}function Xl(n,s,r,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=m;for(var A=0;A<s.length;A++)if(w.context===s[A]){y.lanes|=r,w=y.alternate,w!==null&&(w.lanes|=r),Yl(y.return,r,n),u||(T=null);break e}y=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(o(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),Yl(T,r,n),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===n){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function ms(n,s,r,u){n=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var w=m.type;Ot(m.pendingProps.value,T.value)||(n!==null?n.push(w):n=[w])}}else if(m===Me.current){if(T=m.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Xo):n=[Xo])}m=m.return}n!==null&&Xl(s,n,r,u),s.flags|=262144}function qr(n){for(n=n.firstContext;n!==null;){if(!Ot(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ki(n){Mi=n,An=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yt(n){return Bf(Mi,n)}function Gr(n,s){return Mi===null&&ki(n),Bf(n,s)}function Bf(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},An===null){if(n===null)throw Error(o(308));An=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else An=An.next=s;return r}var p_=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},m_=t.unstable_scheduleCallback,g_=t.unstable_NormalPriority,tt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ql(){return{controller:new p_,data:new Map,refCount:0}}function wo(n){n.refCount--,n.refCount===0&&m_(g_,function(){n.controller.abort()})}var bo=null,Wl=0,gs=0,ys=null;function y_(n,s){if(bo===null){var r=bo=[];Wl=0,gs=ec(),ys={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Wl++,s.then(Vf,Vf),s}function Vf(){if(--Wl===0&&bo!==null){ys!==null&&(ys.status="fulfilled");var n=bo;bo=null,gs=0,ys=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function v_(n,s){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<r.length;m++)(0,r[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var zf=D.S;D.S=function(n,s){Ap=pt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&y_(n,s),zf!==null&&zf(n,s)};var Di=N(null);function jl(){var n=Di.current;return n!==null?n:ze.pooledCache}function Hr(n,s){s===null?W(Di,Di.current):W(Di,s.pool)}function $f(){var n=jl();return n===null?null:{parent:tt._currentValue,pool:n}}var vs=Error(o(460)),Zl=Error(o(474)),Br=Error(o(542)),Vr={then:function(){}};function Ff(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Jf(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(En,En),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yf(n),n;default:if(typeof s.status=="string")s.then(En,En);else{if(n=ze,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yf(n),n}throw Pi=s,vs}}function Ui(n){try{var s=n._init;return s(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Pi=r,vs):r}}var Pi=null;function Kf(){if(Pi===null)throw Error(o(459));var n=Pi;return Pi=null,n}function Yf(n){if(n===vs||n===Br)throw Error(o(483))}var _s=null,Co=0;function zr(n){var s=Co;return Co+=1,_s===null&&(_s=[]),Jf(_s,n,s)}function Ao(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function $r(n,s){throw s.$$typeof===S?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Xf(n){function s(k,I){if(n){var L=k.deletions;L===null?(k.deletions=[I],k.flags|=16):L.push(I)}}function r(k,I){if(!n)return null;for(;I!==null;)s(k,I),I=I.sibling;return null}function u(k){for(var I=new Map;k!==null;)k.key!==null?I.set(k.key,k):I.set(k.index,k),k=k.sibling;return I}function m(k,I){return k=bn(k,I),k.index=0,k.sibling=null,k}function y(k,I,L){return k.index=L,n?(L=k.alternate,L!==null?(L=L.index,L<I?(k.flags|=67108866,I):L):(k.flags|=67108866,I)):(k.flags|=1048576,I)}function T(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function w(k,I,L,z){return I===null||I.tag!==6?(I=Bl(L,k.mode,z),I.return=k,I):(I=m(I,L),I.return=k,I)}function A(k,I,L,z){var le=L.type;return le===x?V(k,I,L.props.children,z,L.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ae&&Ui(le)===I.type)?(I=m(I,L.props),Ao(I,L),I.return=k,I):(I=Lr(L.type,L.key,L.props,null,k.mode,z),Ao(I,L),I.return=k,I)}function O(k,I,L,z){return I===null||I.tag!==4||I.stateNode.containerInfo!==L.containerInfo||I.stateNode.implementation!==L.implementation?(I=Vl(L,k.mode,z),I.return=k,I):(I=m(I,L.children||[]),I.return=k,I)}function V(k,I,L,z,le){return I===null||I.tag!==7?(I=Ni(L,k.mode,z,le),I.return=k,I):(I=m(I,L),I.return=k,I)}function F(k,I,L){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Bl(""+I,k.mode,L),I.return=k,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return L=Lr(I.type,I.key,I.props,null,k.mode,L),Ao(L,I),L.return=k,L;case C:return I=Vl(I,k.mode,L),I.return=k,I;case ae:return I=Ui(I),F(k,I,L)}if(X(I)||Ie(I))return I=Ni(I,k.mode,L,null),I.return=k,I;if(typeof I.then=="function")return F(k,zr(I),L);if(I.$$typeof===P)return F(k,Gr(k,I),L);$r(k,I)}return null}function q(k,I,L,z){var le=I!==null?I.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return le!==null?null:w(k,I,""+L,z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return L.key===le?A(k,I,L,z):null;case C:return L.key===le?O(k,I,L,z):null;case ae:return L=Ui(L),q(k,I,L,z)}if(X(L)||Ie(L))return le!==null?null:V(k,I,L,z,null);if(typeof L.then=="function")return q(k,I,zr(L),z);if(L.$$typeof===P)return q(k,I,Gr(k,L),z);$r(k,L)}return null}function H(k,I,L,z,le){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return k=k.get(L)||null,w(I,k,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return k=k.get(z.key===null?L:z.key)||null,A(I,k,z,le);case C:return k=k.get(z.key===null?L:z.key)||null,O(I,k,z,le);case ae:return z=Ui(z),H(k,I,L,z,le)}if(X(z)||Ie(z))return k=k.get(L)||null,V(I,k,z,le,null);if(typeof z.then=="function")return H(k,I,L,zr(z),le);if(z.$$typeof===P)return H(k,I,L,Gr(I,z),le);$r(I,z)}return null}function ie(k,I,L,z){for(var le=null,ke=null,oe=I,ve=I=0,Ce=null;oe!==null&&ve<L.length;ve++){oe.index>ve?(Ce=oe,oe=null):Ce=oe.sibling;var De=q(k,oe,L[ve],z);if(De===null){oe===null&&(oe=Ce);break}n&&oe&&De.alternate===null&&s(k,oe),I=y(De,I,ve),ke===null?le=De:ke.sibling=De,ke=De,oe=Ce}if(ve===L.length)return r(k,oe),Ae&&Cn(k,ve),le;if(oe===null){for(;ve<L.length;ve++)oe=F(k,L[ve],z),oe!==null&&(I=y(oe,I,ve),ke===null?le=oe:ke.sibling=oe,ke=oe);return Ae&&Cn(k,ve),le}for(oe=u(oe);ve<L.length;ve++)Ce=H(oe,k,ve,L[ve],z),Ce!==null&&(n&&Ce.alternate!==null&&oe.delete(Ce.key===null?ve:Ce.key),I=y(Ce,I,ve),ke===null?le=Ce:ke.sibling=Ce,ke=Ce);return n&&oe.forEach(function(yi){return s(k,yi)}),Ae&&Cn(k,ve),le}function ue(k,I,L,z){if(L==null)throw Error(o(151));for(var le=null,ke=null,oe=I,ve=I=0,Ce=null,De=L.next();oe!==null&&!De.done;ve++,De=L.next()){oe.index>ve?(Ce=oe,oe=null):Ce=oe.sibling;var yi=q(k,oe,De.value,z);if(yi===null){oe===null&&(oe=Ce);break}n&&oe&&yi.alternate===null&&s(k,oe),I=y(yi,I,ve),ke===null?le=yi:ke.sibling=yi,ke=yi,oe=Ce}if(De.done)return r(k,oe),Ae&&Cn(k,ve),le;if(oe===null){for(;!De.done;ve++,De=L.next())De=F(k,De.value,z),De!==null&&(I=y(De,I,ve),ke===null?le=De:ke.sibling=De,ke=De);return Ae&&Cn(k,ve),le}for(oe=u(oe);!De.done;ve++,De=L.next())De=H(oe,k,ve,De.value,z),De!==null&&(n&&De.alternate!==null&&oe.delete(De.key===null?ve:De.key),I=y(De,I,ve),ke===null?le=De:ke.sibling=De,ke=De);return n&&oe.forEach(function(NS){return s(k,NS)}),Ae&&Cn(k,ve),le}function Ve(k,I,L,z){if(typeof L=="object"&&L!==null&&L.type===x&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case b:e:{for(var le=L.key;I!==null;){if(I.key===le){if(le=L.type,le===x){if(I.tag===7){r(k,I.sibling),z=m(I,L.props.children),z.return=k,k=z;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ae&&Ui(le)===I.type){r(k,I.sibling),z=m(I,L.props),Ao(z,L),z.return=k,k=z;break e}r(k,I);break}else s(k,I);I=I.sibling}L.type===x?(z=Ni(L.props.children,k.mode,z,L.key),z.return=k,k=z):(z=Lr(L.type,L.key,L.props,null,k.mode,z),Ao(z,L),z.return=k,k=z)}return T(k);case C:e:{for(le=L.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===L.containerInfo&&I.stateNode.implementation===L.implementation){r(k,I.sibling),z=m(I,L.children||[]),z.return=k,k=z;break e}else{r(k,I);break}else s(k,I);I=I.sibling}z=Vl(L,k.mode,z),z.return=k,k=z}return T(k);case ae:return L=Ui(L),Ve(k,I,L,z)}if(X(L))return ie(k,I,L,z);if(Ie(L)){if(le=Ie(L),typeof le!="function")throw Error(o(150));return L=le.call(L),ue(k,I,L,z)}if(typeof L.then=="function")return Ve(k,I,zr(L),z);if(L.$$typeof===P)return Ve(k,I,Gr(k,L),z);$r(k,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,I!==null&&I.tag===6?(r(k,I.sibling),z=m(I,L),z.return=k,k=z):(r(k,I),z=Bl(L,k.mode,z),z.return=k,k=z),T(k)):r(k,I)}return function(k,I,L,z){try{Co=0;var le=Ve(k,I,L,z);return _s=null,le}catch(oe){if(oe===vs||oe===Br)throw oe;var ke=qt(29,oe,null,k.mode);return ke.lanes=z,ke.return=k,ke}finally{}}}var Li=Xf(!0),Qf=Xf(!1),ei=!1;function eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ti(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ni(n,s,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Pr(n),Df(n,null,r),s}return Ur(n,u,s,r),Pr(n)}function xo(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,Hd(n,r)}}function nu(n,s){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?m=y=s:y=y.next=s}else m=y=s;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var iu=!1;function Ro(){if(iu){var n=ys;if(n!==null)throw n}}function No(n,s,r,u){iu=!1;var m=n.updateQueue;ei=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var A=w,O=A.next;A.next=null,T===null?y=O:T.next=O,T=A;var V=n.alternate;V!==null&&(V=V.updateQueue,w=V.lastBaseUpdate,w!==T&&(w===null?V.firstBaseUpdate=O:w.next=O,V.lastBaseUpdate=A))}if(y!==null){var F=m.baseState;T=0,V=O=A=null,w=y;do{var q=w.lane&-536870913,H=q!==w.lane;if(H?(be&q)===q:(u&q)===q){q!==0&&q===gs&&(iu=!0),V!==null&&(V=V.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ie=n,ue=w;q=s;var Ve=r;switch(ue.tag){case 1:if(ie=ue.payload,typeof ie=="function"){F=ie.call(Ve,F,q);break e}F=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ue.payload,q=typeof ie=="function"?ie.call(Ve,F,q):ie,q==null)break e;F=_({},F,q);break e;case 2:ei=!0}}q=w.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=m.callbacks,H===null?m.callbacks=[q]:H.push(q))}else H={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},V===null?(O=V=H,A=F):V=V.next=H,T|=q;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;H=w,w=H.next,H.next=null,m.lastBaseUpdate=H,m.shared.pending=null}}while(!0);V===null&&(A=F),m.baseState=A,m.firstBaseUpdate=O,m.lastBaseUpdate=V,y===null&&(m.shared.lanes=0),ai|=T,n.lanes=T,n.memoizedState=F}}function Wf(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function jf(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Wf(r[n],s)}var Ss=N(null),Fr=N(0);function Zf(n,s){n=Ln,W(Fr,n),W(Ss,s),Ln=n|s.baseLanes}function su(){W(Fr,Ln),W(Ss,Ss.current)}function ou(){Ln=Fr.current,B(Ss),B(Fr)}var Gt=N(null),en=null;function ii(n){var s=n.alternate;W(Ze,Ze.current&1),W(Gt,n),en===null&&(s===null||Ss.current!==null||s.memoizedState!==null)&&(en=n)}function ru(n){W(Ze,Ze.current),W(Gt,n),en===null&&(en=n)}function eh(n){n.tag===22?(W(Ze,Ze.current),W(Gt,n),en===null&&(en=n)):si()}function si(){W(Ze,Ze.current),W(Gt,Gt.current)}function Ht(n){B(Gt),en===n&&(en=null),B(Ze)}var Ze=N(0);function Jr(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||fc(r)||hc(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Rn=0,ye=null,He=null,nt=null,Kr=!1,Ts=!1,Oi=!1,Yr=0,Io=0,Es=null,__=0;function Qe(){throw Error(o(321))}function au(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!Ot(n[r],s[r]))return!1;return!0}function lu(n,s,r,u,m,y){return Rn=y,ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=n===null||n.memoizedState===null?Oh:wu,Oi=!1,y=r(u,m),Oi=!1,Ts&&(y=nh(s,r,u,m)),th(n),y}function th(n){D.H=Do;var s=He!==null&&He.next!==null;if(Rn=0,nt=He=ye=null,Kr=!1,Io=0,Es=null,s)throw Error(o(300));n===null||it||(n=n.dependencies,n!==null&&qr(n)&&(it=!0))}function nh(n,s,r,u){ye=n;var m=0;do{if(Ts&&(Es=null),Io=0,Ts=!1,25<=m)throw Error(o(301));if(m+=1,nt=He=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}D.H=qh,y=s(r,u)}while(Ts);return y}function S_(){var n=D.H,s=n.useState()[0];return s=typeof s.then=="function"?Mo(s):s,n=n.useState()[0],(He!==null?He.memoizedState:null)!==n&&(ye.flags|=1024),s}function uu(){var n=Yr!==0;return Yr=0,n}function cu(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function du(n){if(Kr){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Kr=!1}Rn=0,nt=He=ye=null,Ts=!1,Io=Yr=0,Es=null}function Ct(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?ye.memoizedState=nt=n:nt=nt.next=n,nt}function et(){if(He===null){var n=ye.alternate;n=n!==null?n.memoizedState:null}else n=He.next;var s=nt===null?ye.memoizedState:nt.next;if(s!==null)nt=s,He=n;else{if(n===null)throw ye.alternate===null?Error(o(467)):Error(o(310));He=n,n={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},nt===null?ye.memoizedState=nt=n:nt=nt.next=n}return nt}function Xr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(n){var s=Io;return Io+=1,Es===null&&(Es=[]),n=Jf(Es,n,s),s=ye,(nt===null?s.memoizedState:nt.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?Oh:wu),n}function Qr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Mo(n);if(n.$$typeof===P)return yt(n)}throw Error(o(438,String(n)))}function fu(n){var s=null,r=ye.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Xr(),ye.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),u=0;u<n;u++)r[u]=ge;return s.index++,r}function Nn(n,s){return typeof s=="function"?s(n):s}function Wr(n){var s=et();return hu(s,He,n)}function hu(n,s,r){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var m=n.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}s.baseQueue=m=y,u.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{s=m.next;var w=T=null,A=null,O=s,V=!1;do{var F=O.lane&-536870913;if(F!==O.lane?(be&F)===F:(Rn&F)===F){var q=O.revertLane;if(q===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),F===gs&&(V=!0);else if((Rn&q)===q){O=O.next,q===gs&&(V=!0);continue}else F={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},A===null?(w=A=F,T=y):A=A.next=F,ye.lanes|=q,ai|=q;F=O.action,Oi&&r(y,F),y=O.hasEagerState?O.eagerState:r(y,F)}else q={lane:F,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},A===null?(w=A=q,T=y):A=A.next=q,ye.lanes|=F,ai|=F;O=O.next}while(O!==null&&O!==s);if(A===null?T=y:A.next=w,!Ot(y,n.memoizedState)&&(it=!0,V&&(r=ys,r!==null)))throw r;n.memoizedState=y,n.baseState=T,n.baseQueue=A,u.lastRenderedState=y}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function pu(n){var s=et(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=n;var u=r.dispatch,m=r.pending,y=s.memoizedState;if(m!==null){r.pending=null;var T=m=m.next;do y=n(y,T.action),T=T.next;while(T!==m);Ot(y,s.memoizedState)||(it=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function ih(n,s,r){var u=ye,m=et(),y=Ae;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var T=!Ot((He||m).memoizedState,r);if(T&&(m.memoizedState=r,it=!0),m=m.queue,yu(rh.bind(null,u,m,n),[n]),m.getSnapshot!==s||T||nt!==null&&nt.memoizedState.tag&1){if(u.flags|=2048,ws(9,{destroy:void 0},oh.bind(null,u,m,r,s),null),ze===null)throw Error(o(349));y||(Rn&127)!==0||sh(u,s,r)}return r}function sh(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=ye.updateQueue,s===null?(s=Xr(),ye.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function oh(n,s,r,u){s.value=r,s.getSnapshot=u,ah(s)&&lh(n)}function rh(n,s,r){return r(function(){ah(s)&&lh(n)})}function ah(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!Ot(n,r)}catch{return!0}}function lh(n){var s=Ri(n,2);s!==null&&Ut(s,n,2)}function mu(n){var s=Ct();if(typeof n=="function"){var r=n;if(n=r(),Oi){Kn(!0);try{r()}finally{Kn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:n},s}function uh(n,s,r,u){return n.baseState=r,hu(n,He,typeof u=="function"?u:Nn)}function T_(n,s,r,u,m){if(ea(n))throw Error(o(485));if(n=s.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};D.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,ch(s,y)):(y.next=r.next,s.pending=r.next=y)}}function ch(n,s){var r=s.action,u=s.payload,m=n.state;if(s.isTransition){var y=D.T,T={};D.T=T;try{var w=r(m,u),A=D.S;A!==null&&A(T,w),dh(n,s,w)}catch(O){gu(n,s,O)}finally{y!==null&&T.types!==null&&(y.types=T.types),D.T=y}}else try{y=r(m,u),dh(n,s,y)}catch(O){gu(n,s,O)}}function dh(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){fh(n,s,u)},function(u){return gu(n,s,u)}):fh(n,s,r)}function fh(n,s,r){s.status="fulfilled",s.value=r,hh(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,ch(n,r)))}function gu(n,s,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,hh(s),s=s.next;while(s!==u)}n.action=null}function hh(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function ph(n,s){return s}function mh(n,s){if(Ae){var r=ze.formState;if(r!==null){e:{var u=ye;if(Ae){if(Fe){t:{for(var m=Fe,y=Zt;m.nodeType!==8;){if(!y){m=null;break t}if(m=tn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Fe=tn(m.nextSibling),u=m.data==="F!";break e}}jn(u)}u=!1}u&&(s=r[0])}}return r=Ct(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:s},r.queue=u,r=Uh.bind(null,ye,u),u.dispatch=r,u=mu(!1),y=Eu.bind(null,ye,!1,u.queue),u=Ct(),m={state:s,dispatch:null,action:n,pending:null},u.queue=m,r=T_.bind(null,ye,m,y,r),m.dispatch=r,u.memoizedState=n,[s,r,!1]}function gh(n){var s=et();return yh(s,He,n)}function yh(n,s,r){if(s=hu(n,s,ph)[0],n=Wr(Nn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Mo(s)}catch(T){throw T===vs?Br:T}else u=s;s=et();var m=s.queue,y=m.dispatch;return r!==s.memoizedState&&(ye.flags|=2048,ws(9,{destroy:void 0},E_.bind(null,m,r),null)),[u,y,n]}function E_(n,s){n.action=s}function vh(n){var s=et(),r=He;if(r!==null)return yh(s,r,n);et(),s=s.memoizedState,r=et();var u=r.queue.dispatch;return r.memoizedState=n,[s,u,!1]}function ws(n,s,r,u){return n={tag:n,create:r,deps:u,inst:s,next:null},s=ye.updateQueue,s===null&&(s=Xr(),ye.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,s.lastEffect=n),n}function _h(){return et().memoizedState}function jr(n,s,r,u){var m=Ct();ye.flags|=n,m.memoizedState=ws(1|s,{destroy:void 0},r,u===void 0?null:u)}function Zr(n,s,r,u){var m=et();u=u===void 0?null:u;var y=m.memoizedState.inst;He!==null&&u!==null&&au(u,He.memoizedState.deps)?m.memoizedState=ws(s,y,r,u):(ye.flags|=n,m.memoizedState=ws(1|s,y,r,u))}function Sh(n,s){jr(8390656,8,n,s)}function yu(n,s){Zr(2048,8,n,s)}function w_(n){ye.flags|=4;var s=ye.updateQueue;if(s===null)s=Xr(),ye.updateQueue=s,s.events=[n];else{var r=s.events;r===null?s.events=[n]:r.push(n)}}function Th(n){var s=et().memoizedState;return w_({ref:s,nextImpl:n}),function(){if((Pe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Eh(n,s){return Zr(4,2,n,s)}function wh(n,s){return Zr(4,4,n,s)}function bh(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ch(n,s,r){r=r!=null?r.concat([n]):null,Zr(4,4,bh.bind(null,s,n),r)}function vu(){}function Ah(n,s){var r=et();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&au(s,u[1])?u[0]:(r.memoizedState=[n,s],n)}function xh(n,s){var r=et();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&au(s,u[1]))return u[0];if(u=n(),Oi){Kn(!0);try{n()}finally{Kn(!1)}}return r.memoizedState=[u,s],u}function _u(n,s,r){return r===void 0||(Rn&1073741824)!==0&&(be&261930)===0?n.memoizedState=s:(n.memoizedState=r,n=Rp(),ye.lanes|=n,ai|=n,r)}function Rh(n,s,r,u){return Ot(r,s)?r:Ss.current!==null?(n=_u(n,r,u),Ot(n,s)||(it=!0),n):(Rn&42)===0||(Rn&1073741824)!==0&&(be&261930)===0?(it=!0,n.memoizedState=r):(n=Rp(),ye.lanes|=n,ai|=n,s)}function Nh(n,s,r,u,m){var y=$.p;$.p=y!==0&&8>y?y:8;var T=D.T,w={};D.T=w,Eu(n,!1,s,r);try{var A=m(),O=D.S;if(O!==null&&O(w,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=v_(A,u);ko(n,s,V,zt(n))}else ko(n,s,u,zt(n))}catch(F){ko(n,s,{then:function(){},status:"rejected",reason:F},zt())}finally{$.p=y,T!==null&&w.types!==null&&(T.types=w.types),D.T=T}}function b_(){}function Su(n,s,r,u){if(n.tag!==5)throw Error(o(476));var m=Ih(n).queue;Nh(n,m,s,ee,r===null?b_:function(){return Mh(n),r(u)})}function Ih(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:ee},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Mh(n){var s=Ih(n);s.next===null&&(s=n.alternate.memoizedState),ko(n,s.next.queue,{},zt())}function Tu(){return yt(Xo)}function kh(){return et().memoizedState}function Dh(){return et().memoizedState}function C_(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=zt();n=ti(r);var u=ni(s,n,r);u!==null&&(Ut(u,s,r),xo(u,s,r)),s={cache:Ql()},n.payload=s;return}s=s.return}}function A_(n,s,r){var u=zt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ea(n)?Ph(s,r):(r=Gl(n,s,r,u),r!==null&&(Ut(r,n,u),Lh(r,s,u)))}function Uh(n,s,r){var u=zt();ko(n,s,r,u)}function ko(n,s,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ea(n))Ph(s,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,w=y(T,r);if(m.hasEagerState=!0,m.eagerState=w,Ot(w,T))return Ur(n,s,m,0),ze===null&&Dr(),!1}catch{}finally{}if(r=Gl(n,s,m,u),r!==null)return Ut(r,n,u),Lh(r,s,u),!0}return!1}function Eu(n,s,r,u){if(u={lane:2,revertLane:ec(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ea(n)){if(s)throw Error(o(479))}else s=Gl(n,r,u,2),s!==null&&Ut(s,n,2)}function ea(n){var s=n.alternate;return n===ye||s!==null&&s===ye}function Ph(n,s){Ts=Kr=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Lh(n,s,r){if((r&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,Hd(n,r)}}var Do={readContext:yt,use:Qr,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};Do.useEffectEvent=Qe;var Oh={readContext:yt,use:Qr,useCallback:function(n,s){return Ct().memoizedState=[n,s===void 0?null:s],n},useContext:yt,useEffect:Sh,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,jr(4194308,4,bh.bind(null,s,n),r)},useLayoutEffect:function(n,s){return jr(4194308,4,n,s)},useInsertionEffect:function(n,s){jr(4,2,n,s)},useMemo:function(n,s){var r=Ct();s=s===void 0?null:s;var u=n();if(Oi){Kn(!0);try{n()}finally{Kn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(n,s,r){var u=Ct();if(r!==void 0){var m=r(s);if(Oi){Kn(!0);try{r(s)}finally{Kn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=A_.bind(null,ye,n),[u.memoizedState,n]},useRef:function(n){var s=Ct();return n={current:n},s.memoizedState=n},useState:function(n){n=mu(n);var s=n.queue,r=Uh.bind(null,ye,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:vu,useDeferredValue:function(n,s){var r=Ct();return _u(r,n,s)},useTransition:function(){var n=mu(!1);return n=Nh.bind(null,ye,n.queue,!0,!1),Ct().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var u=ye,m=Ct();if(Ae){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),ze===null)throw Error(o(349));(be&127)!==0||sh(u,s,r)}m.memoizedState=r;var y={value:r,getSnapshot:s};return m.queue=y,Sh(rh.bind(null,u,y,n),[n]),u.flags|=2048,ws(9,{destroy:void 0},oh.bind(null,u,y,r,s),null),r},useId:function(){var n=Ct(),s=ze.identifierPrefix;if(Ae){var r=gn,u=mn;r=(u&~(1<<32-Lt(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Yr++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=__++,s="_"+s+"r_"+r.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Tu,useFormState:mh,useActionState:mh,useOptimistic:function(n){var s=Ct();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Eu.bind(null,ye,!0,r),r.dispatch=s,[n,s]},useMemoCache:fu,useCacheRefresh:function(){return Ct().memoizedState=C_.bind(null,ye)},useEffectEvent:function(n){var s=Ct(),r={impl:n};return s.memoizedState=r,function(){if((Pe&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},wu={readContext:yt,use:Qr,useCallback:Ah,useContext:yt,useEffect:yu,useImperativeHandle:Ch,useInsertionEffect:Eh,useLayoutEffect:wh,useMemo:xh,useReducer:Wr,useRef:_h,useState:function(){return Wr(Nn)},useDebugValue:vu,useDeferredValue:function(n,s){var r=et();return Rh(r,He.memoizedState,n,s)},useTransition:function(){var n=Wr(Nn)[0],s=et().memoizedState;return[typeof n=="boolean"?n:Mo(n),s]},useSyncExternalStore:ih,useId:kh,useHostTransitionStatus:Tu,useFormState:gh,useActionState:gh,useOptimistic:function(n,s){var r=et();return uh(r,He,n,s)},useMemoCache:fu,useCacheRefresh:Dh};wu.useEffectEvent=Th;var qh={readContext:yt,use:Qr,useCallback:Ah,useContext:yt,useEffect:yu,useImperativeHandle:Ch,useInsertionEffect:Eh,useLayoutEffect:wh,useMemo:xh,useReducer:pu,useRef:_h,useState:function(){return pu(Nn)},useDebugValue:vu,useDeferredValue:function(n,s){var r=et();return He===null?_u(r,n,s):Rh(r,He.memoizedState,n,s)},useTransition:function(){var n=pu(Nn)[0],s=et().memoizedState;return[typeof n=="boolean"?n:Mo(n),s]},useSyncExternalStore:ih,useId:kh,useHostTransitionStatus:Tu,useFormState:vh,useActionState:vh,useOptimistic:function(n,s){var r=et();return He!==null?uh(r,He,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:fu,useCacheRefresh:Dh};qh.useEffectEvent=Th;function bu(n,s,r,u){s=n.memoizedState,r=r(u,s),r=r==null?s:_({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Cu={enqueueSetState:function(n,s,r){n=n._reactInternals;var u=zt(),m=ti(u);m.payload=s,r!=null&&(m.callback=r),s=ni(n,m,u),s!==null&&(Ut(s,n,u),xo(s,n,u))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var u=zt(),m=ti(u);m.tag=1,m.payload=s,r!=null&&(m.callback=r),s=ni(n,m,u),s!==null&&(Ut(s,n,u),xo(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=zt(),u=ti(r);u.tag=2,s!=null&&(u.callback=s),s=ni(n,u,r),s!==null&&(Ut(s,n,r),xo(s,n,r))}};function Gh(n,s,r,u,m,y,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!_o(r,u)||!_o(m,y):!0}function Hh(n,s,r,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==n&&Cu.enqueueReplaceState(s,s.state,null)}function qi(n,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(n=n.defaultProps){r===s&&(r=_({},r));for(var m in n)r[m]===void 0&&(r[m]=n[m])}return r}function Bh(n){kr(n)}function Vh(n){console.error(n)}function zh(n){kr(n)}function ta(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function $h(n,s,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Au(n,s,r){return r=ti(r),r.tag=3,r.payload={element:null},r.callback=function(){ta(n,s)},r}function Fh(n){return n=ti(n),n.tag=3,n}function Jh(n,s,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;n.payload=function(){return m(y)},n.callback=function(){$h(s,r,u)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){$h(s,r,u),typeof m!="function"&&(li===null?li=new Set([this]):li.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function x_(n,s,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&ms(s,r,m,!0),r=Gt.current,r!==null){switch(r.tag){case 31:case 13:return en===null?ha():r.alternate===null&&We===0&&(We=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===Vr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Wu(n,u,m)),!1;case 22:return r.flags|=65536,u===Vr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Wu(n,u,m)),!1}throw Error(o(435,r.tag))}return Wu(n,u,m),ha(),!1}if(Ae)return s=Gt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Fl&&(n=Error(o(422),{cause:u}),Eo(Qt(n,r)))):(u!==Fl&&(s=Error(o(423),{cause:u}),Eo(Qt(s,r))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Qt(u,r),m=Au(n.stateNode,u,m),nu(n,m),We!==4&&(We=2)),!1;var y=Error(o(520),{cause:u});if(y=Qt(y,r),Bo===null?Bo=[y]:Bo.push(y),We!==4&&(We=2),s===null)return!0;u=Qt(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=m&-m,r.lanes|=n,n=Au(r.stateNode,u,n),nu(r,n),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(li===null||!li.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Fh(m),Jh(m,n,r,u),nu(r,m),!1}r=r.return}while(r!==null);return!1}var xu=Error(o(461)),it=!1;function vt(n,s,r,u){s.child=n===null?Qf(s,null,r,u):Li(s,n.child,r,u)}function Kh(n,s,r,u,m){r=r.render;var y=s.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return ki(s),u=lu(n,s,r,T,y,m),w=uu(),n!==null&&!it?(cu(n,s,m),In(n,s,m)):(Ae&&w&&zl(s),s.flags|=1,vt(n,s,u,m),s.child)}function Yh(n,s,r,u,m){if(n===null){var y=r.type;return typeof y=="function"&&!Hl(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Xh(n,s,y,u,m)):(n=Lr(r.type,null,u,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Pu(n,m)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:_o,r(T,u)&&n.ref===s.ref)return In(n,s,m)}return s.flags|=1,n=bn(y,u),n.ref=s.ref,n.return=s,s.child=n}function Xh(n,s,r,u,m){if(n!==null){var y=n.memoizedProps;if(_o(y,u)&&n.ref===s.ref)if(it=!1,s.pendingProps=u=y,Pu(n,m))(n.flags&131072)!==0&&(it=!0);else return s.lanes=n.lanes,In(n,s,m)}return Ru(n,s,r,u,m)}function Qh(n,s,r,u){var m=u.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=s.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,s.child=null;return Wh(n,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Hr(s,y!==null?y.cachePool:null),y!==null?Zf(s,y):su(),eh(s);else return u=s.lanes=536870912,Wh(n,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Hr(s,y.cachePool),Zf(s,y),si(),s.memoizedState=null):(n!==null&&Hr(s,null),su(),si());return vt(n,s,m,r),s.child}function Uo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wh(n,s,r,u,m){var y=jl();return y=y===null?null:{parent:tt._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},n!==null&&Hr(s,null),su(),eh(s),n!==null&&ms(n,s,u,!0),s.childLanes=m,null}function na(n,s){return s=sa({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function jh(n,s,r){return Li(s,n.child,null,r),n=na(s,s.pendingProps),n.flags|=2,Ht(s),s.memoizedState=null,n}function R_(n,s,r){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ae){if(u.mode==="hidden")return n=na(s,u),s.lanes=536870912,Uo(null,n);if(ru(s),(n=Fe)?(n=cm(n,Zt),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Qn!==null?{id:mn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},r=Pf(n),r.return=s,s.child=r,gt=s,Fe=null)):n=null,n===null)throw jn(s);return s.lanes=536870912,null}return na(s,u)}var y=n.memoizedState;if(y!==null){var T=y.dehydrated;if(ru(s),m)if(s.flags&256)s.flags&=-257,s=jh(n,s,r);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(it||ms(n,s,r,!1),m=(r&n.childLanes)!==0,it||m){if(u=ze,u!==null&&(T=Bd(u,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ri(n,T),Ut(u,n,T),xu;ha(),s=jh(n,s,r)}else n=y.treeContext,Fe=tn(T.nextSibling),gt=s,Ae=!0,Wn=null,Zt=!1,n!==null&&qf(s,n),s=na(s,u),s.flags|=4096;return s}return n=bn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ia(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function Ru(n,s,r,u,m){return ki(s),r=lu(n,s,r,u,void 0,m),u=uu(),n!==null&&!it?(cu(n,s,m),In(n,s,m)):(Ae&&u&&zl(s),s.flags|=1,vt(n,s,r,m),s.child)}function Zh(n,s,r,u,m,y){return ki(s),s.updateQueue=null,r=nh(s,u,r,m),th(n),u=uu(),n!==null&&!it?(cu(n,s,y),In(n,s,y)):(Ae&&u&&zl(s),s.flags|=1,vt(n,s,r,y),s.child)}function ep(n,s,r,u,m){if(ki(s),s.stateNode===null){var y=ds,T=r.contextType;typeof T=="object"&&T!==null&&(y=yt(T)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Cu,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},eu(s),T=r.contextType,y.context=typeof T=="object"&&T!==null?yt(T):ds,y.state=s.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(bu(s,r,T,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Cu.enqueueReplaceState(y,y.state,null),No(s,u,y,m),Ro(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){y=s.stateNode;var w=s.memoizedProps,A=qi(r,w);y.props=A;var O=y.context,V=r.contextType;T=ds,typeof V=="object"&&V!==null&&(T=yt(V));var F=r.getDerivedStateFromProps;V=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||O!==T)&&Hh(s,y,u,T),ei=!1;var q=s.memoizedState;y.state=q,No(s,u,y,m),Ro(),O=s.memoizedState,w||q!==O||ei?(typeof F=="function"&&(bu(s,r,F,u),O=s.memoizedState),(A=ei||Gh(s,r,A,u,q,O,T))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),y.props=u,y.state=O,y.context=T,u=A):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,tu(n,s),T=s.memoizedProps,V=qi(r,T),y.props=V,F=s.pendingProps,q=y.context,O=r.contextType,A=ds,typeof O=="object"&&O!==null&&(A=yt(O)),w=r.getDerivedStateFromProps,(O=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==F||q!==A)&&Hh(s,y,u,A),ei=!1,q=s.memoizedState,y.state=q,No(s,u,y,m),Ro();var H=s.memoizedState;T!==F||q!==H||ei||n!==null&&n.dependencies!==null&&qr(n.dependencies)?(typeof w=="function"&&(bu(s,r,w,u),H=s.memoizedState),(V=ei||Gh(s,r,V,u,q,H,A)||n!==null&&n.dependencies!==null&&qr(n.dependencies))?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,H,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,H,A)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),y.props=u,y.state=H,y.context=A,u=V):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),u=!1)}return y=u,ia(n,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&u?(s.child=Li(s,n.child,null,m),s.child=Li(s,null,r,m)):vt(n,s,r,m),s.memoizedState=y.state,n=s.child):n=In(n,s,m),n}function tp(n,s,r,u){return Ii(),s.flags|=256,vt(n,s,r,u),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(n){return{baseLanes:n,cachePool:$f()}}function Mu(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=Vt),n}function np(n,s,r){var u=s.pendingProps,m=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=n!==null&&n.memoizedState===null?!1:(Ze.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ae){if(m?ii(s):si(),(n=Fe)?(n=cm(n,Zt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Qn!==null?{id:mn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},r=Pf(n),r.return=s,s.child=r,gt=s,Fe=null)):n=null,n===null)throw jn(s);return hc(n)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,m?(si(),m=s.mode,w=sa({mode:"hidden",children:w},m),u=Ni(u,m,r,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=Iu(r),u.childLanes=Mu(n,T,r),s.memoizedState=Nu,Uo(null,u)):(ii(s),ku(s,w))}var A=n.memoizedState;if(A!==null&&(w=A.dehydrated,w!==null)){if(y)s.flags&256?(ii(s),s.flags&=-257,s=Du(n,s,r)):s.memoizedState!==null?(si(),s.child=n.child,s.flags|=128,s=null):(si(),w=u.fallback,m=s.mode,u=sa({mode:"visible",children:u.children},m),w=Ni(w,m,r,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,Li(s,n.child,null,r),u=s.child,u.memoizedState=Iu(r),u.childLanes=Mu(n,T,r),s.memoizedState=Nu,s=Uo(null,u));else if(ii(s),hc(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var O=T.dgst;T=O,u=Error(o(419)),u.stack="",u.digest=T,Eo({value:u,source:null,stack:null}),s=Du(n,s,r)}else if(it||ms(n,s,r,!1),T=(r&n.childLanes)!==0,it||T){if(T=ze,T!==null&&(u=Bd(T,r),u!==0&&u!==A.retryLane))throw A.retryLane=u,Ri(n,u),Ut(T,n,u),xu;fc(w)||ha(),s=Du(n,s,r)}else fc(w)?(s.flags|=192,s.child=n.child,s=null):(n=A.treeContext,Fe=tn(w.nextSibling),gt=s,Ae=!0,Wn=null,Zt=!1,n!==null&&qf(s,n),s=ku(s,u.children),s.flags|=4096);return s}return m?(si(),w=u.fallback,m=s.mode,A=n.child,O=A.sibling,u=bn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,O!==null?w=bn(O,w):(w=Ni(w,m,r,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Uo(null,u),u=s.child,w=n.child.memoizedState,w===null?w=Iu(r):(m=w.cachePool,m!==null?(A=tt._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=$f(),w={baseLanes:w.baseLanes|r,cachePool:m}),u.memoizedState=w,u.childLanes=Mu(n,T,r),s.memoizedState=Nu,Uo(n.child,u)):(ii(s),r=n.child,n=r.sibling,r=bn(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,n!==null&&(T=s.deletions,T===null?(s.deletions=[n],s.flags|=16):T.push(n)),s.child=r,s.memoizedState=null,r)}function ku(n,s){return s=sa({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function sa(n,s){return n=qt(22,n,null,s),n.lanes=0,n}function Du(n,s,r){return Li(s,n.child,null,r),n=ku(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ip(n,s,r){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Yl(n.return,s,r)}function Uu(n,s,r,u,m,y){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=r,T.tailMode=m,T.treeForkCount=y)}function sp(n,s,r){var u=s.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=Ze.current,w=(T&2)!==0;if(w?(T=T&1|2,s.flags|=128):T&=1,W(Ze,T),vt(n,s,u,r),u=Ae?To:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ip(n,r,s);else if(n.tag===19)ip(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(r=s.child,m=null;r!==null;)n=r.alternate,n!==null&&Jr(n)===null&&(m=r),r=r.sibling;r=m,r===null?(m=s.child,s.child=null):(m=r.sibling,r.sibling=null),Uu(s,!1,m,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Jr(n)===null){s.child=m;break}n=m.sibling,m.sibling=r,r=m,m=n}Uu(s,!0,r,null,y,u);break;case"together":Uu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function In(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),ai|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(ms(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,r=bn(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=bn(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function Pu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&qr(n)))}function N_(n,s,r){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),Zn(s,tt,n.memoizedState.cache),Ii();break;case 27:case 5:Ei(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:Zn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ru(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ii(s),s.flags|=128,null):(r&s.child.childLanes)!==0?np(n,s,r):(ii(s),n=In(n,s,r),n!==null?n.sibling:null);ii(s);break;case 19:var m=(n.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(ms(n,s,r,!1),u=(r&s.childLanes)!==0),m){if(u)return sp(n,s,r);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),W(Ze,Ze.current),u)break;return null;case 22:return s.lanes=0,Qh(n,s,r,s.pendingProps);case 24:Zn(s,tt,n.memoizedState.cache)}return In(n,s,r)}function op(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)it=!0;else{if(!Pu(n,r)&&(s.flags&128)===0)return it=!1,N_(n,s,r);it=(n.flags&131072)!==0}else it=!1,Ae&&(s.flags&1048576)!==0&&Of(s,To,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ui(s.elementType),s.type=n,typeof n=="function")Hl(n)?(u=qi(n,u),s.tag=1,s=ep(null,s,n,u,r)):(s.tag=0,s=Ru(null,s,n,u,r));else{if(n!=null){var m=n.$$typeof;if(m===J){s.tag=11,s=Kh(null,s,n,u,r);break e}else if(m===K){s.tag=14,s=Yh(null,s,n,u,r);break e}}throw s=_e(n)||n,Error(o(306,s,""))}}return s;case 0:return Ru(n,s,s.type,s.pendingProps,r);case 1:return u=s.type,m=qi(u,s.pendingProps),ep(n,s,u,m,r);case 3:e:{if(ht(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;m=y.element,tu(n,s),No(s,u,null,r);var T=s.memoizedState;if(u=T.cache,Zn(s,tt,u),u!==y.cache&&Xl(s,[tt],r,!0),Ro(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=tp(n,s,u,r);break e}else if(u!==m){m=Qt(Error(o(424)),s),Eo(m),s=tp(n,s,u,r);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Fe=tn(n.firstChild),gt=s,Ae=!0,Wn=null,Zt=!0,r=Qf(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ii(),u===m){s=In(n,s,r);break e}vt(n,s,u,r)}s=s.child}return s;case 26:return ia(n,s),n===null?(r=gm(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ae||(r=s.type,n=s.pendingProps,u=Sa(Se.current).createElement(r),u[mt]=s,u[Rt]=n,_t(u,r,n),ct(u),s.stateNode=u):s.memoizedState=gm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ei(s),n===null&&Ae&&(u=s.stateNode=hm(s.type,s.pendingProps,Se.current),gt=s,Zt=!0,m=Fe,fi(s.type)?(pc=m,Fe=tn(u.firstChild)):Fe=m),vt(n,s,s.pendingProps.children,r),ia(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ae&&((m=u=Fe)&&(u=oS(u,s.type,s.pendingProps,Zt),u!==null?(s.stateNode=u,gt=s,Fe=tn(u.firstChild),Zt=!1,m=!0):m=!1),m||jn(s)),Ei(s),m=s.type,y=s.pendingProps,T=n!==null?n.memoizedProps:null,u=y.children,uc(m,y)?u=null:T!==null&&uc(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=lu(n,s,S_,null,null,r),Xo._currentValue=m),ia(n,s),vt(n,s,u,r),s.child;case 6:return n===null&&Ae&&((n=r=Fe)&&(r=rS(r,s.pendingProps,Zt),r!==null?(s.stateNode=r,gt=s,Fe=null,n=!0):n=!1),n||jn(s)),null;case 13:return np(n,s,r);case 4:return ht(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Li(s,null,u,r):vt(n,s,u,r),s.child;case 11:return Kh(n,s,s.type,s.pendingProps,r);case 7:return vt(n,s,s.pendingProps,r),s.child;case 8:return vt(n,s,s.pendingProps.children,r),s.child;case 12:return vt(n,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,Zn(s,s.type,u.value),vt(n,s,u.children,r),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,ki(s),m=yt(m),u=u(m),s.flags|=1,vt(n,s,u,r),s.child;case 14:return Yh(n,s,s.type,s.pendingProps,r);case 15:return Xh(n,s,s.type,s.pendingProps,r);case 19:return sp(n,s,r);case 31:return R_(n,s,r);case 22:return Qh(n,s,r,s.pendingProps);case 24:return ki(s),u=yt(tt),n===null?(m=jl(),m===null&&(m=ze,y=Ql(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),s.memoizedState={parent:u,cache:m},eu(s),Zn(s,tt,m)):((n.lanes&r)!==0&&(tu(n,s),No(s,null,null,r),Ro()),m=n.memoizedState,y=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Zn(s,tt,u)):(u=y.cache,Zn(s,tt,u),u!==m.cache&&Xl(s,[tt],r,!0))),vt(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Mn(n){n.flags|=4}function Lu(n,s,r,u,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(kp())n.flags|=8192;else throw Pi=Vr,Zl}else n.flags&=-16777217}function rp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Tm(s))if(kp())n.flags|=8192;else throw Pi=Vr,Zl}function oa(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qd():536870912,n.lanes|=s,xs|=s)}function Po(n,s){if(!Ae)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Je(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(s)for(var m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=r,s}function I_(n,s,r){var u=s.pendingProps;switch($l(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(s),null;case 1:return Je(s),null;case 3:return r=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),xn(tt),Ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ps(s)?Mn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jl())),Je(s),null;case 26:var m=s.type,y=s.memoizedState;return n===null?(Mn(s),y!==null?(Je(s),rp(s,y)):(Je(s),Lu(s,m,null,u,r))):y?y!==n.memoizedState?(Mn(s),Je(s),rp(s,y)):(Je(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Mn(s),Je(s),Lu(s,m,n,u,r)),null;case 27:if($n(s),r=Se.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Mn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}n=ne.current,ps(s)?Gf(s):(n=hm(m,u,r),s.stateNode=n,Mn(s))}return Je(s),null;case 5:if($n(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Mn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}if(y=ne.current,ps(s))Gf(s);else{var T=Sa(Se.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[mt]=s,y[Rt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(_t(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mn(s)}}return Je(s),Lu(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,r),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Mn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=Se.current,ps(s)){if(n=s.stateNode,r=s.memoizedProps,u=null,m=gt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[mt]=s,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||nm(n.nodeValue,r)),n||jn(s,!0)}else n=Sa(n).createTextNode(u),n[mt]=s,s.stateNode=n}return Je(s),null;case 31:if(r=s.memoizedState,n===null||n.memoizedState!==null){if(u=ps(s),r!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[mt]=s}else Ii(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),n=!1}else r=Jl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return s.flags&256?(Ht(s),s):(Ht(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Je(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=ps(s),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(o(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[mt]=s}else Ii(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),m=!1}else m=Jl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Ht(s),s):(Ht(s),null)}return Ht(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),r!==n&&r&&(s.child.flags|=8192),oa(s,s.updateQueue),Je(s),null);case 4:return Ye(),n===null&&sc(s.stateNode.containerInfo),Je(s),null;case 10:return xn(s.type),Je(s),null;case 19:if(B(Ze),u=s.memoizedState,u===null)return Je(s),null;if(m=(s.flags&128)!==0,y=u.rendering,y===null)if(m)Po(u,!1);else{if(We!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Jr(n),y!==null){for(s.flags|=128,Po(u,!1),n=y.updateQueue,s.updateQueue=n,oa(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)Uf(r,n),r=r.sibling;return W(Ze,Ze.current&1|2),Ae&&Cn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&pt()>ca&&(s.flags|=128,m=!0,Po(u,!1),s.lanes=4194304)}else{if(!m)if(n=Jr(y),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,oa(s,n),Po(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ae)return Je(s),null}else 2*pt()-u.renderingStartTime>ca&&r!==536870912&&(s.flags|=128,m=!0,Po(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(n=u.last,n!==null?n.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=pt(),n.sibling=null,r=Ze.current,W(Ze,m?r&1|2:r&1),Ae&&Cn(s,u.treeForkCount),n):(Je(s),null);case 22:case 23:return Ht(s),ou(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(Je(s),s.subtreeFlags&6&&(s.flags|=8192)):Je(s),r=s.updateQueue,r!==null&&oa(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),n!==null&&B(Di),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),xn(tt),Je(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function M_(n,s){switch($l(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return xn(tt),Ye(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return $n(s),null;case 31:if(s.memoizedState!==null){if(Ht(s),s.alternate===null)throw Error(o(340));Ii()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ht(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ii()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return B(Ze),null;case 4:return Ye(),null;case 10:return xn(s.type),null;case 22:case 23:return Ht(s),ou(),n!==null&&B(Di),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return xn(tt),null;case 25:return null;default:return null}}function ap(n,s){switch($l(s),s.tag){case 3:xn(tt),Ye();break;case 26:case 27:case 5:$n(s);break;case 4:Ye();break;case 31:s.memoizedState!==null&&Ht(s);break;case 13:Ht(s);break;case 19:B(Ze);break;case 10:xn(s.type);break;case 22:case 23:Ht(s),ou(),n!==null&&B(Di);break;case 24:xn(tt)}}function Lo(n,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&n)===n){u=void 0;var y=r.create,T=r.inst;u=y(),T.destroy=u}r=r.next}while(r!==m)}}catch(w){Ge(s,s.return,w)}}function oi(n,s,r){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&n)===n){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=s;var A=r,O=w;try{O()}catch(V){Ge(m,A,V)}}}u=u.next}while(u!==y)}}catch(V){Ge(s,s.return,V)}}function lp(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{jf(s,r)}catch(u){Ge(n,n.return,u)}}}function up(n,s,r){r.props=qi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Ge(n,s,u)}}function Oo(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(m){Ge(n,s,m)}}function yn(n,s){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){Ge(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Ge(n,s,m)}else r.current=null}function cp(n){var s=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){Ge(n,n.return,m)}}function Ou(n,s,r){try{var u=n.stateNode;Z_(u,n.type,r,s),u[Rt]=s}catch(m){Ge(n,n.return,m)}}function dp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fi(n.type)||n.tag===4}function qu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gu(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=En));else if(u!==4&&(u===27&&fi(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Gu(n,s,r),n=n.sibling;n!==null;)Gu(n,s,r),n=n.sibling}function ra(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(u!==4&&(u===27&&fi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(ra(n,s,r),n=n.sibling;n!==null;)ra(n,s,r),n=n.sibling}function fp(n){var s=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);_t(s,u,r),s[mt]=n,s[Rt]=r}catch(y){Ge(n,n.return,y)}}var kn=!1,st=!1,Hu=!1,hp=typeof WeakSet=="function"?WeakSet:Set,dt=null;function k_(n,s){if(n=n.containerInfo,ac=xa,n=Cf(n),Dl(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,w=-1,A=-1,O=0,V=0,F=n,q=null;t:for(;;){for(var H;F!==r||m!==0&&F.nodeType!==3||(w=T+m),F!==y||u!==0&&F.nodeType!==3||(A=T+u),F.nodeType===3&&(T+=F.nodeValue.length),(H=F.firstChild)!==null;)q=F,F=H;for(;;){if(F===n)break t;if(q===r&&++O===m&&(w=T),q===y&&++V===u&&(A=T),(H=F.nextSibling)!==null)break;F=q,q=F.parentNode}F=H}r=w===-1||A===-1?null:{start:w,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(lc={focusedElem:n,selectionRange:r},xa=!1,dt=s;dt!==null;)if(s=dt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,dt=n;else for(;dt!==null;){switch(s=dt,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)m=n[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=s,m=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var ie=qi(r.type,m);n=u.getSnapshotBeforeUpdate(ie,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(ue){Ge(r,r.return,ue)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)dc(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,dt=n;break}dt=s.return}}function pp(n,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Un(n,r),u&4&&Lo(5,r);break;case 1:if(Un(n,r),u&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(T){Ge(r,r.return,T)}else{var m=qi(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Ge(r,r.return,T)}}u&64&&lp(r),u&512&&Oo(r,r.return);break;case 3:if(Un(n,r),u&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{jf(n,s)}catch(T){Ge(r,r.return,T)}}break;case 27:s===null&&u&4&&fp(r);case 26:case 5:Un(n,r),s===null&&u&4&&cp(r),u&512&&Oo(r,r.return);break;case 12:Un(n,r);break;case 31:Un(n,r),u&4&&yp(n,r);break;case 13:Un(n,r),u&4&&vp(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=B_.bind(null,r),aS(n,r))));break;case 22:if(u=r.memoizedState!==null||kn,!u){s=s!==null&&s.memoizedState!==null||st,m=kn;var y=st;kn=u,(st=s)&&!y?Pn(n,r,(r.subtreeFlags&8772)!==0):Un(n,r),kn=m,st=y}break;case 30:break;default:Un(n,r)}}function mp(n){var s=n.alternate;s!==null&&(n.alternate=null,mp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&gl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ke=null,It=!1;function Dn(n,s,r){for(r=r.child;r!==null;)gp(n,s,r),r=r.sibling}function gp(n,s,r){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(ro,r)}catch{}switch(r.tag){case 26:st||yn(r,s),Dn(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:st||yn(r,s);var u=Ke,m=It;fi(r.type)&&(Ke=r.stateNode,It=!1),Dn(n,s,r),Jo(r.stateNode),Ke=u,It=m;break;case 5:st||yn(r,s);case 6:if(u=Ke,m=It,Ke=null,Dn(n,s,r),Ke=u,It=m,Ke!==null)if(It)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(r.stateNode)}catch(y){Ge(r,s,y)}else try{Ke.removeChild(r.stateNode)}catch(y){Ge(r,s,y)}break;case 18:Ke!==null&&(It?(n=Ke,lm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Ps(n)):lm(Ke,r.stateNode));break;case 4:u=Ke,m=It,Ke=r.stateNode.containerInfo,It=!0,Dn(n,s,r),Ke=u,It=m;break;case 0:case 11:case 14:case 15:oi(2,r,s),st||oi(4,r,s),Dn(n,s,r);break;case 1:st||(yn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&up(r,s,u)),Dn(n,s,r);break;case 21:Dn(n,s,r);break;case 22:st=(u=st)||r.memoizedState!==null,Dn(n,s,r),st=u;break;default:Dn(n,s,r)}}function yp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ps(n)}catch(r){Ge(s,s.return,r)}}}function vp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ps(n)}catch(r){Ge(s,s.return,r)}}function D_(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new hp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new hp),s;default:throw Error(o(435,n.tag))}}function aa(n,s){var r=D_(n);s.forEach(function(u){if(!r.has(u)){r.add(u);var m=V_.bind(null,n,u);u.then(m,m)}})}function Mt(n,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],y=n,T=s,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(fi(w.type)){Ke=w.stateNode,It=!1;break e}break;case 5:Ke=w.stateNode,It=!1;break e;case 3:case 4:Ke=w.stateNode.containerInfo,It=!0;break e}w=w.return}if(Ke===null)throw Error(o(160));gp(y,T,m),Ke=null,It=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)_p(s,n),s=s.sibling}var an=null;function _p(n,s){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Mt(s,n),kt(n),u&4&&(oi(3,n,n.return),Lo(3,n),oi(5,n,n.return));break;case 1:Mt(s,n),kt(n),u&512&&(st||r===null||yn(r,r.return)),u&64&&kn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=an;if(Mt(s,n),kt(n),u&512&&(st||r===null||yn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[uo]||y[mt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),_t(y,u,r),y[mt]=n,ct(y),u=y;break e;case"link":var T=_m("link","href",m).get(u+(r.href||""));if(T){for(var w=0;w<T.length;w++)if(y=T[w],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(w,1);break t}}y=m.createElement(u),_t(y,u,r),m.head.appendChild(y);break;case"meta":if(T=_m("meta","content",m).get(u+(r.content||""))){for(w=0;w<T.length;w++)if(y=T[w],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(w,1);break t}}y=m.createElement(u),_t(y,u,r),m.head.appendChild(y);break;default:throw Error(o(468,u))}y[mt]=n,ct(y),u=y}n.stateNode=u}else Sm(m,n.type,n.stateNode);else n.stateNode=vm(m,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?Sm(m,n.type,n.stateNode):vm(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ou(n,n.memoizedProps,r.memoizedProps)}break;case 27:Mt(s,n),kt(n),u&512&&(st||r===null||yn(r,r.return)),r!==null&&u&4&&Ou(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Mt(s,n),kt(n),u&512&&(st||r===null||yn(r,r.return)),n.flags&32){m=n.stateNode;try{ss(m,"")}catch(ie){Ge(n,n.return,ie)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,Ou(n,m,r!==null?r.memoizedProps:m)),u&1024&&(Hu=!0);break;case 6:if(Mt(s,n),kt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(ie){Ge(n,n.return,ie)}}break;case 3:if(wa=null,m=an,an=Ta(s.containerInfo),Mt(s,n),an=m,kt(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Ps(s.containerInfo)}catch(ie){Ge(n,n.return,ie)}Hu&&(Hu=!1,Sp(n));break;case 4:u=an,an=Ta(n.stateNode.containerInfo),Mt(s,n),kt(n),an=u;break;case 12:Mt(s,n),kt(n);break;case 31:Mt(s,n),kt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 13:Mt(s,n),kt(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ua=pt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 22:m=n.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,O=kn,V=st;if(kn=O||m,st=V||A,Mt(s,n),st=V,kn=O,kt(n),u&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(r===null||A||kn||st||Gi(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){A=r=s;try{if(y=A.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=A.stateNode;var F=A.memoizedProps.style,q=F!=null&&F.hasOwnProperty("display")?F.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ie){Ge(A,A.return,ie)}}}else if(s.tag===6){if(r===null){A=s;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(ie){Ge(A,A.return,ie)}}}else if(s.tag===18){if(r===null){A=s;try{var H=A.stateNode;m?um(H,!0):um(A.stateNode,!1)}catch(ie){Ge(A,A.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,aa(n,r))));break;case 19:Mt(s,n),kt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 30:break;case 21:break;default:Mt(s,n),kt(n)}}function kt(n){var s=n.flags;if(s&2){try{for(var r,u=n.return;u!==null;){if(dp(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var m=r.stateNode,y=qu(n);ra(n,y,m);break;case 5:var T=r.stateNode;r.flags&32&&(ss(T,""),r.flags&=-33);var w=qu(n);ra(n,w,T);break;case 3:case 4:var A=r.stateNode.containerInfo,O=qu(n);Gu(n,O,A);break;default:throw Error(o(161))}}catch(V){Ge(n,n.return,V)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Sp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Sp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Un(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)pp(n,s.alternate,s),s=s.sibling}function Gi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:oi(4,s,s.return),Gi(s);break;case 1:yn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&up(s,s.return,r),Gi(s);break;case 27:Jo(s.stateNode);case 26:case 5:yn(s,s.return),Gi(s);break;case 22:s.memoizedState===null&&Gi(s);break;case 30:Gi(s);break;default:Gi(s)}n=n.sibling}}function Pn(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=n,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:Pn(m,y,r),Lo(4,y);break;case 1:if(Pn(m,y,r),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(O){Ge(u,u.return,O)}if(u=y,m=u.updateQueue,m!==null){var w=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)Wf(A[m],w)}catch(O){Ge(u,u.return,O)}}r&&T&64&&lp(y),Oo(y,y.return);break;case 27:fp(y);case 26:case 5:Pn(m,y,r),r&&u===null&&T&4&&cp(y),Oo(y,y.return);break;case 12:Pn(m,y,r);break;case 31:Pn(m,y,r),r&&T&4&&yp(m,y);break;case 13:Pn(m,y,r),r&&T&4&&vp(m,y);break;case 22:y.memoizedState===null&&Pn(m,y,r),Oo(y,y.return);break;case 30:break;default:Pn(m,y,r)}s=s.sibling}}function Bu(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&wo(r))}function Vu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wo(n))}function ln(n,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Tp(n,s,r,u),s=s.sibling}function Tp(n,s,r,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:ln(n,s,r,u),m&2048&&Lo(9,s);break;case 1:ln(n,s,r,u);break;case 3:ln(n,s,r,u),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wo(n)));break;case 12:if(m&2048){ln(n,s,r,u),n=s.stateNode;try{var y=s.memoizedProps,T=y.id,w=y.onPostCommit;typeof w=="function"&&w(T,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(A){Ge(s,s.return,A)}}else ln(n,s,r,u);break;case 31:ln(n,s,r,u);break;case 13:ln(n,s,r,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?ln(n,s,r,u):qo(n,s):y._visibility&2?ln(n,s,r,u):(y._visibility|=2,bs(n,s,r,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Bu(T,s);break;case 24:ln(n,s,r,u),m&2048&&Vu(s.alternate,s);break;default:ln(n,s,r,u)}}function bs(n,s,r,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,T=s,w=r,A=u,O=T.flags;switch(T.tag){case 0:case 11:case 15:bs(y,T,w,A,m),Lo(8,T);break;case 23:break;case 22:var V=T.stateNode;T.memoizedState!==null?V._visibility&2?bs(y,T,w,A,m):qo(y,T):(V._visibility|=2,bs(y,T,w,A,m)),m&&O&2048&&Bu(T.alternate,T);break;case 24:bs(y,T,w,A,m),m&&O&2048&&Vu(T.alternate,T);break;default:bs(y,T,w,A,m)}s=s.sibling}}function qo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,u=s,m=u.flags;switch(u.tag){case 22:qo(r,u),m&2048&&Bu(u.alternate,u);break;case 24:qo(r,u),m&2048&&Vu(u.alternate,u);break;default:qo(r,u)}s=s.sibling}}var Go=8192;function Cs(n,s,r){if(n.subtreeFlags&Go)for(n=n.child;n!==null;)Ep(n,s,r),n=n.sibling}function Ep(n,s,r){switch(n.tag){case 26:Cs(n,s,r),n.flags&Go&&n.memoizedState!==null&&_S(r,an,n.memoizedState,n.memoizedProps);break;case 5:Cs(n,s,r);break;case 3:case 4:var u=an;an=Ta(n.stateNode.containerInfo),Cs(n,s,r),an=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Go,Go=16777216,Cs(n,s,r),Go=u):Cs(n,s,r));break;default:Cs(n,s,r)}}function wp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ho(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];dt=u,Cp(u,n)}wp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bp(n),n=n.sibling}function bp(n){switch(n.tag){case 0:case 11:case 15:Ho(n),n.flags&2048&&oi(9,n,n.return);break;case 3:Ho(n);break;case 12:Ho(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,la(n)):Ho(n);break;default:Ho(n)}}function la(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];dt=u,Cp(u,n)}wp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:oi(8,s,s.return),la(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,la(s));break;default:la(s)}n=n.sibling}}function Cp(n,s){for(;dt!==null;){var r=dt;switch(r.tag){case 0:case 11:case 15:oi(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wo(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,dt=u;else e:for(r=n;dt!==null;){u=dt;var m=u.sibling,y=u.return;if(mp(u),u===r){dt=null;break e}if(m!==null){m.return=y,dt=m;break e}dt=y}}}var U_={getCacheForType:function(n){var s=yt(tt),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r},cacheSignal:function(){return yt(tt).controller.signal}},P_=typeof WeakMap=="function"?WeakMap:Map,Pe=0,ze=null,Ee=null,be=0,qe=0,Bt=null,ri=!1,As=!1,zu=!1,Ln=0,We=0,ai=0,Hi=0,$u=0,Vt=0,xs=0,Bo=null,Dt=null,Fu=!1,ua=0,Ap=0,ca=1/0,da=null,li=null,at=0,ui=null,Rs=null,On=0,Ju=0,Ku=null,xp=null,Vo=0,Yu=null;function zt(){return(Pe&2)!==0&&be!==0?be&-be:D.T!==null?ec():Vd()}function Rp(){if(Vt===0)if((be&536870912)===0||Ae){var n=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Vt=n}else Vt=536870912;return n=Gt.current,n!==null&&(n.flags|=32),Vt}function Ut(n,s,r){(n===ze&&(qe===2||qe===9)||n.cancelPendingCommit!==null)&&(Ns(n,0),ci(n,be,Vt,!1)),lo(n,r),((Pe&2)===0||n!==ze)&&(n===ze&&((Pe&2)===0&&(Hi|=r),We===4&&ci(n,be,Vt,!1)),vn(n))}function Np(n,s,r){if((Pe&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&n.expiredLanes)===0||ao(n,s),m=u?q_(n,s):Qu(n,s,!0),y=u;do{if(m===0){As&&!u&&ci(n,s,0,!1);break}else{if(r=n.current.alternate,y&&!L_(r)){m=Qu(n,s,!1),y=!1;continue}if(m===2){if(y=s,n.errorRecoveryDisabledLanes&y)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var w=n;m=Bo;var A=w.current.memoizedState.isDehydrated;if(A&&(Ns(w,T).flags|=256),T=Qu(w,T,!1),T!==2){if(zu&&!A){w.errorRecoveryDisabledLanes|=y,Hi|=y,m=4;break e}y=Dt,Dt=m,y!==null&&(Dt===null?Dt=y:Dt.push.apply(Dt,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){Ns(n,0),ci(n,s,0,!0);break}e:{switch(u=n,y=m,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:ci(u,s,Vt,!ri);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(m=ua+300-pt(),10<m)){if(ci(u,s,Vt,!ri),Tr(u,0,!0)!==0)break e;On=s,u.timeoutHandle=rm(Ip.bind(null,u,r,Dt,da,Fu,s,Vt,Hi,xs,ri,y,"Throttled",-0,0),m);break e}Ip(u,r,Dt,da,Fu,s,Vt,Hi,xs,ri,y,null,-0,0)}}break}while(!0);vn(n)}function Ip(n,s,r,u,m,y,T,w,A,O,V,F,q,H){if(n.timeoutHandle=-1,F=s.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:En},Ep(s,y,F);var ie=(y&62914560)===y?ua-pt():(y&4194048)===y?Ap-pt():0;if(ie=SS(F,ie),ie!==null){On=y,n.cancelPendingCommit=ie(qp.bind(null,n,s,y,r,u,m,T,w,A,V,F,null,q,H)),ci(n,y,T,!O);return}}qp(n,s,y,r,u,m,T,w,A)}function L_(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],y=m.getSnapshot;m=m.value;try{if(!Ot(y(),m))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(n,s,r,u){s&=~$u,s&=~Hi,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var m=s;0<m;){var y=31-Lt(m),T=1<<y;u[y]=-1,m&=~T}r!==0&&Gd(n,r,s)}function fa(){return(Pe&6)===0?(zo(0),!1):!0}function Xu(){if(Ee!==null){if(qe===0)var n=Ee.return;else n=Ee,An=Mi=null,du(n),_s=null,Co=0,n=Ee;for(;n!==null;)ap(n.alternate,n),n=n.return;Ee=null}}function Ns(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,nS(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),On=0,Xu(),ze=n,Ee=r=bn(n.current,null),be=s,qe=0,Bt=null,ri=!1,As=ao(n,s),zu=!1,xs=Vt=$u=Hi=ai=We=0,Dt=Bo=null,Fu=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var m=31-Lt(u),y=1<<m;s|=n[m],u&=~y}return Ln=s,Dr(),r}function Mp(n,s){ye=null,D.H=Do,s===vs||s===Br?(s=Kf(),qe=3):s===Zl?(s=Kf(),qe=4):qe=s===xu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bt=s,Ee===null&&(We=1,ta(n,Qt(s,n.current)))}function kp(){var n=Gt.current;return n===null?!0:(be&4194048)===be?en===null:(be&62914560)===be||(be&536870912)!==0?n===en:!1}function Dp(){var n=D.H;return D.H=Do,n===null?Do:n}function Up(){var n=D.A;return D.A=U_,n}function ha(){We=4,ri||(be&4194048)!==be&&Gt.current!==null||(As=!0),(ai&134217727)===0&&(Hi&134217727)===0||ze===null||ci(ze,be,Vt,!1)}function Qu(n,s,r){var u=Pe;Pe|=2;var m=Dp(),y=Up();(ze!==n||be!==s)&&(da=null,Ns(n,s)),s=!1;var T=We;e:do try{if(qe!==0&&Ee!==null){var w=Ee,A=Bt;switch(qe){case 8:Xu(),T=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(s=!0);var O=qe;if(qe=0,Bt=null,Is(n,w,A,O),r&&As){T=0;break e}break;default:O=qe,qe=0,Bt=null,Is(n,w,A,O)}}O_(),T=We;break}catch(V){Mp(n,V)}while(!0);return s&&n.shellSuspendCounter++,An=Mi=null,Pe=u,D.H=m,D.A=y,Ee===null&&(ze=null,be=0,Dr()),T}function O_(){for(;Ee!==null;)Pp(Ee)}function q_(n,s){var r=Pe;Pe|=2;var u=Dp(),m=Up();ze!==n||be!==s?(da=null,ca=pt()+500,Ns(n,s)):As=ao(n,s);e:do try{if(qe!==0&&Ee!==null){s=Ee;var y=Bt;t:switch(qe){case 1:qe=0,Bt=null,Is(n,s,y,1);break;case 2:case 9:if(Ff(y)){qe=0,Bt=null,Lp(s);break}s=function(){qe!==2&&qe!==9||ze!==n||(qe=7),vn(n)},y.then(s,s);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Ff(y)?(qe=0,Bt=null,Lp(s)):(qe=0,Bt=null,Is(n,s,y,7));break;case 5:var T=null;switch(Ee.tag){case 26:T=Ee.memoizedState;case 5:case 27:var w=Ee;if(T?Tm(T):w.stateNode.complete){qe=0,Bt=null;var A=w.sibling;if(A!==null)Ee=A;else{var O=w.return;O!==null?(Ee=O,pa(O)):Ee=null}break t}}qe=0,Bt=null,Is(n,s,y,5);break;case 6:qe=0,Bt=null,Is(n,s,y,6);break;case 8:Xu(),We=6;break e;default:throw Error(o(462))}}G_();break}catch(V){Mp(n,V)}while(!0);return An=Mi=null,D.H=u,D.A=m,Pe=r,Ee!==null?0:(ze=null,be=0,Dr(),We)}function G_(){for(;Ee!==null&&!Wi();)Pp(Ee)}function Pp(n){var s=op(n.alternate,n,Ln);n.memoizedProps=n.pendingProps,s===null?pa(n):Ee=s}function Lp(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=Zh(r,s,s.pendingProps,s.type,void 0,be);break;case 11:s=Zh(r,s,s.pendingProps,s.type.render,s.ref,be);break;case 5:du(s);default:ap(r,s),s=Ee=Uf(s,Ln),s=op(r,s,Ln)}n.memoizedProps=n.pendingProps,s===null?pa(n):Ee=s}function Is(n,s,r,u){An=Mi=null,du(s),_s=null,Co=0;var m=s.return;try{if(x_(n,m,s,r,be)){We=1,ta(n,Qt(r,n.current)),Ee=null;return}}catch(y){if(m!==null)throw Ee=m,y;We=1,ta(n,Qt(r,n.current)),Ee=null;return}s.flags&32768?(Ae||u===1?n=!0:As||(be&536870912)!==0?n=!1:(ri=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Op(s,n)):pa(s)}function pa(n){var s=n;do{if((s.flags&32768)!==0){Op(s,ri);return}n=s.return;var r=I_(s.alternate,s,Ln);if(r!==null){Ee=r;return}if(s=s.sibling,s!==null){Ee=s;return}Ee=s=n}while(s!==null);We===0&&(We=5)}function Op(n,s){do{var r=M_(n.alternate,n);if(r!==null){r.flags&=32767,Ee=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){Ee=n;return}Ee=n=r}while(n!==null);We=6,Ee=null}function qp(n,s,r,u,m,y,T,w,A){n.cancelPendingCommit=null;do ma();while(at!==0);if((Pe&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=ql,v0(n,r,y,T,w,A),n===ze&&(Ee=ze=null,be=0),Rs=s,ui=n,On=r,Ju=y,Ku=m,xp=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,z_(yr,function(){return zp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,m=$.p,$.p=2,T=Pe,Pe|=4;try{k_(n,s,r)}finally{Pe=T,$.p=m,D.T=u}}at=1,Gp(),Hp(),Bp()}}function Gp(){if(at===1){at=0;var n=ui,s=Rs,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=D.T,D.T=null;var u=$.p;$.p=2;var m=Pe;Pe|=4;try{_p(s,n);var y=lc,T=Cf(n.containerInfo),w=y.focusedElem,A=y.selectionRange;if(T!==w&&w&&w.ownerDocument&&bf(w.ownerDocument.documentElement,w)){if(A!==null&&Dl(w)){var O=A.start,V=A.end;if(V===void 0&&(V=O),"selectionStart"in w)w.selectionStart=O,w.selectionEnd=Math.min(V,w.value.length);else{var F=w.ownerDocument||document,q=F&&F.defaultView||window;if(q.getSelection){var H=q.getSelection(),ie=w.textContent.length,ue=Math.min(A.start,ie),Ve=A.end===void 0?ue:Math.min(A.end,ie);!H.extend&&ue>Ve&&(T=Ve,Ve=ue,ue=T);var k=wf(w,ue),I=wf(w,Ve);if(k&&I&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==I.node||H.focusOffset!==I.offset)){var L=F.createRange();L.setStart(k.node,k.offset),H.removeAllRanges(),ue>Ve?(H.addRange(L),H.extend(I.node,I.offset)):(L.setEnd(I.node,I.offset),H.addRange(L))}}}}for(F=[],H=w;H=H.parentNode;)H.nodeType===1&&F.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<F.length;w++){var z=F[w];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}xa=!!ac,lc=ac=null}finally{Pe=m,$.p=u,D.T=r}}n.current=s,at=2}}function Hp(){if(at===2){at=0;var n=ui,s=Rs,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=D.T,D.T=null;var u=$.p;$.p=2;var m=Pe;Pe|=4;try{pp(n,s.alternate,s)}finally{Pe=m,$.p=u,D.T=r}}at=3}}function Bp(){if(at===4||at===3){at=0,oo();var n=ui,s=Rs,r=On,u=xp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?at=5:(at=0,Rs=ui=null,Vp(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(li=null),pl(r),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(ro,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,m=$.p,$.p=2,D.T=null;try{for(var y=n.onRecoverableError,T=0;T<u.length;T++){var w=u[T];y(w.value,{componentStack:w.stack})}}finally{D.T=s,$.p=m}}(On&3)!==0&&ma(),vn(n),m=n.pendingLanes,(r&261930)!==0&&(m&42)!==0?n===Yu?Vo++:(Vo=0,Yu=n):Vo=0,zo(0)}}function Vp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,wo(s)))}function ma(){return Gp(),Hp(),Bp(),zp()}function zp(){if(at!==5)return!1;var n=ui,s=Ju;Ju=0;var r=pl(On),u=D.T,m=$.p;try{$.p=32>r?32:r,D.T=null,r=Ku,Ku=null;var y=ui,T=On;if(at=0,Rs=ui=null,On=0,(Pe&6)!==0)throw Error(o(331));var w=Pe;if(Pe|=4,bp(y.current),Tp(y,y.current,T,r),Pe=w,zo(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(ro,y)}catch{}return!0}finally{$.p=m,D.T=u,Vp(n,s)}}function $p(n,s,r){s=Qt(r,s),s=Au(n.stateNode,s,2),n=ni(n,s,2),n!==null&&(lo(n,2),vn(n))}function Ge(n,s,r){if(n.tag===3)$p(n,n,r);else for(;s!==null;){if(s.tag===3){$p(s,n,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(li===null||!li.has(u))){n=Qt(r,n),r=Fh(2),u=ni(s,r,2),u!==null&&(Jh(r,u,s,n),lo(u,2),vn(u));break}}s=s.return}}function Wu(n,s,r){var u=n.pingCache;if(u===null){u=n.pingCache=new P_;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(r)||(zu=!0,m.add(r),n=H_.bind(null,n,s,r),s.then(n,n))}function H_(n,s,r){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,ze===n&&(be&r)===r&&(We===4||We===3&&(be&62914560)===be&&300>pt()-ua?(Pe&2)===0&&Ns(n,0):$u|=r,xs===be&&(xs=0)),vn(n)}function Fp(n,s){s===0&&(s=qd()),n=Ri(n,s),n!==null&&(lo(n,s),vn(n))}function B_(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),Fp(n,r)}function V_(n,s){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Fp(n,r)}function z_(n,s){return Fn(n,s)}var ga=null,Ms=null,ju=!1,ya=!1,Zu=!1,di=0;function vn(n){n!==Ms&&n.next===null&&(Ms===null?ga=Ms=n:Ms=Ms.next=n),ya=!0,ju||(ju=!0,F_())}function zo(n,s){if(!Zu&&ya){Zu=!0;do for(var r=!1,u=ga;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,w=u.pingedLanes;y=(1<<31-Lt(42|n)+1)-1,y&=m&~(T&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Xp(u,y))}else y=be,y=Tr(u,u===ze?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||ao(u,y)||(r=!0,Xp(u,y));u=u.next}while(r);Zu=!1}}function $_(){Jp()}function Jp(){ya=ju=!1;var n=0;di!==0&&tS()&&(n=di);for(var s=pt(),r=null,u=ga;u!==null;){var m=u.next,y=Kp(u,s);y===0?(u.next=null,r===null?ga=m:r.next=m,m===null&&(Ms=r)):(r=u,(n!==0||(y&3)!==0)&&(ya=!0)),u=m}at!==0&&at!==5||zo(n),di!==0&&(di=0)}function Kp(n,s){for(var r=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var T=31-Lt(y),w=1<<T,A=m[T];A===-1?((w&r)===0||(w&u)!==0)&&(m[T]=y0(w,s)):A<=s&&(n.expiredLanes|=w),y&=~w}if(s=ze,r=be,r=Tr(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===s&&(qe===2||qe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Jn(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||ao(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(u!==null&&Jn(u),pl(r)){case 2:case 8:r=Ld;break;case 32:r=yr;break;case 268435456:r=Od;break;default:r=yr}return u=Yp.bind(null,n),r=Fn(r,u),n.callbackPriority=s,n.callbackNode=r,s}return u!==null&&u!==null&&Jn(u),n.callbackPriority=2,n.callbackNode=null,2}function Yp(n,s){if(at!==0&&at!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(ma()&&n.callbackNode!==r)return null;var u=be;return u=Tr(n,n===ze?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Np(n,u,s),Kp(n,pt()),n.callbackNode!=null&&n.callbackNode===r?Yp.bind(null,n):null)}function Xp(n,s){if(ma())return null;Np(n,s,!0)}function F_(){iS(function(){(Pe&6)!==0?Fn(Pd,$_):Jp()})}function ec(){if(di===0){var n=gs;n===0&&(n=vr,vr<<=1,(vr&261888)===0&&(vr=256)),di=n}return di}function Qp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Cr(""+n)}function Wp(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function J_(n,s,r,u,m){if(s==="submit"&&r&&r.stateNode===m){var y=Qp((m[Rt]||null).action),T=u.submitter;T&&(s=(s=T[Rt]||null)?Qp(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var w=new Nr("action","action",null,u,m);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(di!==0){var A=T?Wp(m,T):new FormData(m);Su(r,{pending:!0,data:A,method:m.method,action:y},null,A)}}else typeof y=="function"&&(w.preventDefault(),A=T?Wp(m,T):new FormData(m),Su(r,{pending:!0,data:A,method:m.method,action:y},y,A))},currentTarget:m}]})}}for(var tc=0;tc<Ol.length;tc++){var nc=Ol[tc],K_=nc.toLowerCase(),Y_=nc[0].toUpperCase()+nc.slice(1);rn(K_,"on"+Y_)}rn(Rf,"onAnimationEnd"),rn(Nf,"onAnimationIteration"),rn(If,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(c_,"onTransitionRun"),rn(d_,"onTransitionStart"),rn(f_,"onTransitionCancel"),rn(Mf,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function jp(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],m=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var w=u[T],A=w.instance,O=w.currentTarget;if(w=w.listener,A!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=O;try{y(m)}catch(V){kr(V)}m.currentTarget=null,y=A}else for(T=0;T<u.length;T++){if(w=u[T],A=w.instance,O=w.currentTarget,w=w.listener,A!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=O;try{y(m)}catch(V){kr(V)}m.currentTarget=null,y=A}}}}function we(n,s){var r=s[ml];r===void 0&&(r=s[ml]=new Set);var u=n+"__bubble";r.has(u)||(Zp(s,n,2,!1),r.add(u))}function ic(n,s,r){var u=0;s&&(u|=4),Zp(r,n,u,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function sc(n){if(!n[va]){n[va]=!0,Fd.forEach(function(r){r!=="selectionchange"&&(X_.has(r)||ic(r,!1,n),ic(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[va]||(s[va]=!0,ic("selectionchange",!1,s))}}function Zp(n,s,r,u){switch(Rm(s)){case 2:var m=wS;break;case 8:m=bS;break;default:m=_c}r=m.bind(null,s,r,n),m=void 0,!bl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(s,r,{capture:!0,passive:m}):n.addEventListener(s,r,!0):m!==void 0?n.addEventListener(s,r,{passive:m}):n.addEventListener(s,r,!1)}function oc(n,s,r,u,m){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=u.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=Zi(w),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){u=y=T;continue e}w=w.parentNode}}u=u.return}sf(function(){var O=y,V=El(r),F=[];e:{var q=kf.get(n);if(q!==void 0){var H=Nr,ie=n;switch(n){case"keypress":if(xr(r)===0)break e;case"keydown":case"keyup":H=V0;break;case"focusin":ie="focus",H=Rl;break;case"focusout":ie="blur",H=Rl;break;case"beforeblur":case"afterblur":H=Rl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=I0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=F0;break;case Rf:case Nf:case If:H=D0;break;case Mf:H=K0;break;case"scroll":case"scrollend":H=R0;break;case"wheel":H=X0;break;case"copy":case"cut":case"paste":H=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=uf;break;case"toggle":case"beforetoggle":H=W0}var ue=(s&4)!==0,Ve=!ue&&(n==="scroll"||n==="scrollend"),k=ue?q!==null?q+"Capture":null:q;ue=[];for(var I=O,L;I!==null;){var z=I;if(L=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||L===null||k===null||(z=fo(I,k),z!=null&&ue.push(Fo(I,z,L))),Ve)break;I=I.return}0<ue.length&&(q=new H(q,ie,null,r,V),F.push({event:q,listeners:ue}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&r!==Tl&&(ie=r.relatedTarget||r.fromElement)&&(Zi(ie)||ie[ji]))break e;if((H||q)&&(q=V.window===V?V:(q=V.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ie=r.relatedTarget||r.toElement,H=O,ie=ie?Zi(ie):null,ie!==null&&(Ve=l(ie),ue=ie.tag,ie!==Ve||ue!==5&&ue!==27&&ue!==6)&&(ie=null)):(H=null,ie=O),H!==ie)){if(ue=af,z="onMouseLeave",k="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ue=uf,z="onPointerLeave",k="onPointerEnter",I="pointer"),Ve=H==null?q:co(H),L=ie==null?q:co(ie),q=new ue(z,I+"leave",H,r,V),q.target=Ve,q.relatedTarget=L,z=null,Zi(V)===O&&(ue=new ue(k,I+"enter",ie,r,V),ue.target=L,ue.relatedTarget=Ve,z=ue),Ve=z,H&&ie)t:{for(ue=Q_,k=H,I=ie,L=0,z=k;z;z=ue(z))L++;z=0;for(var le=I;le;le=ue(le))z++;for(;0<L-z;)k=ue(k),L--;for(;0<z-L;)I=ue(I),z--;for(;L--;){if(k===I||I!==null&&k===I.alternate){ue=k;break t}k=ue(k),I=ue(I)}ue=null}else ue=null;H!==null&&em(F,q,H,ue,!1),ie!==null&&Ve!==null&&em(F,Ve,ie,ue,!0)}}e:{if(q=O?co(O):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ke=yf;else if(mf(q))if(vf)ke=a_;else{ke=o_;var oe=s_}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&Sl(O.elementType)&&(ke=yf):ke=r_;if(ke&&(ke=ke(n,O))){gf(F,ke,r,V);break e}oe&&oe(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&_l(q,"number",q.value)}switch(oe=O?co(O):window,n){case"focusin":(mf(oe)||oe.contentEditable==="true")&&(ls=oe,Ul=O,So=null);break;case"focusout":So=Ul=ls=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,Af(F,r,V);break;case"selectionchange":if(u_)break;case"keydown":case"keyup":Af(F,r,V)}var ve;if(Il)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else as?hf(n,r)&&(Ce="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Ce="onCompositionStart");Ce&&(cf&&r.locale!=="ko"&&(as||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&as&&(ve=of()):(Xn=V,Cl="value"in Xn?Xn.value:Xn.textContent,as=!0)),oe=_a(O,Ce),0<oe.length&&(Ce=new lf(Ce,n,null,r,V),F.push({event:Ce,listeners:oe}),ve?Ce.data=ve:(ve=pf(r),ve!==null&&(Ce.data=ve)))),(ve=Z0?e_(n,r):t_(n,r))&&(Ce=_a(O,"onBeforeInput"),0<Ce.length&&(oe=new lf("onBeforeInput","beforeinput",null,r,V),F.push({event:oe,listeners:Ce}),oe.data=ve)),J_(F,n,O,r,V)}jp(F,s)})}function Fo(n,s,r){return{instance:n,listener:s,currentTarget:r}}function _a(n,s){for(var r=s+"Capture",u=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=fo(n,r),m!=null&&u.unshift(Fo(n,m,y)),m=fo(n,s),m!=null&&u.push(Fo(n,m,y))),n.tag===3)return u;n=n.return}return[]}function Q_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function em(n,s,r,u,m){for(var y=s._reactName,T=[];r!==null&&r!==u;){var w=r,A=w.alternate,O=w.stateNode;if(w=w.tag,A!==null&&A===u)break;w!==5&&w!==26&&w!==27||O===null||(A=O,m?(O=fo(r,y),O!=null&&T.unshift(Fo(r,O,A))):m||(O=fo(r,y),O!=null&&T.push(Fo(r,O,A)))),r=r.return}T.length!==0&&n.push({event:s,listeners:T})}var W_=/\r\n?/g,j_=/\u0000|\uFFFD/g;function tm(n){return(typeof n=="string"?n:""+n).replace(W_,`
`).replace(j_,"")}function nm(n,s){return s=tm(s),tm(n)===s}function Be(n,s,r,u,m,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ss(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ss(n,""+u);break;case"className":wr(n,"class",u);break;case"tabIndex":wr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(n,r,u);break;case"style":tf(n,u,y);break;case"data":if(s!=="object"){wr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Cr(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&Be(n,s,"name",m.name,m,null),Be(n,s,"formEncType",m.formEncType,m,null),Be(n,s,"formMethod",m.formMethod,m,null),Be(n,s,"formTarget",m.formTarget,m,null)):(Be(n,s,"encType",m.encType,m,null),Be(n,s,"method",m.method,m,null),Be(n,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Cr(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=En);break;case"onScroll":u!=null&&we("scroll",n);break;case"onScrollEnd":u!=null&&we("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=Cr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":we("beforetoggle",n),we("toggle",n),Er(n,"popover",u);break;case"xlinkActuate":Tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Tn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Tn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Tn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Tn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Er(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=A0.get(r)||r,Er(n,r,u))}}function rc(n,s,r,u,m,y){switch(r){case"style":tf(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"children":typeof u=="string"?ss(n,u):(typeof u=="number"||typeof u=="bigint")&&ss(n,""+u);break;case"onScroll":u!=null&&we("scroll",n);break;case"onScrollEnd":u!=null&&we("scrollend",n);break;case"onClick":u!=null&&(n.onclick=En);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),s=r.slice(2,m?r.length-7:void 0),y=n[Rt]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(s,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,u,m);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):Er(n,r,u)}}}function _t(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",n),we("load",n);var u=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(n,s,y,T,r,null)}}m&&Be(n,s,"srcSet",r.srcSet,r,null),u&&Be(n,s,"src",r.src,r,null);return;case"input":we("invalid",n);var w=y=T=m=null,A=null,O=null;for(u in r)if(r.hasOwnProperty(u)){var V=r[u];if(V!=null)switch(u){case"name":m=V;break;case"type":T=V;break;case"checked":A=V;break;case"defaultChecked":O=V;break;case"value":y=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,s));break;default:Be(n,s,u,V,r,null)}}Wd(n,y,w,A,O,T,m,!1);return;case"select":we("invalid",n),u=T=y=null;for(m in r)if(r.hasOwnProperty(m)&&(w=r[m],w!=null))switch(m){case"value":y=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:Be(n,s,m,w,r,null)}s=y,r=T,n.multiple=!!u,s!=null?is(n,!!u,s,!1):r!=null&&is(n,!!u,r,!0);return;case"textarea":we("invalid",n),y=m=u=null;for(T in r)if(r.hasOwnProperty(T)&&(w=r[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":m=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:Be(n,s,T,w,r,null)}Zd(n,u,m,y);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(u=r[A],u!=null))switch(A){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Be(n,s,A,u,r,null)}return;case"dialog":we("beforetoggle",n),we("toggle",n),we("cancel",n),we("close",n);break;case"iframe":case"object":we("load",n);break;case"video":case"audio":for(u=0;u<$o.length;u++)we($o[u],n);break;case"image":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"embed":case"source":case"link":we("error",n),we("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in r)if(r.hasOwnProperty(O)&&(u=r[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(n,s,O,u,r,null)}return;default:if(Sl(s)){for(V in r)r.hasOwnProperty(V)&&(u=r[V],u!==void 0&&rc(n,s,V,u,r,void 0));return}}for(w in r)r.hasOwnProperty(w)&&(u=r[w],u!=null&&Be(n,s,w,u,r,null))}function Z_(n,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,w=null,A=null,O=null,V=null;for(H in r){var F=r[H];if(r.hasOwnProperty(H)&&F!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":A=F;default:u.hasOwnProperty(H)||Be(n,s,H,null,u,F)}}for(var q in u){var H=u[q];if(F=r[q],u.hasOwnProperty(q)&&(H!=null||F!=null))switch(q){case"type":y=H;break;case"name":m=H;break;case"checked":O=H;break;case"defaultChecked":V=H;break;case"value":T=H;break;case"defaultValue":w=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:H!==F&&Be(n,s,q,H,u,F)}}vl(n,T,w,A,O,V,y,m);return;case"select":H=T=w=q=null;for(y in r)if(A=r[y],r.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":H=A;default:u.hasOwnProperty(y)||Be(n,s,y,null,u,A)}for(m in u)if(y=u[m],A=r[m],u.hasOwnProperty(m)&&(y!=null||A!=null))switch(m){case"value":q=y;break;case"defaultValue":w=y;break;case"multiple":T=y;default:y!==A&&Be(n,s,m,y,u,A)}s=w,r=T,u=H,q!=null?is(n,!!r,q,!1):!!u!=!!r&&(s!=null?is(n,!!r,s,!0):is(n,!!r,r?[]:"",!1));return;case"textarea":H=q=null;for(w in r)if(m=r[w],r.hasOwnProperty(w)&&m!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Be(n,s,w,null,u,m)}for(T in u)if(m=u[T],y=r[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":q=m;break;case"defaultValue":H=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==y&&Be(n,s,T,m,u,y)}jd(n,q,H);return;case"option":for(var ie in r)if(q=r[ie],r.hasOwnProperty(ie)&&q!=null&&!u.hasOwnProperty(ie))switch(ie){case"selected":n.selected=!1;break;default:Be(n,s,ie,null,u,q)}for(A in u)if(q=u[A],H=r[A],u.hasOwnProperty(A)&&q!==H&&(q!=null||H!=null))switch(A){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Be(n,s,A,q,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in r)q=r[ue],r.hasOwnProperty(ue)&&q!=null&&!u.hasOwnProperty(ue)&&Be(n,s,ue,null,u,q);for(O in u)if(q=u[O],H=r[O],u.hasOwnProperty(O)&&q!==H&&(q!=null||H!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:Be(n,s,O,q,u,H)}return;default:if(Sl(s)){for(var Ve in r)q=r[Ve],r.hasOwnProperty(Ve)&&q!==void 0&&!u.hasOwnProperty(Ve)&&rc(n,s,Ve,void 0,u,q);for(V in u)q=u[V],H=r[V],!u.hasOwnProperty(V)||q===H||q===void 0&&H===void 0||rc(n,s,V,q,u,H);return}}for(var k in r)q=r[k],r.hasOwnProperty(k)&&q!=null&&!u.hasOwnProperty(k)&&Be(n,s,k,null,u,q);for(F in u)q=u[F],H=r[F],!u.hasOwnProperty(F)||q===H||q==null&&H==null||Be(n,s,F,q,u,H)}function im(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],y=m.transferSize,T=m.initiatorType,w=m.duration;if(y&&w&&im(T)){for(T=0,w=m.responseEnd,u+=1;u<r.length;u++){var A=r[u],O=A.startTime;if(O>w)break;var V=A.transferSize,F=A.initiatorType;V&&im(F)&&(A=A.responseEnd,T+=V*(A<w?1:(w-O)/(A-O)))}if(--u,s+=8*(y+T)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ac=null,lc=null;function Sa(n){return n.nodeType===9?n:n.ownerDocument}function sm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function om(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function uc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cc=null;function tS(){var n=window.event;return n&&n.type==="popstate"?n===cc?!1:(cc=n,!0):(cc=null,!1)}var rm=typeof setTimeout=="function"?setTimeout:void 0,nS=typeof clearTimeout=="function"?clearTimeout:void 0,am=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof am<"u"?function(n){return am.resolve(null).then(n).catch(sS)}:rm;function sS(n){setTimeout(function(){throw n})}function fi(n){return n==="head"}function lm(n,s){var r=s,u=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(m),Ps(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Jo(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Jo(r);for(var y=r.firstChild;y;){var T=y.nextSibling,w=y.nodeName;y[uo]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&Jo(n.ownerDocument.body);r=m}while(r);Ps(s)}function um(n,s){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function dc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":dc(r),gl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function oS(n,s,r,u){for(;n.nodeType===1;){var m=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[uo])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=tn(n.nextSibling),n===null)break}return null}function rS(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=tn(n.nextSibling),n===null))return null;return n}function cm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=tn(n.nextSibling),n===null))return null;return n}function fc(n){return n.data==="$?"||n.data==="$~"}function hc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function aS(n,s){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function tn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var pc=null;function dm(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(s===0)return tn(n.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}n=n.nextSibling}return null}function fm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return n;s--}else r!=="/$"&&r!=="/&"||s++}n=n.previousSibling}return null}function hm(n,s,r){switch(s=Sa(r),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Jo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);gl(n)}var nn=new Map,pm=new Set;function Ta(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var qn=$.d;$.d={f:lS,r:uS,D:cS,C:dS,L:fS,m:hS,X:mS,S:pS,M:gS};function lS(){var n=qn.f(),s=fa();return n||s}function uS(n){var s=es(n);s!==null&&s.tag===5&&s.type==="form"?Mh(s):qn.r(n)}var ks=typeof document>"u"?null:document;function mm(n,s,r){var u=ks;if(u&&typeof s=="string"&&s){var m=Yt(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),pm.has(m)||(pm.add(m),n={rel:n,crossOrigin:r,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),_t(s,"link",n),ct(s),u.head.appendChild(s)))}}function cS(n){qn.D(n),mm("dns-prefetch",n,null)}function dS(n,s){qn.C(n,s),mm("preconnect",n,s)}function fS(n,s,r){qn.L(n,s,r);var u=ks;if(u&&n&&s){var m='link[rel="preload"][as="'+Yt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Yt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Yt(r.imageSizes)+'"]')):m+='[href="'+Yt(n)+'"]';var y=m;switch(s){case"style":y=Ds(n);break;case"script":y=Us(n)}nn.has(y)||(n=_({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),nn.set(y,n),u.querySelector(m)!==null||s==="style"&&u.querySelector(Ko(y))||s==="script"&&u.querySelector(Yo(y))||(s=u.createElement("link"),_t(s,"link",n),ct(s),u.head.appendChild(s)))}}function hS(n,s){qn.m(n,s);var r=ks;if(r&&n){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Yt(u)+'"][href="'+Yt(n)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Us(n)}if(!nn.has(y)&&(n=_({rel:"modulepreload",href:n},s),nn.set(y,n),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Yo(y)))return}u=r.createElement("link"),_t(u,"link",n),ct(u),r.head.appendChild(u)}}}function pS(n,s,r){qn.S(n,s,r);var u=ks;if(u&&n){var m=ts(u).hoistableStyles,y=Ds(n);s=s||"default";var T=m.get(y);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(Ko(y)))w.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},r),(r=nn.get(y))&&mc(n,r);var A=T=u.createElement("link");ct(A),_t(A,"link",n),A._p=new Promise(function(O,V){A.onload=O,A.onerror=V}),A.addEventListener("load",function(){w.loading|=1}),A.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ea(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(y,T)}}}function mS(n,s){qn.X(n,s);var r=ks;if(r&&n){var u=ts(r).hoistableScripts,m=Us(n),y=u.get(m);y||(y=r.querySelector(Yo(m)),y||(n=_({src:n,async:!0},s),(s=nn.get(m))&&gc(n,s),y=r.createElement("script"),ct(y),_t(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function gS(n,s){qn.M(n,s);var r=ks;if(r&&n){var u=ts(r).hoistableScripts,m=Us(n),y=u.get(m);y||(y=r.querySelector(Yo(m)),y||(n=_({src:n,async:!0,type:"module"},s),(s=nn.get(m))&&gc(n,s),y=r.createElement("script"),ct(y),_t(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function gm(n,s,r,u){var m=(m=Se.current)?Ta(m):null;if(!m)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ds(r.href),r=ts(m).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Ds(r.href);var y=ts(m).hoistableStyles,T=y.get(n);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,T),(y=m.querySelector(Ko(n)))&&!y._p&&(T.instance=y,T.state.loading=5),nn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},nn.set(n,r),y||yS(m,n,r,T.state))),s&&u===null)throw Error(o(528,""));return T}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Us(r),r=ts(m).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Ds(n){return'href="'+Yt(n)+'"'}function Ko(n){return'link[rel="stylesheet"]['+n+"]"}function ym(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function yS(n,s,r,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),_t(s,"link",r),ct(s),n.head.appendChild(s))}function Us(n){return'[src="'+Yt(n)+'"]'}function Yo(n){return"script[async]"+n}function vm(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Yt(r.href)+'"]');if(u)return s.instance=u,ct(u),u;var m=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ct(u),_t(u,"style",m),Ea(u,r.precedence,n),s.instance=u;case"stylesheet":m=Ds(r.href);var y=n.querySelector(Ko(m));if(y)return s.state.loading|=4,s.instance=y,ct(y),y;u=ym(r),(m=nn.get(m))&&mc(u,m),y=(n.ownerDocument||n).createElement("link"),ct(y);var T=y;return T._p=new Promise(function(w,A){T.onload=w,T.onerror=A}),_t(y,"link",u),s.state.loading|=4,Ea(y,r.precedence,n),s.instance=y;case"script":return y=Us(r.src),(m=n.querySelector(Yo(y)))?(s.instance=m,ct(m),m):(u=r,(m=nn.get(y))&&(u=_({},r),gc(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),ct(m),_t(m,"link",u),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ea(u,r.precedence,n));return s.instance}function Ea(n,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===s)y=w;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function mc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function gc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var wa=null;function _m(n,s,r){if(wa===null){var u=new Map,m=wa=new Map;m.set(r,u)}else m=wa,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),m=0;m<r.length;m++){var y=r[m];if(!(y[uo]||y[mt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=n+T;var w=u.get(T);w?w.push(y):u.set(T,[y])}}return u}function Sm(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function vS(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Tm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function _S(n,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Ds(u.href),y=s.querySelector(Ko(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ba.bind(n),s.then(n,n)),r.state.loading|=4,r.instance=y,ct(y);return}y=s.ownerDocument||s,u=ym(u),(m=nn.get(m))&&mc(u,m),y=y.createElement("link"),ct(y);var T=y;T._p=new Promise(function(w,A){T.onload=w,T.onerror=A}),_t(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=ba.bind(n),s.addEventListener("load",r),s.addEventListener("error",r))}}var yc=0;function SS(n,s){return n.stylesheets&&n.count===0&&Aa(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&Aa(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&yc===0&&(yc=62500*eS());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Aa(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>yc?50:800)+s);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function ba(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Aa(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ca=null;function Aa(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ca=new Map,s.forEach(TS,n),Ca=null,ba.call(n))}function TS(n,s){if(!(s.state.loading&4)){var r=Ca.get(n);if(r)var u=r.get(null);else{r=new Map,Ca.set(n,r);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),u=T)}u&&r.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),y=r.get(T)||u,y===u&&r.set(null,m),r.set(T,m),this.count++,u=ba.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Xo={$$typeof:P,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function ES(n,s,r,u,m,y,T,w,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.hiddenUpdates=fl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Em(n,s,r,u,m,y,T,w,A,O,V,F){return n=new ES(n,s,r,T,A,O,V,F,w),s=1,y===!0&&(s|=24),y=qt(3,null,null,s),n.current=y,y.stateNode=n,s=Ql(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},eu(y),n}function wm(n){return n?(n=ds,n):ds}function bm(n,s,r,u,m,y){m=wm(m),u.context===null?u.context=m:u.pendingContext=m,u=ti(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=ni(n,u,s),r!==null&&(Ut(r,n,s),xo(r,n,s))}function Cm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function vc(n,s){Cm(n,s),(n=n.alternate)&&Cm(n,s)}function Am(n){if(n.tag===13||n.tag===31){var s=Ri(n,67108864);s!==null&&Ut(s,n,67108864),vc(n,67108864)}}function xm(n){if(n.tag===13||n.tag===31){var s=zt();s=hl(s);var r=Ri(n,s);r!==null&&Ut(r,n,s),vc(n,s)}}var xa=!0;function wS(n,s,r,u){var m=D.T;D.T=null;var y=$.p;try{$.p=2,_c(n,s,r,u)}finally{$.p=y,D.T=m}}function bS(n,s,r,u){var m=D.T;D.T=null;var y=$.p;try{$.p=8,_c(n,s,r,u)}finally{$.p=y,D.T=m}}function _c(n,s,r,u){if(xa){var m=Sc(u);if(m===null)oc(n,s,u,Ra,r),Nm(n,u);else if(AS(m,n,s,r,u))u.stopPropagation();else if(Nm(n,u),s&4&&-1<CS.indexOf(n)){for(;m!==null;){var y=es(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=wi(y.pendingLanes);if(T!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var A=1<<31-Lt(T);w.entanglements[1]|=A,T&=~A}vn(y),(Pe&6)===0&&(ca=pt()+500,zo(0))}}break;case 31:case 13:w=Ri(y,2),w!==null&&Ut(w,y,2),fa(),vc(y,2)}if(y=Sc(u),y===null&&oc(n,s,u,Ra,r),y===m)break;m=y}m!==null&&u.stopPropagation()}else oc(n,s,u,null,r)}}function Sc(n){return n=El(n),Tc(n)}var Ra=null;function Tc(n){if(Ra=null,n=Zi(n),n!==null){var s=l(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=c(s),n!==null)return n;n=null}else if(r===31){if(n=h(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ra=n,null}function Rm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case Pd:return 2;case Ld:return 8;case yr:case d0:return 32;case Od:return 268435456;default:return 32}default:return 32}}var Ec=!1,hi=null,pi=null,mi=null,Qo=new Map,Wo=new Map,gi=[],CS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nm(n,s){switch(n){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Qo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(s.pointerId)}}function jo(n,s,r,u,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},s!==null&&(s=es(s),s!==null&&Am(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function AS(n,s,r,u,m){switch(s){case"focusin":return hi=jo(hi,n,s,r,u,m),!0;case"dragenter":return pi=jo(pi,n,s,r,u,m),!0;case"mouseover":return mi=jo(mi,n,s,r,u,m),!0;case"pointerover":var y=m.pointerId;return Qo.set(y,jo(Qo.get(y)||null,n,s,r,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Wo.set(y,jo(Wo.get(y)||null,n,s,r,u,m)),!0}return!1}function Im(n){var s=Zi(n.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){n.blockedOn=s,zd(n.priority,function(){xm(r)});return}}else if(s===31){if(s=h(r),s!==null){n.blockedOn=s,zd(n.priority,function(){xm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Na(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=Sc(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);Tl=u,r.target.dispatchEvent(u),Tl=null}else return s=es(r),s!==null&&Am(s),n.blockedOn=r,!1;s.shift()}return!0}function Mm(n,s,r){Na(n)&&r.delete(s)}function xS(){Ec=!1,hi!==null&&Na(hi)&&(hi=null),pi!==null&&Na(pi)&&(pi=null),mi!==null&&Na(mi)&&(mi=null),Qo.forEach(Mm),Wo.forEach(Mm)}function Ia(n,s){n.blockedOn===s&&(n.blockedOn=null,Ec||(Ec=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xS)))}var Ma=null;function km(n){Ma!==n&&(Ma=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ma===n&&(Ma=null);for(var s=0;s<n.length;s+=3){var r=n[s],u=n[s+1],m=n[s+2];if(typeof u!="function"){if(Tc(u||r)===null)continue;break}var y=es(r);y!==null&&(n.splice(s,3),s-=3,Su(y,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function Ps(n){function s(A){return Ia(A,n)}hi!==null&&Ia(hi,n),pi!==null&&Ia(pi,n),mi!==null&&Ia(mi,n),Qo.forEach(s),Wo.forEach(s);for(var r=0;r<gi.length;r++){var u=gi[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<gi.length&&(r=gi[0],r.blockedOn===null);)Im(r),r.blockedOn===null&&gi.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],y=r[u+1],T=m[Rt]||null;if(typeof y=="function")T||km(r);else if(T){var w=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Rt]||null)w=T.formAction;else if(Tc(m)!==null)continue}else w=T.action;typeof w=="function"?r[u+1]=w:(r.splice(u,3),u-=3),km(r)}}}function Dm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function wc(n){this._internalRoot=n}ka.prototype.render=wc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=zt();bm(r,u,n,s,null,null)},ka.prototype.unmount=wc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;bm(n.current,2,null,n,null,null),fa(),s[ji]=null}};function ka(n){this._internalRoot=n}ka.prototype.unstable_scheduleHydration=function(n){if(n){var s=Vd();n={blockedOn:null,target:n,priority:s};for(var r=0;r<gi.length&&s!==0&&s<gi[r].priority;r++);gi.splice(r,0,n),r===0&&Im(n)}};var Um=e.version;if(Um!=="19.2.3")throw Error(o(527,Um,"19.2.3"));$.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var RS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{ro=Da.inject(RS),Pt=Da}catch{}}return er.createRoot=function(n,s){if(!a(n))throw Error(o(299));var r=!1,u="",m=Bh,y=Vh,T=zh;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Em(n,1,!1,null,null,r,u,null,m,y,T,Dm),n[ji]=s.current,sc(n),new wc(s)},er.hydrateRoot=function(n,s,r){if(!a(n))throw Error(o(299));var u=!1,m="",y=Bh,T=Vh,w=zh,A=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),s=Em(n,1,!0,s,r??null,u,m,A,y,T,w,Dm),s.context=wm(null),r=s.current,u=zt(),u=hl(u),m=ti(u),m.callback=null,ni(r,m,u),r=u,s.current.lanes=r,lo(s,r),vn(s),n[ji]=s.current,sc(n),new ka(s)},er.version="19.2.3",er}var $m;function GS(){if($m)return Ac.exports;$m=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ac.exports=qS(),Ac.exports}var HS=GS();const BS=Wy(HS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zS=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,o)=>o?o.toUpperCase():i.toLowerCase()),Fm=t=>{const e=zS(t);return e.charAt(0).toUpperCase()+e.slice(1)},jy=(...t)=>t.filter((e,i,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===i).join(" ").trim(),$S=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Te.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c,...h},g)=>Te.createElement("svg",{ref:g,...FS,width:e,height:e,stroke:t,strokeWidth:o?Number(i)*24/Number(e):i,className:jy("lucide",a),...!l&&!$S(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,v])=>Te.createElement(p,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,e)=>{const i=Te.forwardRef(({className:o,...a},l)=>Te.createElement(JS,{ref:l,iconNode:e,className:jy(`lucide-${VS(Fm(t))}`,`lucide-${t}`,o),...a}));return i.displayName=Fm(t),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ls=ut("arrow-right",KS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m8 13 4-7 4 7",key:"4rari8"}],["path",{d:"M9.1 11h5.7",key:"1gkovt"}]],md=ut("book-a",YS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],QS=ut("chevron-left",XS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jS=ut("chevron-right",WS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],eT=ut("circle-alert",ZS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ic=ut("eye",tT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],iT=ut("globe",nT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],oT=ut("house",sT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],gd=ut("languages",rT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zy=ut("layers",aT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],yd=ut("list-todo",lT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],vd=ut("message-square",uT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Mc=ut("pen-tool",cT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],fT=ut("refresh-ccw",dT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],_d=ut("scroll-text",hT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Yi=ut("search",pT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gT=ut("triangle-alert",mT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],vT=ut("volume-2",yT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zi=ut("x",_T),ST={en:{:"Morpheme",:"Parts of Speech",:"Phrase",:"Sentence Component",:"Sentence Types",:"Verb Aspect",:"Special Expressions",:"Fixed Patterns",:"Prefix",:"Suffix",:"Coordinate Phrase",:"Modifier-Head Phrase",:"Verb-Object Phrase",:"Complement Phrase",:"Subject-Predicate Phrase",:"Serial Verb Phrase",:"Pivotal Phrase",:"Locative Phrase",:"Prepositional Phrase",:"-Phrase",:"Simile Phrase",:"Numeral-Measure Phrase",:"Noun",:"Verb",:"Adjective",:"Numeral",:"Measure Word",:"Pronoun",:"Adverb",:"Preposition",:"Conjunction",:"Particle",:"Interjection",:"Onomatopoeia",:"Subject",:"Predicate",:"Object",:"Attributive",:"Adverbial",:"Complement",:"Declarative",:"Interrogative",:"Imperative",:"Exclamatory",:"Time Expression",:"Telling Time","":"Date Expression",:"Currency Expression",:"Number Code Expression",:"Progressive Aspect",:"Locative Noun",:"Time Noun",:"Place Noun",:"Personal Pronoun",:"Demonstrative Pronoun",:"Interrogative Pronoun",:"Modal Verb",:"Directional Verb",:"Separable Word",:"Relational Verb",:"Adverb of Degree",:"Adverb of Scope",:"Adverb of Time",:"Adverb of Negation",:"Adverb of Frequency",:"Adverb of Mood",:"Structural Particle",:"Aspect Particle",:"Modal Particle",:"Nominal Measure Word",:"Verbal Measure Word",:"Time Measure Word",:"Coordinating Conjunction",:"Subordinating Conjunction"},vi:{:"Hnh v",:"T loi",:"Cm t",:"Thnh phn cu",:"Loi cu",:"Th ca ng t",:"Cch din t c bit",:"Cu trc c nh",:"Tin t",:"Hu t",:"Cm t lin hp",:"Cm t chnh ph",:"Cm ng tn",:"Cm b ng",:"Cm ch v",:"Cm ng t lin tip",:"Cm kim ng",:"Cm phng v",:"Cm gii t",:'Cm t c ""',:"Cm so snh",:"Cm s lng",:"Danh t",:"ng t",:"Tnh t",:"S t",:"Lng t",:"i t",:"Ph t",:"Gii t",:"Lin t",:"Tr t",:"Thn t",:"T tng thanh",:"Ch ng",:"V ng",:"Tn ng",:"nh ng",:"Trng ng",:"B ng",:"Cu trn thut",:"Cu nghi vn",:"Cu cu khin",:"Cu cm thn",:"Cch biu t thi gian",:"Cch ni gi","":"Cch ni ngy thng",:"Cch ni tin t",:"Cch ni s hiu",:"Th tip din",:"Danh t ch phng v",:"Danh t ch thi gian",:"Danh t ch ni chn",:"i t nhn xng",:"i t ch th",:"i t nghi vn",:"ng t nng nguyn",:"ng t xu hng",:"T ly hp","-":"Lp li ng t",:"Lp li ng t",:"Lp li tnh t",:"Thnh ng bn ch",:"ng t quan h",:"Khc",:"Ph t ch mc ",:"Ph t ch phm vi",:"Ph t ch thi gian",:"Ph t ph nh",:"Ph t ch tn sut",:"Ph t ch ng kh",:"Tr t kt cu",:"Tr t ng thi",:"Tr t ng kh",:"Danh lng t",:"ng lng t",:"Thi lng t",:"Lin t ng lp",:"Lin t chnh ph",:"Ph t lin kt",:"Th duy tr",1:"B ng trnh  1",2:"B ng trnh  2",3:"B ng trnh  3",2:"B ng trng thi 2",:"Ph t tnh thi",:"Ph t phn on"," ":"Biu th mc ch, nguyn nhn",:"Cu phc ch mc ch",:"Cu phc rt gn"," ":"Biu th cn c, c s"," ":"Khc (Du hiu din ngn)"},zh:{}},wt=(t,e)=>t?e==="zh"?t:ST[e][t]||t:"",Jm={en:{appTitle:"HSK 3.0 Syllabus Explorer",heroTitle:"HSK 3.0 Standard Syllabus",heroDesc:"Explore the official vocabulary, characters, and grammar outline for the modern Chinese Proficiency Test.",searchPlaceholder:"Search for a word, character or grammar point...",levelIndex:"Level Index",totalWords:"Total Words",totalChars:"Characters",totalGrammar:"Grammar Points",vocab:"Vocabulary",chars:"Characters",grammar:"Grammar",official:"Official",ai:"AI",loadAi:"Load AI Supplement",standard:"Standard",advanced:"Advanced",level:"Level",selectLevel:"Select Level",basedOn:"Based on the HSK 3.0 Standards",aiAvailable:"AI-Powered Examples Available",searchResults:"Search Results",foundMatches:'Found {count} matches for "{query}"',tryAgain:"Reset",loadingError:"Unable to load content",word:"Word",pinyin:"Pinyin",pos:"Part of Speech",defAndExample:"Definition & Example",source:"Source",reading:"Reading Recognition",writing:"Writing Requirements",noChars:"No characters found for this selection.",phrase:"Phrase",sentenceComponent:"Sentence Component",syllabusExplorer:"SYLLABUS EXPLORER",tasks:"Tasks",topics:"Topics",allResults:"All Results",allLevels:"All Levels",category:"Category",categoryName:"Category Name",details:"Details",filterBy:"Filter by",primaryTopic:"Primary Topic",secondaryTopic:"Secondary Topic",directory:"Directory",grammarContent:"Grammar Content"},vi:{appTitle:"Khm ph HSK 3.0",heroTitle:"i cng tiu chun HSK 3.0",heroDesc:"Khm ph  cng t vng, ch Hn v ng php chnh thc cho k thi nng lc Hn ng hin i.",searchPlaceholder:"Tm kim t vng, ch Hn hoc ng php...",levelIndex:"Danh sch cp ",totalWords:"Tng s t",totalChars:"Ch Hn",totalGrammar:"im ng php",vocab:"T vng",chars:"Ch Hn",grammar:"Ng php",official:"Chnh thc",ai:"AI",loadAi:"Ti b sung AI",standard:"Tiu chun",advanced:"Cao cp",level:"Cp ",selectLevel:"Chn cp ",basedOn:"Da trn tiu chun HSK 3.0",aiAvailable:"C sn v d AI",searchResults:"Kt qu tm kim",foundMatches:'Tm thy {count} kt qu cho "{query}"',tryAgain:"t li",loadingError:"Khng th ti ni dung",word:"T vng",pinyin:"Phin m",pos:"T loi",defAndExample:"nh ngha & V d",source:"Ngun",reading:"Nhn bit (c)",writing:"Yu cu vit",noChars:"Khng tm thy ch Hn no.",phrase:"Cm t",sentenceComponent:"Thnh phn cu",syllabusExplorer:"KHM PH I CNG",tasks:"Nhim v",topics:"Ch ",allResults:"Tt c",allLevels:"Tt c cp ",category:"Loi",categoryName:"Tn loi",details:"Chi tit",filterBy:"Lc theo",primaryTopic:"Ch  chnh",secondaryTopic:"Ch  ph",directory:"Mc lc",grammarContent:"Ni dung ng php"},zh:{appTitle:"HSK 3.0 ",heroTitle:"HSK 3.0 ",heroDesc:"",searchPlaceholder:"...",levelIndex:"",totalWords:"",totalChars:"",totalGrammar:"",vocab:"",chars:"",grammar:"",official:"",ai:"AI",loadAi:" AI ",standard:"",advanced:"",level:"",selectLevel:"",basedOn:" HSK 3.0 ",aiAvailable:" AI ",searchResults:"",foundMatches:' {count}  "{query}" ',tryAgain:"",loadingError:"",word:"",pinyin:"",pos:"",defAndExample:"",source:"",reading:"",writing:"",noChars:"",phrase:"",sentenceComponent:"",syllabusExplorer:"",tasks:"",topics:"",allResults:"",allLevels:"",category:"",categoryName:"",details:"",filterBy:"",primaryTopic:"",secondaryTopic:"",directory:"",grammarContent:""}},ev=Te.createContext(void 0),TT=({children:t})=>{const[e,i]=Te.useState(()=>localStorage.getItem("language")||"vi");Te.useEffect(()=>{localStorage.setItem("language",e)},[e]);const o=(a,l)=>{let c=Jm[e][a]||Jm.en[a]||a;return l&&Object.entries(l).forEach(([h,g])=>{c=c.replace(`{${h}}`,String(g))}),c};return E.jsx(ev.Provider,{value:{language:e,setLanguage:i,t:o},children:t})},pr=()=>{const t=Te.useContext(ev);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},ET=["all","1","2","3","4","5","6","7-9"],wT=({currentLevel:t,onSelectLevel:e})=>{const{t:i}=pr();return E.jsxs("div",{className:"w-full md:w-64 bg-white md:h-screen border-r border-gray-200 flex flex-col shrink-0",children:[E.jsxs("div",{className:"p-6 flex items-center space-x-2 border-b border-gray-100",children:[E.jsx("div",{className:"bg-hsk-red text-white p-2 rounded-lg",children:E.jsx(Zy,{size:24})}),E.jsxs("div",{children:[E.jsx("h1",{className:"text-xl font-bold text-ink",children:"HSK 3.0"}),E.jsx("p",{className:"text-xs text-gray-500 font-medium tracking-wider",children:i("syllabusExplorer")})]})]}),E.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[E.jsx("h2",{className:"text-xs font-semibold text-gray-400 uppercase tracking-widest mb-4 px-2",children:i("selectLevel")}),E.jsx("div",{className:"flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible pb-2 md:pb-0",children:ET.map(o=>E.jsxs("button",{onClick:()=>e(o),className:`
                flex items-center px-4 py-3 rounded-xl transition-all duration-200 text-sm font-medium whitespace-nowrap
                ${t===o?"bg-hsk-red text-white shadow-md shadow-red-200 translate-x-1":"text-gray-600 hover:bg-gray-50 hover:text-hsk-red"}
              `,children:[E.jsx("span",{className:`
                w-8 h-8 rounded-full flex items-center justify-center mr-3 text-xs font-bold
                ${t===o?"bg-white text-hsk-red":"bg-gray-100 text-gray-500"}
              `,children:o==="all"?"":o==="7-9"?"Adv":o}),o==="all"?i("allLevels"):`HSK ${i("level")} ${o}`]},o))})]}),E.jsx("div",{className:"p-6 border-t border-gray-100 hidden md:block",children:E.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[i("basedOn")," ",E.jsx("br",{}),"(Modern Chinese Proficiency Test)"]})})]})},bT=({currentCategory:t,onSelectCategory:e})=>{const{t:i}=pr(),o=[{id:"vocabulary",label:i("vocab"),icon:E.jsx(md,{size:18})},{id:"characters",label:i("chars"),icon:E.jsx(gd,{size:18})},{id:"grammar",label:i("grammar"),icon:E.jsx(_d,{size:18})},{id:"tasks",label:i("tasks"),icon:E.jsx(yd,{size:18})},{id:"topics",label:i("topics"),icon:E.jsx(vd,{size:18})}];return E.jsx("div",{className:"flex space-x-1 bg-gray-100/50 p-1 rounded-2xl w-full max-w-2xl mx-auto mb-8",children:o.map(a=>E.jsxs("button",{onClick:()=>e(a.id),className:`
            flex-1 flex items-center justify-center py-2.5 text-sm font-medium rounded-xl transition-all duration-200
            ${t===a.id?"bg-white text-ink shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 hover:bg-gray-200/50"}
          `,children:[E.jsx("span",{className:"mr-2 opacity-70",children:a.icon}),a.label]},a.id))})},Ua=({currentPage:t,totalPages:e,onPageChange:i})=>{const[o,a]=Te.useState(t.toString());Te.useEffect(()=>{a(t.toString())},[t]);const l=()=>{t>1&&i(t-1)},c=()=>{t<e&&i(t+1)},h=p=>{a(p.target.value)},g=p=>{if(p.key==="Enter"){const v=parseInt(o);!isNaN(v)&&v>=1&&v<=e?i(v):a(t.toString())}};return e<=1?null:E.jsxs("div",{className:"flex justify-center items-center gap-4 py-8",children:[E.jsx("button",{onClick:l,disabled:t===1,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed text-gray-600 transition-colors","aria-label":"Previous Page",children:E.jsx(QS,{size:20})}),E.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 font-medium font-mono",children:[E.jsx("span",{children:"Page"}),E.jsx("input",{type:"text",value:o,onChange:h,onKeyDown:g,onBlur:()=>a(t.toString()),className:"w-12 h-8 text-center border border-gray-200 rounded-md focus:ring-2 focus:ring-hsk-red/20 focus:border-hsk-red outline-none transition-all"}),E.jsx("span",{className:"text-gray-400",children:"/"}),E.jsx("span",{children:e})]}),E.jsx("button",{onClick:c,disabled:t===e,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed text-gray-600 transition-colors","aria-label":"Next Page",children:E.jsx(jS,{size:20})})]})};function CT(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)})}class Ys{constructor(){this.cache=new Map,this.queue=[],this.isProcessing=!1}getWsUrl(){const e=window.location.protocol==="https:"?"wss:":"ws:",i=window.location.host;return`${e}//${i}/edge-tts/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=6A5AA1D4-EA85-41EA-8151-81BA150BD555`}static getInstance(){return Ys.instance||(Ys.instance=new Ys),Ys.instance}async speak(e,i="zh-CN-XiaoxiaoNeural"){const o=e.trim();if(!o)return;const a=`${i}:${o}`;if(this.cache.has(a)){const l=this.cache.get(a);return this.playAudio(l)}return new Promise((l,c)=>{this.queue.push({text:o,voice:i,onAudio:h=>{this.cache.set(a,h),this.playAudio(h).then(l).catch(c)},onError:h=>{console.warn("Edge TTS failed, falling back to system:",h),this.fallbackSpeak(o).then(l)}}),this.processQueue()})}async processQueue(){if(this.isProcessing||this.queue.length===0)return;this.isProcessing=!0;const e=this.queue.shift();try{await this.fetchEdgeAudio(e)}catch(i){console.error("Queue processing error",i),e.onError(i)}finally{this.isProcessing=!1,setTimeout(()=>this.processQueue(),200)}}fetchEdgeAudio(e){return new Promise((i,o)=>{let a;try{a=new WebSocket(this.getWsUrl())}catch(h){return o("WebSocket create failed: "+h)}const l=CT().replace(/-/g,"");let c=[];a.binaryType="arraybuffer",a.onopen=()=>{const h=`X-Timestamp:${new Date().toString()}\r
Content-Type:application/json; charset=utf-8\r
Path:speech.config\r
\r
`+JSON.stringify({context:{synthesis:{audio:{metadataoptions:{sentenceBoundaryEnabled:"false",wordBoundaryEnabled:"false"},outputFormat:"audio-24khz-48kbitrate-mono-mp3"}}}});a.send(h);const g=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xml:lang='zh-CN'><voice name='${e.voice||"zh-CN-XiaoxiaoNeural"}'>${e.text}</voice></speak>`,p=`X-RequestId:${l}\r
Content-Type:application/ssml+xml\r
Path:ssml\r
\r
`+g;a.send(p)},a.onmessage=h=>{const g=h.data;if(typeof g=="string"){if(g.includes("Path:turn.end")){a.close();const p=new Blob(c,{type:"audio/mp3"}),v=URL.createObjectURL(p);e.onAudio(v),i()}}else if(g instanceof ArrayBuffer){const v=new DataView(g).getUint16(0),_=g.slice(2+v);c.push(new Blob([_]))}},a.onerror=h=>{console.error("WS Error",h),o(h)},a.onclose=h=>{},setTimeout(()=>{(a.readyState===WebSocket.OPEN||a.readyState===WebSocket.CONNECTING)&&(a.close(),c.length===0&&o("Timeout"))},1e4)})}playAudio(e){return new Promise(i=>{const o=new Audio(e);o.onended=()=>i(),o.onerror=()=>i(),o.play().catch(a=>{console.error("Play failed",a),i()})})}fallbackSpeak(e){return new Promise(i=>{const o=new SpeechSynthesisUtterance(e);o.lang="zh-CN",o.rate=.8,o.onend=()=>i(),o.onerror=()=>i(),window.speechSynthesis.speak(o)})}}const AT=Ys.getInstance(),Os=t=>{const e=t.match(/^(\d+)\s*[(](\d+)[)]$/);return e?E.jsxs("span",{className:"flex items-start justify-center leading-none",children:[E.jsx("span",{children:e[1]}),E.jsx("span",{className:"text-[0.6em] relative -top-0.5 ml-[1px]",children:e[2]})]}):t},Km=t=>{const e=t.match(/^(.+?)(\d+)$/);return e?E.jsxs("span",{children:[e[1],E.jsx("span",{className:"text-[0.6em] align-top relative top-0.5 ml-[1px] text-gray-500 font-sans",children:e[2]})]}):t},tr=({text:t,className:e="",iconSize:i=16})=>{const[o,a]=Te.useState(!1),l=async c=>{if(c.stopPropagation(),!(o||!t)){a(!0);try{await AT.speak(t)}catch(h){console.error("TTS Error",h)}finally{a(!1)}}};return E.jsx("button",{onClick:l,disabled:o,className:`p-1.5 rounded-full hover:bg-hsk-red/10 text-gray-400 hover:text-hsk-red transition-all ${o?"animate-pulse text-hsk-red bg-hsk-red/5":""} ${e}`,title:"Listen","aria-label":"Play audio",children:E.jsx(vT,{size:i})})},xT=({data:t,category:e,level:i,isLoading:o,onRefresh:a})=>{const{t:l,language:c}=pr();if(o)return E.jsx("div",{className:"grid gap-4 w-full animate-pulse max-w-5xl mx-auto mt-8",children:[1,2,3,4,5].map(_e=>E.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm h-16 w-full bg-gray-100"},_e))});if(!t)return null;const h=_e=>_e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),[g,p]=Te.useState(1),[v,_]=Te.useState(""),[S,b]=Te.useState(""),[C,x]=Te.useState(""),[R,U]=Te.useState(""),[G,P]=Te.useState(""),[J,Q]=Te.useState(""),[Y,K]=Te.useState(""),[ae,j]=Te.useState("reading"),ge=e==="tasks"?5e3:50;Te.useEffect(()=>{p(1),K(""),e!=="grammar"&&(b(""),x(""),U("")),e!=="topics"&&(P(""),Q(""))},[e,t,a,v,S,C,R]),Te.useEffect(()=>{const _e=document.querySelector("main");_e&&_e.scrollTo({top:0,behavior:"smooth"})},[g]);const Ne=_e=>{const X=document.getElementById(`task-${_e}`);X&&(X.scrollIntoView({behavior:"smooth"}),K(`task-${_e}`))},Ie=()=>{const _e=i==="all"?c==="en"?"All Levels":c==="vi"?"Tt c cp ":"":`HSK ${i}`;let X="";switch(e){case"vocabulary":X=l("vocab");break;case"characters":X=l("chars");break;case"grammar":X=l("grammar");break;case"tasks":X=l("tasks");break;case"topics":X=l("topics");break;default:X=l("allResults")}return c==="zh"?` ${i==="all"?"":"HSK "+i} ${X}...`:c==="vi"?`Tm kim ${X} ${i==="all"?"Tt c cp ":"HSK "+i}...`:`Search ${_e} ${X}...`};Te.useEffect(()=>{if(e!=="tasks")return;const _e=new IntersectionObserver(D=>{D.forEach($=>{$.isIntersecting&&K($.target.id)})},{rootMargin:"-10% 0px -70% 0px"});return document.querySelectorAll('[id^="task-"]').forEach(D=>_e.observe(D)),()=>_e.disconnect()},[e,t]);const Re=()=>{const _e=t.items.filter($=>{if(e==="grammar"){const te=$,N=/[-]/;if(S&&te.category!==S)return!1;if(C){let B=te.subCategory;if(te.subCategory&&N.test(te.subCategory)&&(B=te.subCategory.split(N)[0].trim()),B!==C)return!1}if(R){let B="/";if(te.subCategory&&N.test(te.subCategory)){const W=te.subCategory.split(N);B=W[1]?W[1].trim():W[0]}else te.pattern&&te.pattern!==te.name&&(B=te.name);if(B!==R)return!1}if(v){const B=v.toLowerCase();return te.name.toLowerCase().includes(B)||te.pattern&&te.pattern.toLowerCase().includes(B)}return!0}if(e==="topics"){const te=$;if(G&&te.primary!==G||J&&te.secondary!==J)return!1;if(v){const N=v.toLowerCase();return te.primary.toLowerCase().includes(N)||te.secondary.toLowerCase().includes(N)}return!0}if(!v)return!0;if(v.startsWith("prim:")){const te=v.slice(5);return $.primary===te}if(v.startsWith("sec:")){const te=v.slice(4);return $.secondary===te}const ee=v.toLowerCase(),fe=h(ee);if("hanzi"in $)return $.hanzi.includes(ee)||$.pinyin.toLowerCase().includes(ee)||h($.pinyin).includes(fe);if("char"in $)return $.char.includes(ee)||$.pinyin&&($.pinyin.toLowerCase().includes(ee)||h($.pinyin).includes(fe));if("name"in $)return!0;if("category"in $&&"description"in $)return $.category.toLowerCase().includes(ee)||$.description.toLowerCase().includes(ee);if("primary"in $){const te=$;if(G&&te.primary!==G||J&&te.secondary!==J)return!1;const N=v.toLowerCase();return te.primary.toLowerCase().includes(N)||te.secondary.toLowerCase().includes(N)}return!1}),X=Math.ceil(_e.length/ge),D=_e.slice((g-1)*ge,g*ge);switch(e){case"vocabulary":return E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"flex justify-end mb-2",children:E.jsxs("label",{className:"relative block w-full max-w-sm",children:[E.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 text-gray-400",children:E.jsx(Yi,{size:16})}),E.jsx("input",{type:"text",placeholder:Ie(),value:v,onChange:M=>_(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-hsk-red/20 shadow-sm bg-white hover:bg-gray-50 transition-all text-gray-700 placeholder-gray-400"}),v&&E.jsx("button",{onClick:()=>_(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:E.jsx(zi,{size:14})})]})}),E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-gray-500 text-xs uppercase tracking-wider",children:[E.jsx("th",{className:"px-6 py-4 font-semibold w-16",children:"No."}),i==="all"&&E.jsx("th",{className:"px-4 py-4 font-semibold w-16",children:"HSK"}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:l("word")}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:l("pinyin")}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:l("pos")}),E.jsx("th",{className:"px-6 py-4 font-semibold w-16",children:"Audio"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-100",children:D.map((M,se)=>E.jsxs("tr",{className:"hover:bg-red-50/30 transition-colors group",children:[E.jsx("td",{className:"px-6 py-4 text-gray-400 font-mono text-sm",children:M.ordinal||(g-1)*ge+se+1}),i==="all"&&E.jsx("td",{className:"px-4 py-4",children:E.jsx("span",{className:`inline-flex items-center justify-center h-6 ${M.level&&M.level.length>2?"px-1.5 min-w-[1.5rem]":"w-6"} bg-hsk-red text-white text-[10px] font-bold rounded-full whitespace-nowrap`,children:Os(M.level)})}),E.jsx("td",{className:"px-6 py-4 text-xl font-serif text-ink font-medium",children:Km(M.hanzi)}),E.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono",children:M.pinyin}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium",children:M.partOfSpeech})}),E.jsx("td",{className:"px-6 py-4",children:E.jsx(tr,{text:M.hanzi})})]},se))})]})})}),X>1&&E.jsx(Ua,{currentPage:g,totalPages:X,onPageChange:p})]});case"characters":const $=D.filter(M=>M.type==="reading"||!M.type),ee=D.filter(M=>M.type==="writing"),fe=(M,se,Le)=>E.jsxs("div",{className:"mb-8 last:mb-0",children:[E.jsxs("h3",{className:"text-lg font-bold text-ink mb-4 flex items-center",children:[E.jsx("span",{className:"bg-gray-100 p-1.5 rounded-lg mr-2 text-gray-600",children:Le}),se]}),E.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:M.map((Oe,rt)=>E.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm flex flex-col items-center text-center hover:border-hsk-red/30 transition-colors relative group",children:[E.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:E.jsx(tr,{text:Oe.char,iconSize:14,className:"bg-white shadow-sm border border-gray-100"})}),i==="all"&&Oe.level&&E.jsx("span",{className:`absolute top-1 left-1 text-[9px] font-bold text-white bg-hsk-red rounded-full h-4 flex items-center justify-center ${Oe.level.length>1?"px-1.5 min-w-[1.25rem]":"w-4"} whitespace-nowrap`,children:Os(Oe.level)}),E.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-hsk-red/5 flex items-center justify-center mb-1 mt-2",children:E.jsx("span",{className:"text-xl md:text-2xl font-serif text-hsk-red",children:Oe.char})}),Oe.pinyin&&E.jsx("p",{className:"font-mono text-xs text-gray-500",children:Oe.pinyin}),Oe.meaning&&E.jsx("p",{className:"text-xs font-medium text-ink truncate w-full mt-1",title:Oe.meaning,children:Oe.meaning})]},rt))})]});return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[E.jsxs("div",{className:"bg-gray-100 p-1 rounded-xl inline-flex gap-1 shadow-inner",children:[E.jsxs("button",{onClick:()=>{j("reading"),p(1)},className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${ae==="reading"?"bg-white text-hsk-red shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[E.jsx(Ic,{size:16}),l("reading")]}),E.jsxs("button",{onClick:()=>{j("writing"),p(1)},className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${ae==="writing"?"bg-white text-hsk-red shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[E.jsx(Mc,{size:16}),l("writing")]})]}),E.jsxs("label",{className:"relative block w-full md:max-w-xs",children:[E.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:E.jsx(Yi,{size:16})}),E.jsx("input",{type:"text",placeholder:Ie(),value:v,onChange:M=>_(M.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-hsk-red/20 shadow-sm bg-gray-50 hover:bg-white transition-all text-gray-700 placeholder-gray-400"}),v&&E.jsx("button",{onClick:()=>_(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:E.jsx(zi,{size:14})})]})]}),ae==="reading"&&$.length>0&&fe($,l("reading"),E.jsx(Ic,{size:16})),ae==="writing"&&ee.length>0&&fe(ee,l("writing"),E.jsx(Mc,{size:16})),ae==="reading"&&$.length===0||ae==="writing"&&ee.length===0?E.jsxs("div",{className:"text-center py-12 text-gray-400 bg-white rounded-xl border border-dashed border-gray-200",children:[E.jsx("div",{className:"flex justify-center mb-3",children:ae==="reading"?E.jsx(Ic,{size:32,className:"opacity-20"}):E.jsx(Mc,{size:32,className:"opacity-20"})}),l("noChars")]}):null,X>1&&E.jsx(Ua,{currentPage:g,totalPages:X,onPageChange:p})]});case"grammar":const te=t.items,N=(M,se)=>{if(c==="en"){if(se==="category")return M.category_en||wt(M.category,"en");if(se==="subCategory")return M.sub_category_en||wt(M.subCategory,"en");if(se==="name")return M.name_en||wt(M.name,"en")}if(c==="vi"){if(se==="category")return M.category_vi||wt(M.category,"vi");if(se==="subCategory")return M.sub_category_vi||wt(M.subCategory,"vi");if(se==="name")return M.name_vi||wt(M.name,"vi")}return se==="category"?wt(M.category,c):se==="subCategory"?wt(M.subCategory,c):M.name},B=M=>{let se=M.subCategory,Le="/",Oe="",rt="/",Fn=M.name;const Jn=/[-]/;if(M.subCategory&&Jn.test(M.subCategory)){const Wi=M.subCategory.split(Jn);se=Wi[0].trim(),Le=Wi[1]?Wi[1].trim():Wi[0];const oo=M.sub_category_en,pt=M.sub_category_vi;if(c==="en"&&oo){const Sn=oo.split(Jn);Sn.length>=2?(Oe=Sn[0].trim(),rt=Sn[1].trim()):(Oe=oo,rt=wt(Le,c)||Le)}else if(c==="vi"&&pt){const Sn=pt.split(Jn);Sn.length>=2?(Oe=Sn[0].trim(),rt=Sn[1].trim()):(Oe=pt,rt=wt(Le,c)||Le)}else Oe=wt(se,c),rt=wt(Le,c)||Le}else M.pattern&&M.pattern!==M.name?(se=M.subCategory,Le=M.name,Fn=M.pattern,Oe=N(M,"subCategory"),c==="en"&&M.name_en?rt=M.name_en:c==="vi"&&M.name_vi?rt=M.name_vi:rt=wt(Le,c)||Le):(se=M.subCategory,Le="/",Oe=N(M,"subCategory"),rt="/");return{catNameRaw:se,detailsRaw:Le,category:M.category,displayCatName:Oe||"-",displayDetails:rt,contentRaw:Fn}},W=Array.from(new Set(te.map(M=>M.category).filter(Boolean))),ne=S?te.filter(M=>M.category===S):te,pe=Array.from(new Set(ne.map(M=>{const{catNameRaw:se}=B(M);return se}).filter(Boolean))),Se=ne.filter(M=>{if(!C)return!0;const{catNameRaw:se}=B(M);return se===C}),Me=Array.from(new Set(Se.map(M=>{const{detailsRaw:se}=B(M);return se==="/"?"":se}).filter(Boolean))),ht=M=>{const se=te.find(Le=>Le.category===M);return se?N(se,"category"):wt(M,c)},Ye=M=>{const se=ne.find(Le=>B(Le).catNameRaw===M);return se?B(se).displayCatName:wt(M,c)},Ei=M=>{const se=Se.find(Le=>B(Le).detailsRaw===M);return se?B(se).displayDetails:wt(M,c)||M};return E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:E.jsxs("div",{className:"flex flex-nowrap gap-2 items-center overflow-x-auto pb-1 scrollbar-hide",children:[E.jsxs("span",{className:"text-sm font-medium text-gray-500 whitespace-nowrap",children:[l("filterBy"),":"]}),E.jsxs("select",{className:"px-2 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hsk-red/20 bg-white max-w-[140px] truncate",onChange:M=>{const se=M.target.value;b(se),x(""),U(""),p(1)},value:S,children:[E.jsx("option",{value:"",children:l("category")}),W.map(M=>E.jsx("option",{value:M,children:ht(M)},M))]}),E.jsxs("select",{className:"px-2 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hsk-red/20 bg-white max-w-[140px] truncate",onChange:M=>{const se=M.target.value;x(se),U(""),p(1)},value:C,children:[E.jsx("option",{value:"",children:l("categoryName")}),pe.map(M=>E.jsx("option",{value:M,children:Ye(M)},M))]}),E.jsxs("select",{className:"px-2 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hsk-red/20 bg-white max-w-[140px] truncate",onChange:M=>{const se=M.target.value;U(se),p(1)},value:R,children:[E.jsx("option",{value:"",children:l("details")}),Me.map(M=>E.jsx("option",{value:M,children:Ei(M)},M))]}),(S||C||R)&&E.jsxs("button",{onClick:()=>{b(""),x(""),U("")},className:"text-gray-400 hover:text-gray-600 text-sm flex items-center gap-1 whitespace-nowrap",children:[E.jsx(zi,{size:14})," ",l("tryAgain")]}),E.jsx("div",{className:"flex-1 min-w-4"}),E.jsxs("label",{className:"relative block ml-auto flex-shrink-0",children:[E.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:E.jsx(Yi,{size:16})}),E.jsx("input",{type:"text",placeholder:Ie(),value:v.includes(":")?"":v,onChange:M=>_(M.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-hsk-red/20 w-48 shadow-sm bg-white placeholder-gray-400/80"}),v&&E.jsx("button",{onClick:()=>_(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:E.jsx(zi,{size:14})})]})]})}),E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-gray-500 text-xs uppercase tracking-wider",children:[i==="all"&&E.jsx("th",{className:"px-4 py-3 font-semibold w-16",children:"HSK"}),E.jsx("th",{className:"px-4 py-3 font-semibold",children:l("category")}),E.jsx("th",{className:"px-4 py-3 font-semibold",children:l("categoryName")}),E.jsx("th",{className:"px-4 py-3 font-semibold",children:l("details")}),E.jsx("th",{className:"px-4 py-3 font-semibold",children:l("grammarContent")}),E.jsx("th",{className:"px-4 py-3 font-semibold w-16",children:"Audio"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-100",children:D.map((M,se)=>{const{displayCatName:Le,displayDetails:Oe,contentRaw:rt}=B(M),Fn=N(M,"category");return E.jsxs("tr",{className:"hover:bg-red-50/30 transition-colors group",children:[i==="all"&&E.jsx("td",{className:"px-4 py-3",children:E.jsx("span",{className:`inline-flex items-center justify-center h-6 ${M.level&&M.level.length>2?"px-1.5 min-w-[1.5rem]":"w-6"} bg-hsk-red text-white text-[10px] font-bold rounded-full whitespace-nowrap`,children:Os(M.level)})}),E.jsx("td",{className:"px-4 py-3",children:E.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 bg-gray-100 px-2 py-1 rounded",children:Fn})}),E.jsx("td",{className:"px-4 py-3",children:E.jsx("div",{className:"font-medium text-ink",children:Le})}),E.jsx("td",{className:"px-4 py-3",children:E.jsx("div",{className:"font-medium text-ink mb-1",children:Oe})}),E.jsx("td",{className:"px-4 py-3",children:E.jsx("div",{className:"font-medium text-ink",children:rt})}),E.jsx("td",{className:"px-4 py-3",children:E.jsx(tr,{text:rt||M.name,iconSize:14})})]},se)})})]})})}),X>1&&E.jsx(Ua,{currentPage:g,totalPages:X,onPageChange:p})]});case"tasks":return E.jsx("div",{className:"flex flex-col gap-6 relative",children:E.jsxs("div",{className:"flex gap-6 items-start",children:[E.jsxs("div",{className:"hidden lg:block w-64 sticky top-6 max-h-[calc(100vh-4rem)] overflow-y-auto bg-gray-50 p-4 rounded-xl border border-gray-100",children:[E.jsx("h3",{className:"font-bold mb-3 px-2 text-gray-800 text-sm uppercase tracking-wider",children:l("directory")}),E.jsx("div",{className:"space-y-1",children:D.map((M,se)=>E.jsxs("button",{onClick:()=>Ne(se),className:`text-left w-full py-2 px-3 text-sm rounded-lg transition-all duration-200 flex items-start gap-2 ${Y===`task-${se}`?"bg-white shadow-sm text-blue-700 font-bold border-l-4 border-blue-600":"text-gray-600 hover:bg-white hover:shadow-sm hover:text-blue-600 border-l-4 border-transparent"}`,title:M.category,children:[i==="all"&&M.level&&E.jsx("span",{className:`inline-flex items-center justify-center shrink-0 h-5 ${M.level.length>2?"px-1 min-w-[1.25rem]":"w-5"} bg-hsk-red text-white text-[9px] font-bold rounded-full whitespace-nowrap mt-0.5`,children:Os(M.level)}),E.jsx("span",{children:M.category})]},se))})]}),E.jsx("div",{className:"flex-1 min-w-0 space-y-6",children:D.map((M,se)=>E.jsxs("div",{id:`task-${se}`,className:`bg-white p-6 rounded-2xl border transition-all duration-300 scroll-mt-24 ${Y===`task-${se}`?"border-blue-200 shadow-md ring-1 ring-blue-100":"border-gray-100 shadow-sm"}`,children:[E.jsx("div",{className:"flex justify-between items-start mb-4",children:E.jsxs("h3",{className:"text-xl font-bold text-ink flex items-center gap-3",children:[i==="all"&&M.level&&E.jsx("span",{className:`inline-flex items-center justify-center h-6 ${M.level.length>2?"px-1.5 min-w-[1.5rem]":"w-6"} bg-hsk-red text-white text-[10px] font-bold rounded-full whitespace-nowrap`,children:Os(M.level)}),M.category]})}),M.description&&E.jsx("p",{className:"text-gray-600 mb-4",children:M.description}),E.jsxs("div",{className:"bg-blue-50/50 rounded-xl p-4 border border-blue-50",children:[E.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-3 uppercase tracking-wide",children:"Can-do Statements"}),E.jsx("ul",{className:"space-y-2",children:M.canDo&&M.canDo.length>0?M.canDo.map((Le,Oe)=>E.jsxs("li",{className:"flex gap-2 text-ink text-sm",children:[E.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),E.jsx("span",{children:Le})]},Oe)):E.jsx("li",{className:"text-gray-400 text-sm italic",children:"No details available."})})]})]},se))})]})});case"topics":const $n=t.items,so=Array.from(new Set($n.map(M=>M.primary).filter(Boolean))),gr=G?$n.filter(M=>M.primary===G):$n,_n=Array.from(new Set(gr.map(M=>M.secondary).filter(Boolean)));return E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:E.jsxs("div",{className:"flex flex-nowrap gap-2 items-center overflow-x-auto pb-1 scrollbar-hide",children:[E.jsxs("span",{className:"text-sm font-medium text-gray-500 whitespace-nowrap",children:[l("filterBy"),":"]}),E.jsxs("select",{className:"px-2 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hsk-red/20 bg-white max-w-[140px] truncate capitalize",onChange:M=>{P(M.target.value),Q(""),p(1)},value:G,children:[E.jsx("option",{value:"",children:l("primaryTopic")}),so.map(M=>E.jsx("option",{value:M,className:"capitalize",children:M},M))]}),E.jsxs("select",{className:"px-2 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hsk-red/20 bg-white max-w-[140px] truncate capitalize",onChange:M=>{Q(M.target.value),p(1)},value:J,children:[E.jsx("option",{value:"",children:l("secondaryTopic")}),_n.map(M=>E.jsx("option",{value:M,className:"capitalize",children:M},M))]}),(G||J)&&E.jsxs("button",{onClick:()=>{P(""),Q("")},className:"text-gray-400 hover:text-gray-600 text-sm flex items-center gap-1 whitespace-nowrap",children:[E.jsx(zi,{size:14})," ",l("tryAgain")]}),E.jsx("div",{className:"flex-1 min-w-4"}),E.jsxs("label",{className:"relative block ml-auto flex-shrink-0",children:[E.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:E.jsx(Yi,{size:16})}),E.jsx("input",{type:"text",placeholder:Ie(),value:v,onChange:M=>_(M.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-hsk-red/20 w-48 shadow-sm bg-white placeholder-gray-400/80"}),v&&E.jsx("button",{onClick:()=>_(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:E.jsx(zi,{size:14})})]})]})}),E.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-gray-500 text-xs uppercase tracking-wider",children:[i==="all"&&E.jsx("th",{className:"px-6 py-4 font-semibold w-16",children:"HSK"}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:l("primaryTopic")}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:l("secondaryTopic")}),E.jsx("th",{className:"px-6 py-4 font-semibold",children:"Items"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-100",children:D.map((M,se)=>E.jsxs("tr",{className:"hover:bg-red-50/30 transition-colors group",children:[i==="all"&&E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:`inline-flex items-center justify-center h-6 ${M.level&&M.level.length>2?"px-1.5 min-w-[1.5rem]":"w-6"} bg-hsk-red text-white text-[10px] font-bold rounded-full whitespace-nowrap`,children:Os(M.level)})}),E.jsx("td",{className:"px-6 py-4 text-ink font-bold align-top capitalize",children:M.primary}),E.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium align-top capitalize",children:M.secondary}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("div",{className:"flex flex-wrap gap-2",children:(M.items||[]).map((Le,Oe)=>E.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm mb-1 inline-block mr-1",children:Le},Oe))})})]},se))})]})})}),X>1&&E.jsx(Ua,{currentPage:g,totalPages:X,onPageChange:p})]});case"search":return E.jsx("div",{className:"space-y-4",children:D.map((M,se)=>{if("hanzi"in M)return E.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-baseline gap-3 mb-1",children:[E.jsx("h3",{className:"text-xl font-bold font-serif text-ink",children:Km(M.hanzi)}),E.jsx(tr,{text:M.hanzi,className:"mt-1"}),E.jsx("span",{className:"text-sm font-mono text-gray-500",children:M.pinyin}),E.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:M.partOfSpeech})]}),E.jsx("p",{className:"text-gray-800 text-sm mb-1",children:M.definition}),M.exampleSentence&&E.jsxs("p",{className:"text-gray-500 text-xs italic",children:['"',M.exampleSentence,'"']})]}),E.jsxs("div",{className:"flex flex-col items-end gap-2",children:[E.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded",children:l("vocab")}),M.level&&E.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.5 rounded border border-red-100",children:["HSK ",M.level]})]})]},se);if("char"in M){const Le=M.level==="1-2"||M.type==="writing",Oe=l(Le?"writing":"reading");return E.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"w-12 h-12 rounded-lg bg-hsk-red/5 flex items-center justify-center text-2xl font-serif text-hsk-red relative group",children:[M.char,E.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-white/80 rounded-lg transition-opacity",children:E.jsx(tr,{text:M.char})})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[E.jsx("span",{className:"font-mono text-sm font-semibold",children:M.pinyin}),E.jsxs("span",{className:"text-xs text-gray-400 border border-gray-100 px-1 rounded",children:[M.strokes," strokes"]})]}),E.jsx("p",{className:"text-sm text-gray-600",children:M.meaning})]})]}),E.jsxs("div",{className:"flex flex-col items-end gap-2",children:[E.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded text-center",children:Oe}),M.level&&E.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.3 rounded border border-red-100",children:["HSK ",M.level==="1-2"?"1-2":M.level]})]})]},se)}else if("pattern"in M)return E.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-hsk-red/30 transition-colors flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx("h3",{className:"text-md font-bold text-ink",children:M.name}),E.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:M.category})]}),E.jsx("div",{className:"bg-gray-50 px-3 py-2 rounded-lg mb-2 font-mono text-sm text-hsk-red",children:M.pattern}),E.jsx("p",{className:"text-sm text-gray-700",children:M.explanation})]}),E.jsxs("div",{className:"flex flex-col items-end gap-2",children:[E.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-gray-50 px-2 py-0.5 rounded",children:l("grammar")}),M.level&&E.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-hsk-red bg-red-50 px-2 py-0.5 rounded border border-red-100",children:["HSK ",M.level]})]})]},se);return null})});default:return E.jsx("div",{children:l("comingSoon")})}};return E.jsx("div",{children:E.jsx("div",{className:"mt-4",children:Re()})})},RT=({onNavigate:t,onSearch:e})=>{const{t:i}=pr(),[o,a]=Te.useState(""),l=()=>{o.trim()&&e(o)},c=h=>{h.key==="Enter"&&l()};return E.jsxs("div",{className:"flex-1 overflow-y-auto bg-paper",children:[E.jsxs("div",{className:"py-24 px-6 relative overflow-hidden bg-cover bg-center",style:{backgroundImage:"url('https://img.freepik.com/free-vector/chinese-ink-painting-bamboo-background_23-2148886361.jpg?w=1380')",backgroundColor:"#f9f7f2"},children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-white/40 to-paper/90 pointer-events-none"}),E.jsxs("div",{className:"max-w-4xl mx-auto relative z-10 text-center",children:[E.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-bold mb-6 tracking-tight text-ink drop-shadow-sm",children:i("heroTitle")}),E.jsx("p",{className:"text-lg md:text-xl text-gray-700 font-medium mb-10 max-w-2xl mx-auto leading-relaxed",children:i("heroDesc")}),E.jsxs("div",{className:"w-full max-w-lg mx-auto relative group",children:[E.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-hsk-red pointer-events-none",children:E.jsx(Yi,{size:20})}),E.jsx("input",{type:"text",value:o,onChange:h=>a(h.target.value),onKeyDown:c,placeholder:i("searchPlaceholder"),className:"w-full bg-white/90 backdrop-blur-sm text-ink pl-14 pr-14 py-4 rounded-full shadow-xl hover:shadow-2xl transition-all border border-gray-200/50 outline-none focus:ring-2 focus:ring-hsk-red/20 text-base"}),E.jsx("button",{onClick:l,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-hsk-red text-white p-2 rounded-full hover:bg-red-700 transition-colors shadow-sm",children:E.jsx(Ls,{size:20})})]})]})]}),E.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[E.jsxs("h2",{className:"text-2xl font-bold text-ink mb-8 flex items-center",children:[E.jsx(Zy,{className:"mr-2 text-hsk-red"}),i("levelIndex")]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["1","2","3","4","5","6","7-9"].map(h=>E.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsxs("span",{className:"text-2xl font-bold text-ink",children:[i("level")," ",h]}),E.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${h==="7-9"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:i(h==="7-9"?"advanced":"standard")})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("button",{onClick:()=>t(h,"vocabulary"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[E.jsxs("span",{className:"flex items-center",children:[E.jsx(md,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("vocab")]}),E.jsx(Ls,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),E.jsxs("button",{onClick:()=>t(h,"characters"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[E.jsxs("span",{className:"flex items-center",children:[E.jsx(gd,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("chars")]}),E.jsx(Ls,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),E.jsxs("button",{onClick:()=>t(h,"grammar"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[E.jsxs("span",{className:"flex items-center",children:[E.jsx(_d,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("grammar")]}),E.jsx(Ls,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),E.jsx("div",{className:"border-t border-gray-50 my-1"}),E.jsxs("button",{onClick:()=>t(h,"tasks"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[E.jsxs("span",{className:"flex items-center",children:[E.jsx(yd,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("tasks")]}),E.jsx(Ls,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]}),E.jsxs("button",{onClick:()=>t(h,"topics"),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 group text-sm text-gray-600",children:[E.jsxs("span",{className:"flex items-center",children:[E.jsx(vd,{size:16,className:"mr-3 text-hsk-red opacity-70 group-hover:opacity-100"})," ",i("topics")]}),E.jsx(Ls,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity text-hsk-red"})]})]})]},h))}),E.jsxs("div",{className:"mt-16 grid grid-cols-3 gap-4 text-center border-t border-gray-200 pt-12",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"11,092"}),E.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalWords")})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"3,000"}),E.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalChars")})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl font-bold text-hsk-red font-serif",children:"572"}),E.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider mt-1",children:i("totalGrammar")})]})]})]})]})};var NT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let IT,MT;function kT(){return{geminiUrl:IT,vertexUrl:MT}}function DT(t,e,i,o){var a,l;if(!(t!=null&&t.baseUrl)){const c=kT();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{}function Z(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(l+1),i[p])}else for(const p of g)f(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],a=t[o];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const a=e[o];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(o+1),i)):i}else return i}else t=t[a]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function UT(t,e){for(const[i,o]of Object.entries(e)){const a=i.split("."),l=o.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}zc(t,a,l,0,c)}}function zc(t,e,i,o,a){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])zc(g,e,i,o+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const _=[];for(const S of i.slice(o))S==="*"?_.push(p):_.push(S);f(c,_,v)}for(const p of h)delete c[p]}}else{const c=t;l in c&&zc(c[l],e,i,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PT(t){const e={},i=d(t,["operationName"]);i!=null&&f(e,["operationName"],i);const o=d(t,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function LT(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],qT(c)),e}function OT(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],GT(c)),e}function qT(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>HT(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function GT(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>BT(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function HT(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],KT(i)),e}function BT(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],YT(i)),e}function VT(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function zT(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function $T(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],FT(c)),e}function FT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function tv(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],JT(c)),e}function JT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function KT(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Sd(o));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function YT(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Sd(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ym;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ym||(Ym={}));var Xm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Xm||(Xm={}));var Qm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Qm||(Qm={}));var xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xe||(xe={}));var Wm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Wm||(Wm={}));var jm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(jm||(jm={}));var Zm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Zm||(Zm={}));var eg;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(eg||(eg={}));var tg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(tg||(tg={}));var ng;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ng||(ng={}));var ig;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ig||(ig={}));var sg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(sg||(sg={}));var og;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(og||(og={}));var rg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(rg||(rg={}));var ag;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ag||(ag={}));var lg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(lg||(lg={}));var ug;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ug||(ug={}));var cg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cg||(cg={}));var dg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dg||(dg={}));var fg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(fg||(fg={}));var hg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(hg||(hg={}));var Ka;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ka||(Ka={}));var pg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(pg||(pg={}));var mg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(mg||(mg={}));var gg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gg||(gg={}));var $c;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($c||($c={}));var yg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(yg||(yg={}));var vg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(vg||(vg={}));var _g;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(_g||(_g={}));var Sg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sg||(Sg={}));var Tg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Tg||(Tg={}));var Eg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Eg||(Eg={}));var wg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(wg||(wg={}));var bg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bg||(bg={}));var Cg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cg||(Cg={}));var Ag;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ag||(Ag={}));var xg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xg||(xg={}));var Rg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Rg||(Rg={}));var Ng;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ng||(Ng={}));var Ig;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ig||(Ig={}));var Mg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Mg||(Mg={}));var kg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(kg||(kg={}));var Dg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Dg||(Dg={}));var Ug;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ug||(Ug={}));var Pg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Pg||(Pg={}));var Lg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Lg||(Lg={}));var Og;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Og||(Og={}));var qg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qg||(qg={}));var Gg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Gg||(Gg={}));var Hg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hg||(Hg={}));var Bg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Bg||(Bg={}));var Vg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Vg||(Vg={}));var zg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(zg||(zg={}));var $g;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($g||($g={}));var Fg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Fg||(Fg={}));var Xs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Xs||(Xs={}));class Fc{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class nr{get text(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[b,C]of Object.entries(S))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,b]of Object.entries(_))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,o,a,l,c,h,g,p;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,o,a,l,c,h,g,p;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Jg{}class Kg{}class XT{}class QT{}class WT{}class jT{}class Yg{}class Xg{}class Qg{}class ZT{}class Ya{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Ya;let a;const l=e;return i?a=OT(l):a=LT(l),Object.assign(o,a),o}}class Wg{}class jg{}class Zg{}class ey{}class eE{}class tE{}class nE{}class Td{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Td,l=$T(e);return Object.assign(o,l),o}}class iE{}class sE{}class oE{}class ty{}class rE{get text(){var e,i,o;let a="",l=!1;const c=[];for(const h of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,o;let a="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class aE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ed{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Ed,l=tv(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nv(t,e){const i=Ue(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function iv(t){return Array.isArray(t)?t.map(e=>Xa(e)):[Xa(t)]}function Xa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function sv(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ov(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ny(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function rv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ny(e)):[ny(t)]}function Jc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function sy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bt(t){if(t==null)throw new Error("ContentUnion is required");return Jc(t)?t:{role:"user",parts:rv(t)}}function wd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=bt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=bt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>bt(i)):[bt(e)]}function sn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iy(t)||sy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bt(t)]}const e=[],i=[],o=Jc(t[0]);for(const a of t){const l=Jc(a);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(iy(a)||sy(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return o||e.push({role:"user",parts:rv(i)}),e}function lE(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(xe).includes(i[0].toUpperCase())?i[0].toUpperCase():xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(xe).includes(o.toUpperCase())?o.toUpperCase():xe.TYPE_UNSPECIFIED})}}function js(t){const e={},i=["items"],o=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&lE(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(xe).includes(h.toUpperCase())?h.toUpperCase():xe.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=js(h);else if(o.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(js(p))}e[c]=g}else if(a.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=js(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function bd(t){return js(t)}function Cd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ad(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function to(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=js(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=js(e.response));return t}function no(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function uE(t,e,i,o=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Vn(t,e){if(typeof e!="string")throw new Error("name must be a string");return uE(t,e,"cachedContents")}function av(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ti(t){return Sd(t)}function cE(t){return t!=null&&typeof t=="object"&&"name"in t}function dE(t){return t!=null&&typeof t=="object"&&"video"in t}function fE(t){return t!=null&&typeof t=="object"&&"uri"in t}function lv(t){var e;let i;if(cE(t)&&(i=t.name),!(fE(t)&&(i=t.uri,i===void 0))&&!(dE(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function uv(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function cv(t){for(const e of["models","tunedModels","publisherModels"])if(hE(t,e))return t[e];return[]}function hE(t,e){return t!==null&&typeof t=="object"&&e in t}function pE(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function mE(t,e={}){const i=[],o=new Set;for(const a of t){const l=a.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=pE(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function dv(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function gE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fv(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function io(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function hv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yE(t){const e={},i=d(t,["responsesFile"]);i!=null&&f(e,["fileName"],i);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>WE(c))),f(e,["inlinedResponses"],l)}const a=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function vE(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&f(e,["format"],i);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const a=d(t,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function _E(t){const e={},i=d(t,["format"]);i!=null&&f(e,["predictionsFormat"],i);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function $a(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["metadata","state"]);a!=null&&f(e,["state"],hv(a));const l=d(t,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],yE(fv(p))),e}function Kc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["state"]);a!=null&&f(e,["state"],hv(a));const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],SE(_));const S=d(t,["outputConfig"]);S!=null&&f(e,["dest"],vE(fv(S)));const b=d(t,["completionStats"]);return b!=null&&f(e,["completionStats"],b),e}function SE(t){const e={},i=d(t,["instancesFormat"]);i!=null&&f(e,["format"],i);const o=d(t,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const a=d(t,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function TE(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&f(i,["fileName"],o);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>QE(t,c))),f(i,["requests","requests"],l)}return i}function EE(t){const e={},i=d(t,["format"]);i!=null&&f(e,["instancesFormat"],i);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wE(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function bE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function CE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function AE(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],xE(o));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function xE(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["citations"],o)}return e}function pv(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>sw(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function RE(t,e){const i={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function NE(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],_E(gE(a))),i}function oy(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],TE(t,dv(t,a)));const l=d(e,["config"]);return l!=null&&RE(l,i),i}function IE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],Ue(t,o));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],EE(dv(t,a)));const l=d(e,["config"]);return l!=null&&NE(l,i),i}function ME(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),i}function kE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],GE(t,a));const l=d(e,["config"]);return l!=null&&ME(l,i),i}function DE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function UE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function PE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function LE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function OE(t,e){const i={},o=d(e,["contents"]);if(o!=null){let l=wd(t,o);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],qE(a,i)),UT(i,{"requests[].*":"requests[].request.*"})),i}function qE(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function GE(t,e){const i={},o=d(e,["fileName"]);o!=null&&f(i,["file_name"],o);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],OE(t,a)),i}function HE(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function BE(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VE(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zE(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],pv(bt(a)));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(o,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(o,["seed"],x);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const U=d(e,["responseSchema"]);U!=null&&f(o,["responseSchema"],bd(U));const G=d(e,["responseJsonSchema"]);if(G!=null&&f(o,["responseJsonSchema"],G),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(i!==void 0&&P!=null){let Re=P;Array.isArray(Re)&&(Re=Re.map(_e=>ow(_e))),f(i,["safetySettings"],Re)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let Re=no(J);Array.isArray(Re)&&(Re=Re.map(_e=>aw(to(_e)))),f(i,["tools"],Re)}const Q=d(e,["toolConfig"]);if(i!==void 0&&Q!=null&&f(i,["toolConfig"],rw(Q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);i!==void 0&&Y!=null&&f(i,["cachedContent"],Vn(t,Y));const K=d(e,["responseModalities"]);K!=null&&f(o,["responseModalities"],K);const ae=d(e,["mediaResolution"]);ae!=null&&f(o,["mediaResolution"],ae);const j=d(e,["speechConfig"]);if(j!=null&&f(o,["speechConfig"],Cd(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ge=d(e,["thinkingConfig"]);ge!=null&&f(o,["thinkingConfig"],ge);const Ne=d(e,["imageConfig"]);Ne!=null&&f(o,["imageConfig"],XE(Ne));const Ie=d(e,["enableEnhancedCivicAnswers"]);return Ie!=null&&f(o,["enableEnhancedCivicAnswers"],Ie),o}function $E(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>AE(p))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function FE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function JE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],io(t,o)),i}function KE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function YE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function XE(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["request","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let h=sn(a);Array.isArray(h)&&(h=h.map(g=>pv(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],zE(t,c,d(i,["request"],{}))),i}function WE(t){const e={},i=d(t,["response"]);i!=null&&f(e,["response"],$E(i));const o=d(t,["error"]);return o!=null&&f(e,["error"],o),e}function jE(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function ZE(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function ew(t){const e={},i=d(t,["config"]);return i!=null&&jE(i,e),e}function tw(t){const e={},i=d(t,["config"]);return i!=null&&ZE(i,e),e}function nw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>$a(c))),f(e,["batchJobs"],l)}return e}function iw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Kc(c))),f(e,["batchJobs"],l)}return e}function sw(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],HE(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],BE(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],wE(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function ow(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function rw(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],VE(o)),e}function aw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],KE(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],YE(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Hn||(Hn={}));class Qi{constructor(e,i,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,a)}init(e,i,o){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lw extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(Hn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=oy(this.apiClient,e),o=i._url,a=Z("{model}:batchGenerateContent",o),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const b=_.request;b.systemInstruction=S,_.request=b}p.push(_)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${a}`;else if(c)o.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=IE(this.apiClient,e);return h=Z("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Kc(v))}else{const p=oy(this.apiClient,e);return h=Z("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$a(v))}}async createEmbeddingsInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kE(this.apiClient,e);return l=Z("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>$a(g))}}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=JE(this.apiClient,e);return h=Z("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Kc(v))}else{const p=FE(this.apiClient,e);return h=Z("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$a(v))}}async cancel(e){var i,o,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=CE(this.apiClient,e);c=Z("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=bE(this.apiClient,e);c=Z("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=tw(e);return h=Z("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=iw(v),S=new ty;return Object.assign(S,_),S})}else{const p=ew(e);return h=Z("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=nw(v),S=new ty;return Object.assign(S,_),S})}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=UE(this.apiClient,e);return h=Z("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>LE(v))}else{const p=DE(this.apiClient,e);return h=Z("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>PE(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uw(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ry(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>kw(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function cw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=sn(c);Array.isArray(v)&&(v=v.map(_=>ry(_))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],ry(bt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>Uw(_))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],Dw(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function dw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=sn(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],bt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>Pw(S))),f(e,["tools"],_)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function fw(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],nv(t,o));const a=d(e,["config"]);return a!=null&&cw(a,i),i}function hw(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],nv(t,o));const a=d(e,["config"]);return a!=null&&dw(a,i),i}function pw(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Vn(t,o)),i}function mw(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Vn(t,o)),i}function gw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function yw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function vw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function _w(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sw(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Tw(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ew(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Vn(t,o)),i}function ww(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Vn(t,o)),i}function bw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Cw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Aw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function xw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Rw(t){const e={},i=d(t,["config"]);return i!=null&&Aw(i,e),e}function Nw(t){const e={},i=d(t,["config"]);return i!=null&&xw(i,e),e}function Iw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function Mw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function kw(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],vw(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],_w(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],uw(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Dw(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],Sw(o)),e}function Uw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],bw(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],Cw(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function Pw(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>Tw(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Lw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Ow(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function qw(t,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],Vn(t,o));const a=d(e,["config"]);return a!=null&&Lw(a,i),i}function Gw(t,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],Vn(t,o));const a=d(e,["config"]);return a!=null&&Ow(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hw extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(Hn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=hw(this.apiClient,e);return h=Z("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=fw(this.apiClient,e);return h=Z("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ww(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Ew(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=mw(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=yw(v),S=new Zg;return Object.assign(S,_),S})}else{const p=pw(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=gw(v),S=new Zg;return Object.assign(S,_),S})}}async update(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Gw(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=qw(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Nw(e);return h=Z("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Mw(v),S=new ey;return Object.assign(S,_),S})}else{const p=Rw(e);return h=Z("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Iw(v),S=new ey;return Object.assign(S,_),S})}}}function Qa(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function ay(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function he(t){return this instanceof he?(this.v=t,this):new he(t)}function fn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(C){return Promise.resolve(C).then(b,_)}}function h(b,C){o[b]&&(a[b]=function(x){return new Promise(function(R,U){l.push([b,x,R,U])>1||g(b,x)})},C&&(a[b]=C(a[b])))}function g(b,C){try{p(o[b](C))}catch(x){S(l[0][3],x)}}function p(b){b.value instanceof he?Promise.resolve(b.value.v).then(v,_):S(l[0][2],b)}function v(b){g("next",b)}function _(b){g("throw",b)}function S(b,C){b(C),l.shift(),l.length&&g(l[0][0],l[0][1])}}function hn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof ay=="function"?ay(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:mv(i)}function mv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Vw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ly(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const a=[];let l=!0;for(;o<i&&t[o].role==="model";)a.push(t[o]),l&&!mv(t[o])&&(l=!1),o++;l?e.push(...a):e.pop()}return e}class zw{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new $w(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $w{constructor(e,i,o,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),Vw(l)}async sendMessage(e){var i;await this.sendPromise;const o=bt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const b=p?[p]:[];this.recordHistory(o,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const o=bt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?ly(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return fn(this,arguments,function*(){var a,l,c,h,g,p;const v=[];try{for(var _=!0,S=hn(e),b;b=yield he(S.next()),a=b.done,!a;_=!0){h=b.value,_=!1;const C=h;if(Bw(C)){const x=(p=(g=C.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;x!==void 0&&v.push(x)}yield yield he(C)}}catch(C){l={error:C}}finally{try{!_&&!a&&(c=S.return)&&(yield he(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ly(o)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fw(t){const e={},i=d(t,["file"]);return i!=null&&f(e,["file"],i),e}function Jw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Kw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],lv(i)),e}function Yw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Xw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],lv(i)),e}function Qw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Ww(t){const e={},i=d(t,["config"]);return i!=null&&Qw(i,e),e}function jw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zw extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(Hn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ww(e);return l=Z("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=jw(g),v=new iE;return Object.assign(v,p),v})}}async createInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Fw(e);return l=Z("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=Jw(g),v=new sE;return Object.assign(v,p),v})}}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Xw(e);return l=Z("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Kw(e);return l=Z("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Yw(g),v=new oE;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fa(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function eb(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>gb(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function tb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function nb(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ib(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function sb(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const b=d(t,["responseMimeType"]);b!=null&&f(e,["responseMimeType"],b);const C=d(t,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const x=d(t,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const R=d(t,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);const U=d(t,["seed"]);U!=null&&f(e,["seed"],U);const G=d(t,["speechConfig"]);G!=null&&f(e,["speechConfig"],G);const P=d(t,["stopSequences"]);P!=null&&f(e,["stopSequences"],P);const J=d(t,["temperature"]);J!=null&&f(e,["temperature"],J);const Q=d(t,["thinkingConfig"]);Q!=null&&f(e,["thinkingConfig"],Q);const Y=d(t,["topK"]);Y!=null&&f(e,["topK"],Y);const K=d(t,["topP"]);if(K!=null&&f(e,["topP"],K),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ob(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function rb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ab(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Ad(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],eb(bt(C)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let Y=no(x);Array.isArray(Y)&&(Y=Y.map(K=>vb(to(K)))),f(e,["setup","tools"],Y)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],yb(R));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const Q=d(t,["proactivity"]);if(e!==void 0&&Q!=null&&f(e,["setup","proactivity"],Q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function lb(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],sb(o));const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Ad(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],bt(C));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let K=no(x);Array.isArray(K)&&(K=K.map(ae=>_b(to(ae)))),f(e,["setup","tools"],K)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],R);const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const Q=d(t,["proactivity"]);e!==void 0&&Q!=null&&f(e,["setup","proactivity"],Q);const Y=d(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&f(e,["setup","explicitVadSignal"],Y),i}function ub(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Ue(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],ab(a,i)),i}function cb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Ue(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],lb(a,i)),i}function db(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function fb(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["weightedPrompts"],o)}return e}function hb(t){const e={},i=d(t,["media"]);if(i!=null){let p=iv(i);Array.isArray(p)&&(p=p.map(v=>Fa(v))),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],Fa(ov(o)));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],Fa(sv(l)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function pb(t){const e={},i=d(t,["media"]);if(i!=null){let p=iv(i);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],ov(o));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],sv(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function mb(t){const e={},i=d(t,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const o=d(t,["serverContent"]);o!=null&&f(e,["serverContent"],o);const a=d(t,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(t,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],Sb(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],Tb(v)),e}function gb(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],tb(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],nb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Fa(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function yb(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vb(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],ob(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],rb(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function _b(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>ib(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Sb(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const o=d(t,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const a=d(t,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["promptTokensDetails"],b)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["cacheTokensDetails"],b)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["responseTokensDetails"],b)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["toolUsePromptTokensDetails"],b)}const S=d(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}function Tb(t){const e={},i=d(t,["type"]);return i!=null&&f(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function wb(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],bb(o));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function bb(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["citations"],o)}return e}function Cb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let l=sn(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function Ab(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function xb(t){const e={},i=d(t,["values"]);i!=null&&f(e,["values"],i);const o=d(t,["statistics"]);return o!=null&&f(e,["statistics"],Rb(o)),e}function Rb(t){const e={},i=d(t,["truncated"]);i!=null&&f(e,["truncated"],i);const o=d(t,["token_count"]);return o!=null&&f(e,["tokenCount"],o),e}function il(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>OC(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function Nb(t){const e={},i=d(t,["controlType"]);i!=null&&f(e,["controlType"],i);const o=d(t,["enableControlImageComputation"]);return o!=null&&f(e,["computeControl"],o),e}function Ib(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Mb(t,e){const i={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],bt(o));const a=d(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>_v(h))),f(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],EC(l)),i}function kb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let c=sn(a);Array.isArray(c)&&(c=c.map(h=>il(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&Ib(l),i}function Db(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let c=sn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&Mb(l,i),i}function Ub(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);o!=null&&f(e,["totalTokens"],o);const a=d(t,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function Pb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);return o!=null&&f(e,["totalTokens"],o),e}function Lb(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Ue(t,o)),i}function Ob(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Ue(t,o)),i}function qb(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Gb(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Hb(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const b=d(t,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);const U=d(t,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const G=d(t,["editMode"]);e!==void 0&&G!=null&&f(e,["parameters","editMode"],G);const P=d(t,["baseSteps"]);return e!==void 0&&P!=null&&f(e,["parameters","editConfig","baseSteps"],P),i}function Bb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>zC(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&Hb(c,i),i}function Vb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>sl(l))),f(e,["generatedImages"],a)}return e}function zb(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function $b(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function Fb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let h=wd(t,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&zb(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],Ue(t,c)),i}function Jb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let c=wd(t,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&$b(l,i),i}function Kb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function Yb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>xb(c))),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function Xb(t){const e={},i=d(t,["endpoint"]);i!=null&&f(e,["name"],i);const o=d(t,["deployedModelId"]);return o!=null&&f(e,["deployedModelId"],o),e}function Qb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Wb(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jb(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Zb(t){const e={},i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eC(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],il(bt(a)));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(o,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(o,["seed"],x);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const U=d(e,["responseSchema"]);U!=null&&f(o,["responseSchema"],bd(U));const G=d(e,["responseJsonSchema"]);if(G!=null&&f(o,["responseJsonSchema"],G),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(i!==void 0&&P!=null){let Re=P;Array.isArray(Re)&&(Re=Re.map(_e=>$C(_e))),f(i,["safetySettings"],Re)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let Re=no(J);Array.isArray(Re)&&(Re=Re.map(_e=>WC(to(_e)))),f(i,["tools"],Re)}const Q=d(e,["toolConfig"]);if(i!==void 0&&Q!=null&&f(i,["toolConfig"],QC(Q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);i!==void 0&&Y!=null&&f(i,["cachedContent"],Vn(t,Y));const K=d(e,["responseModalities"]);K!=null&&f(o,["responseModalities"],K);const ae=d(e,["mediaResolution"]);ae!=null&&f(o,["mediaResolution"],ae);const j=d(e,["speechConfig"]);if(j!=null&&f(o,["speechConfig"],Cd(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ge=d(e,["thinkingConfig"]);ge!=null&&f(o,["thinkingConfig"],ge);const Ne=d(e,["imageConfig"]);Ne!=null&&f(o,["imageConfig"],xC(Ne));const Ie=d(e,["enableEnhancedCivicAnswers"]);return Ie!=null&&f(o,["enableEnhancedCivicAnswers"],Ie),o}function tC(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],bt(a));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(o,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(o,["seed"],x);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const U=d(e,["responseSchema"]);U!=null&&f(o,["responseSchema"],bd(U));const G=d(e,["responseJsonSchema"]);G!=null&&f(o,["responseJsonSchema"],G);const P=d(e,["routingConfig"]);P!=null&&f(o,["routingConfig"],P);const J=d(e,["modelSelectionConfig"]);J!=null&&f(o,["modelConfig"],J);const Q=d(e,["safetySettings"]);if(i!==void 0&&Q!=null){let D=Q;Array.isArray(D)&&(D=D.map($=>$)),f(i,["safetySettings"],D)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let D=no(Y);Array.isArray(D)&&(D=D.map($=>_v(to($)))),f(i,["tools"],D)}const K=d(e,["toolConfig"]);i!==void 0&&K!=null&&f(i,["toolConfig"],K);const ae=d(e,["labels"]);i!==void 0&&ae!=null&&f(i,["labels"],ae);const j=d(e,["cachedContent"]);i!==void 0&&j!=null&&f(i,["cachedContent"],Vn(t,j));const ge=d(e,["responseModalities"]);ge!=null&&f(o,["responseModalities"],ge);const Ne=d(e,["mediaResolution"]);Ne!=null&&f(o,["mediaResolution"],Ne);const Ie=d(e,["speechConfig"]);Ie!=null&&f(o,["speechConfig"],Cd(Ie));const Re=d(e,["audioTimestamp"]);Re!=null&&f(o,["audioTimestamp"],Re);const _e=d(e,["thinkingConfig"]);_e!=null&&f(o,["thinkingConfig"],_e);const X=d(e,["imageConfig"]);if(X!=null&&f(o,["imageConfig"],RC(X)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function uy(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let c=sn(a);Array.isArray(c)&&(c=c.map(h=>il(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],eC(t,l,i)),i}function cy(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["contents"]);if(a!=null){let c=sn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],tC(t,l,i)),i}function dy(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>wb(p))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function fy(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const a=d(t,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function nC(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=d(t,["imageSize"]);if(e!==void 0&&b!=null&&f(e,["parameters","sampleImageSize"],b),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function iC(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const b=d(t,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);const U=d(t,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const G=d(t,["imageSize"]);e!==void 0&&G!=null&&f(e,["parameters","sampleImageSize"],G);const P=d(t,["enhancePrompt"]);return e!==void 0&&P!=null&&f(e,["parameters","enhancePrompt"],P),i}function sC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&nC(l,i),i}function oC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&iC(l,i),i}function rC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>vC(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],yv(a)),e}function aC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>sl(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],vv(a)),e}function lC(t,e){const i={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(t,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],ol(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(b=>cA(b))),f(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function uC(t,e){const i={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(t,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const b=d(t,["enhancePrompt"]);e!==void 0&&b!=null&&f(e,["parameters","enhancePrompt"],b);const C=d(t,["generateAudio"]);e!==void 0&&C!=null&&f(e,["parameters","generateAudio"],C);const x=d(t,["lastFrame"]);e!==void 0&&x!=null&&f(e,["instances[0]","lastFrame"],pn(x));const R=d(t,["referenceImages"]);if(e!==void 0&&R!=null){let P=R;Array.isArray(P)&&(P=P.map(J=>dA(J))),f(e,["instances[0]","referenceImages"],P)}const U=d(t,["mask"]);e!==void 0&&U!=null&&f(e,["instances[0]","mask"],uA(U));const G=d(t,["compressionQuality"]);return e!==void 0&&G!=null&&f(e,["parameters","compressionQuality"],G),i}function cC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],pC(c)),e}function dC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],mC(c)),e}function fC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],ol(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],Sv(c));const h=d(e,["source"]);h!=null&&gC(h,i);const g=d(e,["config"]);return g!=null&&lC(g,i),i}function hC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],pn(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],Tv(c));const h=d(e,["source"]);h!=null&&yC(h,i);const g=d(e,["config"]);return g!=null&&uC(g,i),i}function pC(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>SC(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function mC(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>TC(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function gC(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],ol(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],Sv(l)),i}function yC(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],pn(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],Tv(l)),i}function vC(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],NC(i));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const a=d(t,["_self"]);return a!=null&&f(e,["safetyAttributes"],yv(a)),e}function sl(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],gv(i));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const a=d(t,["_self"]);a!=null&&f(e,["safetyAttributes"],vv(a));const l=d(t,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function _C(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["mask"],gv(i));const o=d(t,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function SC(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],aA(i)),e}function TC(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],lA(i)),e}function EC(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const b=d(t,["responseMimeType"]);b!=null&&f(e,["responseMimeType"],b);const C=d(t,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const x=d(t,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const R=d(t,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);const U=d(t,["seed"]);U!=null&&f(e,["seed"],U);const G=d(t,["speechConfig"]);G!=null&&f(e,["speechConfig"],G);const P=d(t,["stopSequences"]);P!=null&&f(e,["stopSequences"],P);const J=d(t,["temperature"]);J!=null&&f(e,["temperature"],J);const Q=d(t,["thinkingConfig"]);Q!=null&&f(e,["thinkingConfig"],Q);const Y=d(t,["topK"]);Y!=null&&f(e,["topK"],Y);const K=d(t,["topP"]);if(K!=null&&f(e,["topP"],K),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wC(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Ue(t,o)),i}function bC(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Ue(t,o)),i}function CC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function AC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function xC(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RC(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);o!=null&&f(e,["imageSize"],o);const a=d(t,["personGeneration"]);a!=null&&f(e,["personGeneration"],a);const l=d(t,["outputMimeType"]);l!=null&&f(e,["imageOutputOptions","mimeType"],l);const c=d(t,["outputCompressionQuality"]);return c!=null&&f(e,["imageOutputOptions","compressionQuality"],c),e}function NC(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ti(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function gv(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],Ti(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function ol(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ti(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function pn(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Ti(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function IC(t,e,i){const o={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],uv(t,h)),o}function MC(t,e,i){const o={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],uv(t,h)),o}function kC(t,e){const i={},o=d(e,["config"]);return o!=null&&IC(t,o,i),i}function DC(t,e){const i={},o=d(e,["config"]);return o!=null&&MC(t,o,i),i}function UC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["_self"]);if(a!=null){let l=cv(a);Array.isArray(l)&&(l=l.map(c=>Yc(c))),f(e,["models"],l)}return e}function PC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["_self"]);if(a!=null){let l=cv(a);Array.isArray(l)&&(l=l.map(c=>Xc(c))),f(e,["models"],l)}return e}function LC(t){const e={},i=d(t,["maskMode"]);i!=null&&f(e,["maskMode"],i);const o=d(t,["segmentationClasses"]);o!=null&&f(e,["maskClasses"],o);const a=d(t,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Yc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["version"]);l!=null&&f(e,["version"],l);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],jC(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const S=d(t,["topP"]);S!=null&&f(e,["topP"],S);const b=d(t,["topK"]);b!=null&&f(e,["topK"],b);const C=d(t,["thinking"]);return C!=null&&f(e,["thinking"],C),e}function Xc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["versionId"]);l!=null&&f(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>Xb(S))),f(e,["endpoints"],_)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],ZC(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),f(e,["checkpoints"],_)}return e}function OC(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],Qb(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Wb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Eb(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function qC(t){const e={},i=d(t,["productImage"]);return i!=null&&f(e,["image"],pn(i)),e}function GC(t,e){const i={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const b=d(t,["labels"]);return e!==void 0&&b!=null&&f(e,["labels"],b),i}function HC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["source"]);a!=null&&VC(a,i);const l=d(e,["config"]);return l!=null&&GC(l,i),i}function BC(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>sl(a))),f(e,["generatedImages"],o)}return e}function VC(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],pn(a));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>qC(h))),f(e,["instances[0]","productImages"],c)}return i}function zC(t){const e={},i=d(t,["referenceImage"]);i!=null&&f(e,["referenceImage"],pn(i));const o=d(t,["referenceId"]);o!=null&&f(e,["referenceId"],o);const a=d(t,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(t,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],LC(l));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],Nb(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function yv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function vv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function $C(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function FC(t){const e={},i=d(t,["image"]);return i!=null&&f(e,["image"],pn(i)),e}function JC(t,e){const i={},o=d(t,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);const a=d(t,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function KC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["source"]);a!=null&&XC(a,i);const l=d(e,["config"]);return l!=null&&JC(l,i),i}function YC(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_C(a))),f(e,["generatedMasks"],o)}return e}function XC(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],pn(a));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],FC(l)),i}function QC(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],jb(o)),e}function WC(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],CC(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],AC(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function _v(t){const e={},i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const l=d(t,["enterpriseWebSearch"]);l!=null&&f(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>Zb(S))),f(e,["functionDeclarations"],_)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function jC(t){const e={},i=d(t,["baseModel"]);i!=null&&f(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function ZC(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function eA(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function tA(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function nA(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","name"],Ue(t,o));const a=d(e,["config"]);return a!=null&&eA(a,i),i}function iA(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["config"]);return a!=null&&tA(a,i),i}function sA(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const b=d(t,["mode"]);return e!==void 0&&b!=null&&f(e,["parameters","mode"],b),i}function oA(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Ue(t,o));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],pn(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&sA(c,i),i}function rA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>sl(l))),f(e,["generatedImages"],a)}return e}function aA(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Ti(o));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function lA(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Ti(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function uA(t){const e={},i=d(t,["image"]);i!=null&&f(e,["_self"],pn(i));const o=d(t,["maskMode"]);return o!=null&&f(e,["maskMode"],o),e}function cA(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],ol(i));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function dA(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],pn(i));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function Sv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["videoBytes"]);o!=null&&f(e,["encodedVideo"],Ti(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function Tv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["videoBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Ti(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fA(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),i}function hA(t){const e={},i=d(t,["config"]);return i!=null&&fA(i,e),e}function pA(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function mA(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&pA(o,e),e}function gA(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function yA(t,e){const i={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function vA(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],SA(c)),e}function _A(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(t,["fileName"]);o!=null&&f(e,["fileName"],o);const a=d(t,["config"]);return a!=null&&yA(a,e),e}function SA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function TA(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function EA(t){const e={},i=d(t,["config"]);return i!=null&&TA(i,e),e}function wA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function Ev(t,e){const i={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function bA(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(t,["config"]);return o!=null&&Ev(o,e),e}function CA(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AA="Content-Type",xA="X-Server-Timeout",RA="User-Agent",Qc="x-goog-api-client",NA="1.37.0",IA=`google-genai-sdk/${NA}`,MA="v1beta1",kA="v1beta";class DA{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:MA,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:kA,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const a=[this.getRequestUrlInternal(i)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?o[a]=Object.assign(Object.assign({},o[a]),l):l!==void 0&&(o[a]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&UA(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await hy(a),new Fc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await hy(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return fn(this,arguments,function*(){var o;const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield he(a.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const C=JSON.parse(_);if("error"in C){const x=JSON.parse(JSON.stringify(C.error)),R=x.status,U=x.code,G=`got status: ${R}. ${JSON.stringify(C)}`;if(U>=400&&U<600)throw new nl({message:G,status:U})}}catch(C){if(C.name==="ApiError")throw C}c+=_;let S=-1,b=0;for(;;){S=-1,b=0;for(const R of g){const U=c.indexOf(R);U!==-1&&(S===-1||U<S)&&(S=U,b=R.length)}if(S===-1)break;const C=c.substring(0,S);c=c.substring(S+b);const x=C.trim();if(x.startsWith(h)){const R=x.substring(h.length).trim();try{const U=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield he(new Fc(U))}catch(U){throw new Error(`exception parsing stream chunk ${R}. ${U}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=IA+" "+this.clientOptions.userAgentExtra;return e[RA]=i,e[Qc]=i,e[AA]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))o.append(a,l);e.timeout&&e.timeout>0&&o.append(xA,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),v=Z("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,p,g,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};o!=null&&Ev(o,_);const S=await this.fetchUploadUrl(p,h,g,v,_,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function hy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(o);throw i>=400&&i<600?new nl({message:a,status:i}):new Error(a)}}function UA(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=o(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=o(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PA="mcp_used/unknown";let LA=!1;function wv(t){for(const e of t)if(OA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return LA}function bv(t){var e;const i=(e=t[Qc])!==null&&e!==void 0?e:"";t[Qc]=(i+` ${PA}`).trimStart()}function OA(t){return t!==null&&typeof t=="object"&&t instanceof xd}function qA(t){return fn(this,arguments,function*(i,o=100){let a,l=0;for(;l<o;){const c=yield he(i.listTools({cursor:a}));for(const h of c.tools)yield yield he(h),l++;if(!c.nextCursor)break;a=c.nextCursor}})}class xd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new xd(e,i)}async initialize(){var e,i,o,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,hn(qA(v))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const _=a;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),mE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GA(t,e,i){const o=new aE;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(o,a),e(o)}class HA{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=zA(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(P=>{p=P}),_=e.callbacks,S=function(){p({})},b=this.apiClient,C={onopen:S,onmessage:P=>{GA(b,_.onmessage,P)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(P){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(P){}},x=this.webSocketFactory.create(g,VA(c),C);x.connect(),await v;const G={setup:{model:Ue(this.apiClient,e.model)}};return x.send(JSON.stringify(G)),new BA(x,this.apiClient)}}class BA{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=fb(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=db(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Xs.PLAY)}pause(){this.sendPlaybackControl(Xs.PAUSE)}stop(){this.sendPlaybackControl(Xs.STOP)}resetContext(){this.sendPlaybackControl(Xs.RESET_CONTEXT)}close(){this.conn.close()}}function VA(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function zA(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $A="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FA(t,e,i){const o=new rE;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const c=mb(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class JA{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new HA(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&wv(e.config.tools)&&bv(_);const S=QA(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const j=this.apiClient.getApiKey();let ge="BidiGenerateContent",Ne="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ge="BidiGenerateContentConstrained",Ne="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ge}?${Ne}=${j}`}let b=()=>{};const C=new Promise(j=>{b=j}),x=e.callbacks,R=function(){var j;(j=x==null?void 0:x.onopen)===null||j===void 0||j.call(x),b({})},U=this.apiClient,G={onopen:R,onmessage:j=>{FA(U,x.onmessage,j)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(j){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(j){}},P=this.webSocketFactory.create(v,XA(S),G);P.connect(),await C;let J=Ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const j=this.apiClient.getProject(),ge=this.apiClient.getLocation();J=`projects/${j}/locations/${ge}/`+J}let Q={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ka.AUDIO]}:e.config.responseModalities=[Ka.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],K=[];for(const j of Y)if(this.isCallableTool(j)){const ge=j;K.push(await ge.tool())}else K.push(j);K.length>0&&(e.config.tools=K);const ae={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Q=cb(this.apiClient,ae):Q=ub(this.apiClient,ae),delete Q.config,P.send(JSON.stringify(Q)),new YA(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const KA={turnComplete:!0};class YA{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=sn(i.turns),e.isVertexAI()||(o=o.map(a=>il(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error($A)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},KA),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:pb(e)}:i={realtimeInput:hb(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function XA(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function QA(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const py=10;function my(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Zs(c)){a=!0;break}if(!a)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Zs(t){return"callTool"in t&&typeof t.callTool=="function"}function WA(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Zs(a)))!==null&&o!==void 0?o:!1}function gy(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,a)=>{if(Zs(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function yy(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jA extends Bn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!WA(i)||my(i.config))return await this.generateContentInternal(g);const p=gy(i);if(p.length>0){const x=p.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,_;const S=sn(g.contents),b=(l=(a=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:py;let C=0;for(;C<b&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,R=[];for(const U of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Zs(U)){const P=await U.callTool(v.functionCalls);R.push(...P)}C++,_={role:"user",parts:R},g.contents=sn(g.contents),g.contents.push(x),g.contents.push(_),yy(g.config)&&(S.push(x),S.push(_))}return yy(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var o,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),my(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const g=gy(i);if(g.length>0){const _=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(o=i==null?void 0:i.config)===null||o===void 0?void 0:o.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var a;let l;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Qi(Hn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var o,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Zs(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&wv(e.config.tools)){const g=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),bv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,o,a;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Zs(c)){const h=c,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,o,a;const l=(a=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:py;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,_){return fn(this,arguments,function*(){for(var S,b,C,x,R,U;h<l;){c&&(h++,c=!1);const Q=yield he(p.processParamsMaybeAddMcpUsage(_)),Y=yield he(p.generateContentStreamInternal(Q)),K=[],ae=[];try{for(var G=!0,P=(b=void 0,hn(Y)),J;J=yield he(P.next()),S=J.done,!S;G=!0){x=J.value,G=!1;const j=x;if(yield yield he(j),j.candidates&&(!((R=j.candidates[0])===null||R===void 0)&&R.content)){ae.push(j.candidates[0].content);for(const ge of(U=j.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(h<l&&ge.functionCall){if(!ge.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ge.functionCall.name)){const Ne=yield he(v.get(ge.functionCall.name).callTool([ge.functionCall]));K.push(...Ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ge.functionCall.name}`)}}}}catch(j){b={error:j}}finally{try{!G&&!S&&(C=P.return)&&(yield he(C.call(P)))}finally{if(b)throw b.error}}if(K.length>0){c=!0;const j=new nr;j.candidates=[{content:{role:"user",parts:K}}],yield yield he(j);const ge=[];ge.push(...ae),ge.push({role:"user",parts:K});const Ne=sn(_.contents).concat(ge);_.contents=Ne}else break}})})(this,g,e)}async generateContentInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=cy(this.apiClient,e);return h=Z("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=fy(v),S=new nr;return Object.assign(S,_),S})}else{const p=uy(this.apiClient,e);return h=Z("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=dy(v),S=new nr;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=cy(this.apiClient,e);return h=Z("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return fn(this,arguments,function*(){var S,b,C,x;try{for(var R=!0,U=hn(_),G;G=yield he(U.next()),S=G.done,!S;R=!0){x=G.value,R=!1;const P=x,J=fy(yield he(P.json()));J.sdkHttpResponse={headers:P.headers};const Q=new nr;Object.assign(Q,J),yield yield he(Q)}}catch(P){b={error:P}}finally{try{!R&&!S&&(C=U.return)&&(yield he(C.call(U)))}finally{if(b)throw b.error}}})})}else{const p=uy(this.apiClient,e);return h=Z("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return fn(this,arguments,function*(){var S,b,C,x;try{for(var R=!0,U=hn(_),G;G=yield he(U.next()),S=G.done,!S;R=!0){x=G.value,R=!1;const P=x,J=dy(yield he(P.json()));J.sdkHttpResponse={headers:P.headers};const Q=new nr;Object.assign(Q,J),yield yield he(Q)}}catch(P){b={error:P}}finally{try{!R&&!S&&(C=U.return)&&(yield he(C.call(U)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Jb(this.apiClient,e);return h=Z("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Yb(v),S=new Jg;return Object.assign(S,_),S})}else{const p=Fb(this.apiClient,e);return h=Z("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Kb(v),S=new Jg;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=oC(this.apiClient,e);return h=Z("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=aC(v),S=new Kg;return Object.assign(S,_),S})}else{const p=sC(this.apiClient,e);return h=Z("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=rC(v),S=new Kg;return Object.assign(S,_),S})}}async editImageInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Bb(this.apiClient,e);return l=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Vb(g),v=new XT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=oA(this.apiClient,e);return l=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=rA(g),v=new QT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=HC(this.apiClient,e);return l=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=BC(g),v=new WT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=KC(this.apiClient,e);return l=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=YC(g),v=new jT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=bC(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Xc(v))}else{const p=wC(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=DC(this.apiClient,e);return h=Z("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=PC(v),S=new Yg;return Object.assign(S,_),S})}else{const p=kC(this.apiClient,e);return h=Z("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=UC(v),S=new Yg;return Object.assign(S,_),S})}}async update(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iA(this.apiClient,e);return h=Z("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Xc(v))}else{const p=nA(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Ob(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Gb(v),S=new Xg;return Object.assign(S,_),S})}else{const p=Lb(this.apiClient,e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=qb(v),S=new Xg;return Object.assign(S,_),S})}}async countTokens(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Db(this.apiClient,e);return h=Z("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Pb(v),S=new Qg;return Object.assign(S,_),S})}else{const p=kb(this.apiClient,e);return h=Z("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Ub(v),S=new Qg;return Object.assign(S,_),S})}}async computeTokens(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Cb(this.apiClient,e);return l=Z("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Ab(g),v=new ZT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return h=Z("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=dC(v),S=new Ya;return Object.assign(S,_),S})}else{const p=fC(this.apiClient,e);return h=Z("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=cC(v),S=new Ya;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZA extends Bn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=zT(e);return h=Z("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const p=VT(e);return h=Z("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=PT(e);return l=Z("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ex(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function tx(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>cx(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function nx(t,e,i){const o={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],ux(t,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),o}function ix(t,e){const i={},o=d(e,["config"]);return o!=null&&f(i,["config"],nx(t,o,i)),i}function sx(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ox(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rx(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function ax(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function lx(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Ad(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],tx(bt(C)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let Y=no(x);Array.isArray(Y)&&(Y=Y.map(K=>fx(to(K)))),f(e,["setup","tools"],Y)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],dx(R));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const G=d(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","outputAudioTranscription"],G);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const Q=d(t,["proactivity"]);if(e!==void 0&&Q!=null&&f(e,["setup","proactivity"],Q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function ux(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Ue(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],lx(a,i)),i}function cx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],sx(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],ox(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],ex(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function dx(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fx(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=d(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],rx(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],ax(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hx(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function px(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=hx(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class mx extends Bn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=ix(this.apiClient,e);l=Z("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=px(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gx(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function yx(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&gx(o,e),e}function vx(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function _x(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Sx(t){const e={},i=d(t,["parent"]);i!=null&&f(e,["_url","parent"],i);const o=d(t,["config"]);return o!=null&&_x(o,e),e}function Tx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ex extends Bn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Qi(Hn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vx(e);return l=Z("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yx(e);a=Z("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Sx(e);return l=Z("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=Tx(g),v=new eE;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wx extends Bn{constructor(e,i=new Ex(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new Qi(Hn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hA(e);return l=Z("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gA(e);return l=Z("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mA(e);a=Z("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=EA(e);return l=Z("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=wA(g),v=new tE;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bA(e);return l=Z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=CA(g),v=new nE;return Object.assign(v,p),v})}}async importFile(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_A(e);return l=Z("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const p=vA(g),v=new Td;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Cv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Cv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const bx=()=>Cv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const jc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class on extends Error{}class xt extends on{constructor(e,i,o,a){super(`${xt.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new rl({message:o,cause:jc(i)});const l=i;return e===400?new xv(e,l,o,a):e===401?new Rv(e,l,o,a):e===403?new Nv(e,l,o,a):e===404?new Iv(e,l,o,a):e===409?new Mv(e,l,o,a):e===422?new kv(e,l,o,a):e===429?new Dv(e,l,o,a):e>=500?new Uv(e,l,o,a):new xt(e,l,o,a)}}class Zc extends xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class rl extends xt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class Av extends rl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xv extends xt{}class Rv extends xt{}class Nv extends xt{}class Iv extends xt{}class Mv extends xt{}class kv extends xt{}class Dv extends xt{}class Uv extends xt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cx=/^[a-z][a-z0-9+.-]*:/i,Ax=t=>Cx.test(t);let ed=t=>(ed=Array.isArray,ed(t));const xx=ed;let Rx=xx;const vy=Rx;function Nx(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ix(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Mx=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new on(`${t} must be an integer`);if(e<0)throw new on(`${t} must be a positive integer`);return e},kx=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dx=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $s="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ux(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Px=()=>{var t,e,i,o,a;const l=Ux();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":Sy(Deno.build.os),"X-Stainless-Arch":_y(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":Sy((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":_y((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=Lx();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Lx(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const _y=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Sy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Pa;const Ox=()=>Pa??(Pa=Px());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Pv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Gx(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Pv({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function Lv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Hx(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const o=t.getReader(),a=o.cancel();o.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bx=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ov=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kc(t,e,i){return Ov(),new File(t,e??"unknown_file",i)}function Vx(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const zx=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",$x=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qv(t),Fx=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Jx(t,e,i){if(Ov(),t=await t,$x(t))return t instanceof File?t:kc([await t.arrayBuffer()],t.name);if(Fx(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),kc(await td(a),e,i)}const o=await td(t);if(e||(e=Vx(t)),!(i!=null&&i.type)){const a=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return kc(o,e,i)}async function td(t){var e,i,o,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(qv(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(zx(t))try{for(var h=!0,g=hn(t),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const v=a;c.push(...await td(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${Kx(t)}`)}return c}function Kx(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gv{constructor(e){this._client=e}}Gv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ty=Object.freeze(Object.create(null)),Yx=(t=Hv)=>(function(i,...o){if(i.length===1)return i[0];let a=!1;const l=[],c=i.reduce((v,_,S)=>{var b,C,x;/[?#]/.test(_)&&(a=!0);const R=o[S];let U=(a?encodeURIComponent:t)(""+R);return S!==o.length&&(R==null||typeof R=="object"&&R.toString===((x=Object.getPrototypeOf((C=Object.getPrototypeOf((b=R.hasOwnProperty)!==null&&b!==void 0?b:Ty))!==null&&C!==void 0?C:Ty))===null||x===void 0?void 0:x.toString))&&(U=R+"",l.push({start:v.length+_.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),v+_+(S===o.length?"":U)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,b)=>{const C=" ".repeat(b.start-v),x="^".repeat(b.length);return v=b.start+b.length,S+C+x},"");throw new on(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),La=Yx(Hv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bv extends Gv{create(e,i){var o;const{api_version:a=this._client.apiVersion}=e,l=Qa(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new on("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new on("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(La`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(La`/${a}/interactions/${e}`,o)}cancel(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(La`/${a}/interactions/${e}/cancel`,o)}get(e,i={},o){var a;const l=i??{},{api_version:c=this._client.apiVersion}=l,h=Qa(l,["api_version"]);return this._client.get(La`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}Bv._key=Object.freeze(["interactions"]);class Vv extends Bv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xx(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let Oa;function Rd(t){let e;return(Oa??(e=new globalThis.TextEncoder,Oa=e.encode.bind(e)))(t)}let qa;function Ey(t){let e;return(qa??(e=new globalThis.TextDecoder,qa=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class al{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Rd(e):e;this.buffer=Xx([this.buffer,i]);const o=[];let a;for(;(a=Qx(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){o.push(Ey(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=Ey(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}al.NEWLINE_CHARS=new Set([`
`,"\r"]);al.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Qx(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function Wx(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wa={off:0,error:200,warn:300,info:400,debug:500},wy=(t,e,i)=>{if(t){if(Ix(Wa,t))return t;At(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wa))}`)}};function sr(){}function Ga(t,e,i){return!e||Wa[t]>Wa[i]?sr:e[t].bind(e)}const jx={error:sr,warn:sr,info:sr,debug:sr};let by=new WeakMap;function At(t){var e;const i=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return jx;const a=by.get(i);if(a&&a[0]===o)return a[1];const l={error:Ga("error",i,o),warn:Ga("warn",i,o),info:Ga("info",i,o),debug:Ga("debug",i,o)};return by.set(i,[o,l]),l}const $i=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qs{constructor(e,i,o){this.iterator=e,this.controller=i,this.client=o}static fromSSEResponse(e,i,o){let a=!1;const l=o?At(o):console;function c(){return fn(this,arguments,function*(){var g,p,v,_;if(a)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var b=!0,C=hn(Zx(e,i)),x;x=yield he(C.next()),g=x.done,!g;b=!0){_=x.value,b=!1;const R=_;if(!S)if(R.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield he(JSON.parse(R.data))}catch(U){throw l.error("Could not parse message into JSON:",R.data),l.error("From chunk:",R.raw),U}}}catch(R){p={error:R}}finally{try{!b&&!g&&(v=C.return)&&(yield he(v.call(C)))}finally{if(p)throw p.error}}S=!0}catch(R){if(Wc(R))return yield he(void 0);throw R}finally{S||i.abort()}})}return new Qs(c,i,o)}static fromReadableStream(e,i,o){let a=!1;function l(){return fn(this,arguments,function*(){var g,p,v,_;const S=new al,b=Lv(e);try{for(var C=!0,x=hn(b),R;R=yield he(x.next()),g=R.done,!g;C=!0){_=R.value,C=!1;const U=_;for(const G of S.decode(U))yield yield he(G)}}catch(U){p={error:U}}finally{try{!C&&!g&&(v=x.return)&&(yield he(v.call(x)))}finally{if(p)throw p.error}}for(const U of S.flush())yield yield he(U)})}function c(){return fn(this,arguments,function*(){var g,p,v,_;if(a)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var b=!0,C=hn(l()),x;x=yield he(C.next()),g=x.done,!g;b=!0){_=x.value,b=!1;const R=_;S||R&&(yield yield he(JSON.parse(R)))}}catch(R){p={error:R}}finally{try{!b&&!g&&(v=C.return)&&(yield he(v.call(C)))}finally{if(p)throw p.error}}S=!0}catch(R){if(Wc(R))return yield he(void 0);throw R}finally{S||i.abort()}})}return new Qs(c,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),i.push(c)}return l.shift()}});return[new Qs(()=>a(e),this.controller,this.client),new Qs(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return Pv({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:l}=await i.next();if(l)return o.close();const c=Rd(JSON.stringify(a)+`
`);o.enqueue(c)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}}function Zx(t,e){return fn(this,arguments,function*(){var o,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new on("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new on("Attempted to iterate over a response with no body");const h=new tR,g=new al,p=Lv(t.body);try{for(var v=!0,_=hn(eR(p)),S;S=yield he(_.next()),o=S.done,!o;v=!0){c=S.value,v=!1;const b=c;for(const C of g.decode(b)){const x=h.decode(C);x&&(yield yield he(x))}}}catch(b){a={error:b}}finally{try{!v&&!o&&(l=_.return)&&(yield he(l.call(_)))}finally{if(a)throw a.error}}for(const b of g.flush()){const C=h.decode(b);C&&(yield yield he(C))}})}function eR(t){return fn(this,arguments,function*(){var i,o,a,l;let c=new Uint8Array;try{for(var h=!0,g=hn(t),p;p=yield he(g.next()),i=p.done,!i;h=!0){l=p.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Rd(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let b;for(;(b=Wx(c))!==-1;)yield yield he(c.slice(0,b)),c=c.slice(b)}}catch(v){o={error:v}}finally{try{!h&&!i&&(a=g.return)&&(yield he(a.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield he(c))})}class tR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=nR(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function nR(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iR(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return At(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Qs.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await i.json():await i.text()})();return At(t).debug(`[${o}] response parsed`,$i({retryOfRequestLogID:a,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nd extends Promise{constructor(e,i,o=iR){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Nd(this.client,this.responsePromise,async(i,o)=>e(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zv=Symbol("brand.privateNullableHeaders");function*sR(t){if(!t)return;if(zv in t){const{values:o,nulls:a}=t;yield*o.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():vy(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=vy(o[1])?o[1]:[o[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const ir=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[l,c]of sR(o)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),i.add(h)):(e.append(l,c),i.delete(h))}}return{[zv]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dc=t=>{var e,i,o,a,l,c;if(typeof globalThis.process<"u")return(o=(i=(e=NT)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $v;class ll{constructor(e){var i,o,a,l,c,h,g,{baseURL:p=Dc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Dc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,S=Qa(e,["baseURL","apiKey","apiVersion"]);const b=Object.assign(Object.assign({apiKey:v,apiVersion:_},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=b.baseURL,this.timeout=(o=b.timeout)!==null&&o!==void 0?o:ll.DEFAULT_TIMEOUT,this.logger=(a=b.logger)!==null&&a!==void 0?a:console;const C="warn";this.logLevel=C,this.logLevel=(c=(l=wy(b.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:wy(Dc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:C,this.fetchOptions=b.fetchOptions,this.maxRetries=(h=b.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=b.fetch)!==null&&g!==void 0?g:qx(),this.encoder=Bx,this._options=b,this.apiKey=v,this.apiVersion=_,this.clientAdapter=b.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=ir([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return ir([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ir([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new on(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${$s}`}defaultIdempotencyKey(){return`stainless-node-retry-${bx()}`}makeStatusError(e,i,o,a){return xt.generate(e,i,o,a)}buildURL(e,i,o){const a=!this.baseURLOverridden()&&o||this.baseURL,l=Ax(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return Nx(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new Nd(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var a,l,c;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:p,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(p,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=o===void 0?"":`, retryOf: ${o}`,C=Date.now();if(At(this).debug(`[${S}] sending request`,$i({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:p.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Zc;const x=new AbortController,R=await this.fetchWithTimeout(v,p,_,x).catch(jc),U=Date.now();if(R instanceof globalThis.Error){const P=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Zc;const J=Wc(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(i)return At(this).info(`[${S}] connection ${J?"timed out":"failed"} - ${P}`),At(this).debug(`[${S}] connection ${J?"timed out":"failed"} (${P})`,$i({retryOfRequestLogID:o,url:v,durationMs:U-C,message:R.message})),this.retryRequest(h,i,o??S);throw At(this).info(`[${S}] connection ${J?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${S}] connection ${J?"timed out":"failed"} (error; no more retries left)`,$i({retryOfRequestLogID:o,url:v,durationMs:U-C,message:R.message})),J?new Av:new rl({cause:R})}const G=`[${S}${b}] ${p.method} ${v} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${U-C}ms`;if(!R.ok){const P=await this.shouldRetry(R);if(i&&P){const j=`retrying, ${i} attempts remaining`;return await Hx(R.body),At(this).info(`${G} - ${j}`),At(this).debug(`[${S}] response error (${j})`,$i({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:U-C})),this.retryRequest(h,i,o??S,R.headers)}const J=P?"error; no more retries left":"error; not retryable";At(this).info(`${G} - ${J}`);const Q=await R.text().catch(j=>jc(j).message),Y=kx(Q),K=Y?void 0:Q;throw At(this).debug(`[${S}] response error (${J})`,$i({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,message:K,durationMs:Date.now()-C})),this.makeStatusError(R.status,Y,K,R.headers)}return At(this).info(G),At(this).debug(`[${S}] response start`,$i({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:U-C})),{response:R,options:h,controller:x,requestLogID:S,retryOfRequestLogID:o,startTime:C}}async fetchWithTimeout(e,i,o,a){const l=i||{},{signal:c,method:h}=l,g=Qa(l,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const p=setTimeout(()=>a.abort(),o),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){var l;let c;const h=a==null?void 0:a.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=a==null?void 0:a.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,p)}return await Dx(c),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var o,a,l;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,_=this.buildURL(g,p,v);"timeout"in c&&Mx("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:b}=this.buildBody({options:c}),C=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:C},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=ir([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Ox()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ir([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Gx(e)}:this.encoder({body:e,headers:o})}}ll.DEFAULT_TIMEOUT=6e4;class ft extends ll{constructor(){super(...arguments),this.interactions=new Vv(this)}}$v=ft;ft.GeminiNextGenAPIClient=$v;ft.GeminiNextGenAPIClientError=on;ft.APIError=xt;ft.APIConnectionError=rl;ft.APIConnectionTimeoutError=Av;ft.APIUserAbortError=Zc;ft.NotFoundError=Iv;ft.ConflictError=Mv;ft.RateLimitError=Dv;ft.BadRequestError=xv;ft.AuthenticationError=Rv;ft.InternalServerError=Uv;ft.PermissionDeniedError=Nv;ft.UnprocessableEntityError=kv;ft.toFile=Jx;ft.Interactions=Vv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oR(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function rR(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function aR(t,e){const i={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(i,["sdkHttpResponse"],o),i}function lR(t,e){const i={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(i,["sdkHttpResponse"],o),i}function uR(t,e,i){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function cR(t,e,i){const o={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const b=d(t,["validationDataset"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec"],Cy(b))}else if(a==="PREFERENCE_TUNING"){const b=d(t,["validationDataset"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec"],Cy(b))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const b=d(t,["epochCount"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(h==="PREFERENCE_TUNING"){const b=d(t,["epochCount"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const b=d(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(g==="PREFERENCE_TUNING"){const b=d(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=d(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(p==="PREFERENCE_TUNING"){const b=d(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=d(t,["adapterSize"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=d(t,["adapterSize"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function dR(t,e){const i={},o=d(t,["baseModel"]);o!=null&&f(i,["baseModel"],o);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&ER(l);const c=d(t,["config"]);return c!=null&&uR(c,i),i}function fR(t,e){const i={},o=d(t,["baseModel"]);o!=null&&f(i,["baseModel"],o);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&wR(l,i,e);const c=d(t,["config"]);return c!=null&&cR(c,i,e),i}function hR(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function pR(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function mR(t,e,i){const o={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function gR(t,e,i){const o={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function yR(t,e){const i={},o=d(t,["config"]);return o!=null&&mR(o,i),i}function vR(t,e){const i={},o=d(t,["config"]);return o!=null&&gR(o,i),i}function _R(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Fv(h))),f(i,["tuningJobs"],c)}return i}function SR(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>nd(h))),f(i,["tuningJobs"],c)}return i}function TR(t,e){const i={},o=d(t,["name"]);o!=null&&f(i,["model"],o);const a=d(t,["name"]);return a!=null&&f(i,["endpoint"],a),i}function ER(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function wR(t,e,i){const o={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Fv(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],av(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(t,["description"]);v!=null&&f(i,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(i,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&f(i,["tunedModel"],TR(S)),i}function nd(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],av(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(i,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(t,["error"]);v!=null&&f(i,["error"],v);const _=d(t,["description"]);_!=null&&f(i,["description"],_);const S=d(t,["baseModel"]);S!=null&&f(i,["baseModel"],S);const b=d(t,["tunedModel"]);b!=null&&f(i,["tunedModel"],b);const C=d(t,["preTunedModel"]);C!=null&&f(i,["preTunedModel"],C);const x=d(t,["supervisedTuningSpec"]);x!=null&&f(i,["supervisedTuningSpec"],x);const R=d(t,["preferenceOptimizationSpec"]);R!=null&&f(i,["preferenceOptimizationSpec"],R);const U=d(t,["tuningDataStats"]);U!=null&&f(i,["tuningDataStats"],U);const G=d(t,["encryptionSpec"]);G!=null&&f(i,["encryptionSpec"],G);const P=d(t,["partnerModelTuningSpec"]);P!=null&&f(i,["partnerModelTuningSpec"],P);const J=d(t,["customBaseModel"]);J!=null&&f(i,["customBaseModel"],J);const Q=d(t,["experiment"]);Q!=null&&f(i,["experiment"],Q);const Y=d(t,["labels"]);Y!=null&&f(i,["labels"],Y);const K=d(t,["outputUri"]);K!=null&&f(i,["outputUri"],K);const ae=d(t,["pipelineJob"]);ae!=null&&f(i,["pipelineJob"],ae);const j=d(t,["serviceAccount"]);j!=null&&f(i,["serviceAccount"],j);const ge=d(t,["tunedModelDisplayName"]);ge!=null&&f(i,["tunedModelDisplayName"],ge);const Ne=d(t,["veoTuningSpec"]);return Ne!=null&&f(i,["veoTuningSpec"],Ne),i}function bR(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(t,["done"]);c!=null&&f(i,["done"],c);const h=d(t,["error"]);return h!=null&&f(i,["error"],h),i}function Cy(t,e){const i={},o=d(t,["gcsUri"]);o!=null&&f(i,["validationDatasetUri"],o);const a=d(t,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CR extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(Hn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:$c.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=pR(e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>nd(v))}else{const p=hR(e);return h=Z("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Fv(v))}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vR(e);return h=Z("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=SR(v),S=new Wg;return Object.assign(S,_),S})}else{const p=yR(e);return h=Z("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=_R(v),S=new Wg;return Object.assign(S,_),S})}}async cancel(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=rR(e);return h=Z("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=lR(v),S=new jg;return Object.assign(S,_),S})}else{const p=oR(e);return h=Z("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=aR(v),S=new jg;return Object.assign(S,_),S})}}async tuneInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=fR(e,e);return l=Z("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>nd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dR(e);return l=Z("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>bR(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AR{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xR=1024*1024*8,RR=3,NR=1e3,IR=2,ja="x-goog-upload-status";async function MR(t,e,i){var o;const a=await Jv(t,e,i),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function kR(t,e,i){var o;const a=await Jv(t,e,i),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=tv(l),h=new Ed;return Object.assign(h,c),h}async function Jv(t,e,i){var o,a;let l=0,c=0,h=new Fc(new Response),g="upload";for(l=t.size;c<l;){const p=Math.min(xR,l-c),v=t.slice(c,c+p);c+p>=l&&(g+=", finalize");let _=0,S=NR;for(;_<RR&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[ja]));)_++,await UR(S),S=S*IR;if(c+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[ja])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function DR(t){return{size:t.size,type:t.type}}function UR(t){return new Promise(e=>setTimeout(e,t))}class PR{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MR(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kR(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LR{create(e,i,o){return new OR(e,i,o)}}class OR{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ay="x-goog-api-key";class qR{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Ay)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ay,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GR="gl-node/";class HR{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new ft({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=DT(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new qR(this.apiKey);this.apiClient=new DA({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:GR+"web",uploader:new PR,downloader:new AR}),this.models=new jA(this.apiClient),this.live=new JA(this.apiClient,a,new LR),this.batches=new lw(this.apiClient),this.chats=new zw(this.models,this.apiClient),this.caches=new Hw(this.apiClient),this.files=new Zw(this.apiClient),this.operations=new ZA(this.apiClient),this.authTokens=new mx(this.apiClient),this.tunings=new CR(this.apiClient),this.fileSearchStores=new wx(this.apiClient)}}function ul(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function BR(t,e,i,o){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{p(o.next(v))}catch(_){c(_)}}function g(v){try{p(o.throw(v))}catch(_){c(_)}}function p(v){v.done?l(v.value):a(v.value).then(h,g)}p((o=o.apply(t,e||[])).next())})}const VR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Id extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class zR extends Id{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xy extends Id{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ry extends Id{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var id;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(id||(id={}));class $R{constructor(e,{headers:i={},customFetch:o,region:a=id.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=VR(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return BR(this,arguments,void 0,function*(i,o={}){var a;let l,c;try{const{headers:h,method:g,body:p,signal:v,timeout:_}=o;let S={},{region:b}=o;b||(b=this.region);const C=new URL(`${this.url}/${i}`);b&&b!=="any"&&(S["x-region"]=b,C.searchParams.set("forceFunctionRegion",b));let x;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",x=p):typeof p=="string"?(S["Content-Type"]="text/plain",x=p):typeof FormData<"u"&&p instanceof FormData?x=p:(S["Content-Type"]="application/json",x=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?x=JSON.stringify(p):x=p;let R=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(R=c.signal,v.addEventListener("abort",()=>c.abort())):R=c.signal);const U=yield this.fetch(C.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:x,signal:R}).catch(Q=>{throw new zR(Q)}),G=U.headers.get("x-relay-error");if(G&&G==="true")throw new xy(U);if(!U.ok)throw new Ry(U);let P=((a=U.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),J;return P==="application/json"?J=yield U.json():P==="application/octet-stream"||P==="application/pdf"?J=yield U.blob():P==="text/event-stream"?J=U:P==="multipart/form-data"?J=yield U.formData():J=yield U.text(),{data:J,error:null,response:U}}catch(h){return{data:null,error:h,response:h instanceof Ry||h instanceof xy?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var FR=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},JR=class{constructor(t){var e,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,p=l.status,v=l.statusText;if(l.ok){var _,S;if(i.method!=="HEAD"){var b;const U=await l.text();U===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((b=i.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?h=U:h=JSON.parse(U))}const x=(_=i.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");x&&R&&R.length>1&&(g=parseInt(R[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var C;const x=await l.text();try{c=JSON.parse(x),Array.isArray(c)&&l.status===404&&(h=[],c=null,p=200,v="OK")}catch{l.status===404&&x===""?(p=204,v="No Content"):c={message:x}}if(c&&i.isMaybeSingle&&(!(c==null||(C=c.details)===null||C===void 0)&&C.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&i.shouldThrowOnError)throw new FR(c)}return{error:c,data:h,count:g,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let h="";const g=l==null?void 0:l.cause;if(g){var p,v,_,S;const C=(p=g==null?void 0:g.message)!==null&&p!==void 0?p:"",x=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";h=`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(S=g==null?void 0:g.name)!==null&&S!==void 0?S:"Error"}: ${C}`,x&&(h+=` (${x})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var b;h=(b=l==null?void 0:l.stack)!==null&&b!==void 0?b:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},KR=class extends JR{select(t){let e=!1;const i=(t??"*").split("").map(o=>/\s/.test(o)&&!e?"":(o==='"'&&(e=!e),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"offset":`${o}.offset`,l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:o=!1,wal:a=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ny=new RegExp("[,()]");var Fs=class extends KR{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&Ny.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&Ny.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},YR=class{constructor(t,{headers:e={},schema:i,fetch:o}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:i=!1,count:o}=e??{},a=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",c),o&&g.append("Prefer",`count=${o}`),new Fs({method:a,url:h,headers:g,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:i=!0}={}){var o;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",g.join(","))}}return new Fs({method:a,url:l,headers:c,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:o,defaultToNull:a=!0}={}){var l;const c="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),o&&g.append("Prefer",`count=${o}`),a||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);h.searchParams.set("columns",v.join(","))}}return new Fs({method:c,url:h,headers:g,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var i;const o="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new Fs({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:t}={}){var e;const i="DELETE",{url:o,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Fs({method:i,url:o,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},XR=class Kv{constructor(e,{headers:i={},schema:o,fetch:a}={}){this.url=e,this.headers=new Headers(i),this.schemaName=o,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:o=!1,get:a=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const v=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(v)),_=o&&Object.values(i).some(v);_?(h="POST",p=i):o||a?(h=o?"HEAD":"GET",Object.entries(i).filter(([b,C])=>C!==void 0).map(([b,C])=>[b,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([b,C])=>{g.searchParams.append(b,C)})):(h="POST",p=i);const S=new Headers(this.headers);return _?S.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&S.set("Prefer",`count=${l}`),new Fs({method:h,url:g,headers:S,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class QR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const o=i.versions;if(o&&o.node){const a=o.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WR="2.90.1",jR=`realtime-js/${WR}`,Yv="1.0.0",ZR="2.0.0",Iy=Yv,sd=1e4,eN=1e3,tN=100;var vi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vi||(vi={}));var lt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(lt||(lt={}));var dn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(dn||(dn={}));var od;(function(t){t.websocket="websocket"})(od||(od={}));var Ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ji||(Ji={}));class nN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,o;const a=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,o;const a=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,o){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+_.length,b=new ArrayBuffer(this.HEADER_LENGTH+S);let C=new DataView(b),x=0;C.setUint8(x++,this.KINDS.userBroadcastPush),C.setUint8(x++,g.length),C.setUint8(x++,h.length),C.setUint8(x++,c.length),C.setUint8(x++,p.length),C.setUint8(x++,_.length),C.setUint8(x++,i),Array.from(g,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(h,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(c,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(p,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(_,U=>C.setUint8(x++,U.charCodeAt(0)));var R=new Uint8Array(b.byteLength+o.byteLength);return R.set(new Uint8Array(b),0),R.set(new Uint8Array(o),b.byteLength),R.buffer}decode(e,i){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return i(o)}if(typeof e=="string"){const o=JSON.parse(e),[a,l,c,h,g]=o;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),o=i.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,o){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=o.decode(e.slice(g,g+a));g=g+a;const v=o.decode(e.slice(g,g+l));g=g+l;const _=o.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),b=h===this.JSON_ENCODING?JSON.parse(o.decode(S)):S,C={type:this.BROADCAST_EVENT,event:v,payload:b};return c>0&&(C.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>i.includes(o)))}}class Xv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const My=(t,e,i={})=>{var o;const a=(o=i.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=iN(c,t,e,a),l),{}):{}},iN=(t,e,i,o)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,c=i[t];return l&&!o.includes(l)?Qv(l,c):rd(c)},Qv=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return aN(e,i)}switch(t){case $e.bool:return sN(e);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return oN(e);case $e.json:case $e.jsonb:return rN(e);case $e.timestamp:return lN(e);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return rd(e);default:return rd(e)}},rd=t=>t,sN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},aN=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,o=t[i];if(t[0]==="{"&&o==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>Qv(e,h))}return t},lN=t=>typeof t=="string"?t.replace(" ","T"):t,Wv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Uc{constructor(e,i,o={},a=sd){this.channel=e,this.event=i,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ky;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ky||(ky={}));class rr{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rr.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=rr.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=rr.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const _=l[p];if(_){const S=v.map(R=>R.presence_ref),b=_.map(R=>R.presence_ref),C=v.filter(R=>b.indexOf(R.presence_ref)<0),x=_.filter(R=>S.indexOf(R.presence_ref)<0);C.length>0&&(h[p]=C),x.length>0&&(g[p]=x)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:g},o,a)}static syncDiff(e,i,o,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(b=>b.presence_ref),S=v.filter(b=>_.indexOf(b.presence_ref)<0);e[h].unshift(...S)}o(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(_=>_.presence_ref);p=p.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const a=e[o];return"metas"in a?i[o]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[o]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Dy||(Dy={}));var ar;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ar||(ar={}));var Gn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class Ws{constructor(e,i={config:{}},o){var a,l;if(this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Uc(this,dn.join,this.params,this.timeout),this.rejoinTimer=new Xv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new rr(this),this.broadcastEndpointURL=Wv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var o,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(b=>b.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[ar.PRESENCE]&&this.bindings[ar.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Gn.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Gn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:b})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(Gn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,R=(C=x==null?void 0:x.length)!==null&&C!==void 0?C:0,U=[];for(let G=0;G<R;G++){const P=x[G],{filter:{event:J,schema:Q,table:Y,filter:K}}=P,ae=b&&b[G];if(ae&&ae.event===J&&Ws.isFilterValueEqual(ae.schema,Q)&&Ws.isFilterValueEqual(ae.table,Y)&&Ws.isFilterValueEqual(ae.filter,K))U.push(Object.assign(Object.assign({},P),{id:ae.id}));else{this.unsubscribe(),this.state=lt.errored,e==null||e(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(Gn.SUBSCRIBED);return}}).receive("error",b=>{this.state=lt.errored,e==null||e(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===lt.joined&&e===ar.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,o)}async httpSend(e,i,o={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var o,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new Uc(this,dn.leave,{},e),o.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const a=new AbortController,l=setTimeout(()=>a.abort(),o),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Uc(this,e,i,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tN){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=dn;if(o&&[h,g,p,v].indexOf(c)>=0&&o!==this._joinRef())return;let S=this._onMessage(c,i,o);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var C,x,R;return((C=b.filter)===null||C===void 0?void 0:C.event)==="*"||((R=(x=b.filter)===null||x===void 0?void 0:x.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(b=>b.callback(S,o)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var C,x,R,U,G,P,J,Q;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const Y=b.id,K=(C=b.filter)===null||C===void 0?void 0:C.event;return Y&&((x=i.ids)===null||x===void 0?void 0:x.includes(Y))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((R=i.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))&&(!(!((U=b.filter)===null||U===void 0)&&U.table)||b.filter.table===((G=i.data)===null||G===void 0?void 0:G.table))}else{const Y=(J=(P=b==null?void 0:b.filter)===null||P===void 0?void 0:P.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return Y==="*"||Y===((Q=i==null?void 0:i.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof S=="object"&&"ids"in S){const C=S.data,{schema:x,table:R,commit_timestamp:U,type:G,errors:P}=C;S=Object.assign(Object.assign({},{schema:x,table:R,commit_timestamp:U,eventType:G,new:{},old:{},errors:P}),this._getPayloadRecords(C))}b.callback(S,o)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:o};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&Ws.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dn.close,{},e)}_onError(e){this._on(dn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=My(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=My(e.columns,e.old_record)),i}}const Pc=()=>{},Ha={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uN=[1e3,2e3,5e3,1e4],cN=1e4,dN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fN{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sd,this.transport=null,this.heartbeatIntervalMs=Ha.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pc,this.ref=0,this.reconnectTimer=null,this.vsn=Iy,this.logger=Pc,this.conn=null,this.sendBuffer=[],this.serializer=new nN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${od.websocket}`,this.httpEndpoint=Wv(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case vi.connecting:return Ji.Connecting;case vi.open:return Ji.Open;case vi.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===o);if(a)return a;{const l=new Ws(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:o,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${o} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(eN,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ha.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${o} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===vi.open||this.conn.readyState===vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(dn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${o}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([dN],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,o=!1;if(e)i=e,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:jR};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(dn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Xv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ha.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,a,l,c,h,g,p,v,_,S,b;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:sd,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ha.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Pc,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Iy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(C=>uN[C-1]||cN),this.vsn){case Yv:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((C,x)=>x(JSON.stringify(C))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((C,x)=>x(JSON.parse(C)));break;case ZR:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var lr=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hN(t,e,i){const o=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&o.searchParams.set(a,l);return o.toString()}async function pN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function mN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:a,body:l,headers:c}){const h=hN(t.baseUrl,o,a),g=await pN(t.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!p.ok){const b=_?S:void 0,C=b==null?void 0:b.error;throw new lr((C==null?void 0:C.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:C==null?void 0:C.type,icebergCode:C==null?void 0:C.code,details:b})}return{status:p.status,headers:p.headers,data:S}}}}function Ba(t){return t.join("")}var gN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ba(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ba(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ba(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ba(t.namespace)}`}),!0}catch(e){if(e instanceof lr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof lr&&i.status===409)return;throw i}}};function qs(t){return t.join("")}var yN=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof lr&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof lr&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},vN=class{constructor(t){var o;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=mN({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(o=t.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new gN(this.client,e),this.tableOps=new yN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},cl=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var _N=class extends cl{constructor(t,e,i){super(t),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ad=class extends cl{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Md=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),SN=()=>Response,ld=t=>{if(Array.isArray(t))return t.map(i=>ld(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,o])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=ld(o)}),e},TN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},EN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ur(t){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(t)}function wN(t,e){if(ur(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var o=i.call(t,e);if(ur(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bN(t){var e=wN(t,"string");return ur(e)=="symbol"?e:e+""}function CN(t,e,i){return(e=bN(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Uy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,o)}return i}function de(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Uy(Object(i),!0).forEach(function(o){CN(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Uy(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}const Lc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},AN=async(t,e,i)=>{t instanceof await SN()&&!(i!=null&&i.noResolveJson)?t.json().then(o=>{const a=t.status||500,l=(o==null?void 0:o.statusCode)||a+"";e(new _N(Lc(o),a,l))}).catch(o=>{e(new ad(Lc(o),o))}):e(new ad(Lc(t),t))},xN=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!o?a:(TN(o)?(a.headers=de({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,e!=null&&e.duplex&&(a.duplex=e.duplex),de(de({},a),i))};async function mr(t,e,i,o,a,l){return new Promise((c,h)=>{t(i,xN(e,o,a,l)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>AN(g,h,o))})}async function cr(t,e,i,o){return mr(t,"GET",e,i,o)}async function cn(t,e,i,o,a){return mr(t,"POST",e,o,a,i)}async function ud(t,e,i,o,a){return mr(t,"PUT",e,o,a,i)}async function RN(t,e,i,o){return mr(t,"HEAD",e,de(de({},i),{},{noResolveJson:!0}),o)}async function kd(t,e,i,o,a){return mr(t,"DELETE",e,o,a,i)}var NN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}};let jv;jv=Symbol.toStringTag;var IN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[jv]="BlobDownloadBuilder",this.promise=null}asStream(){return new NN(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}};const MN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Py={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var kN=class{constructor(t,e={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=i,this.fetch=Md(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,i,o){var a=this;try{let l;const c=de(de({},Py),o);let h=de(de({},a.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),o!=null&&o.headers&&(h=de(de({},h),o.headers));const p=a._removeEmptyFolders(e),v=a._getFinalPath(p),_=await(t=="PUT"?ud:cn)(a.fetch,`${a.url}/object/${v}`,l,de({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,o){var a=this;const l=a._removeEmptyFolders(t),c=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${c}`);h.searchParams.set("token",e);try{let g;const p=de({upsert:Py.upsert},o),v=de(de({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",p.cacheControl)):(g=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{data:{path:l,fullPath:(await ud(a.fetch,h.toString(),g,{headers:v})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(Xe(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(t,e){var i=this;try{let o=i._getFinalPath(t);const a=de({},i.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await cn(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:a}),c=new URL(i.url+l.url),h=c.searchParams.get("token");if(!h)throw new cl("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:h},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var o=this;try{return{data:await cn(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers}),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}async copy(t,e,i){var o=this;try{return{data:{path:(await cn(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers})).Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,i){var o=this;try{let a=o._getFinalPath(t),l=await cn(o.fetch,`${o.url}/object/sign/${a}`,de({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:o.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${o.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,i){var o=this;try{const a=await cn(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:e,paths:t},{headers:o.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>de(de({},c),{},{signedUrl:c.signedURL?encodeURI(`${o.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}download(t,e){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>cr(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new IN(c,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);try{return{data:ld(await cr(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await RN(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(Xe(o)&&o instanceof ad){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}}getPublicUrl(t,e){const i=this._getFinalPath(t),o=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&o.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&o.push(c);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;try{return{data:await kd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async list(t,e,i){var o=this;try{const a=de(de(de({},MN),e),{},{prefix:t||""});return{data:await cn(o.fetch,`${o.url}/object/list/${o.bucketId}`,a,{headers:o.headers},i),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}async listV2(t,e){var i=this;try{const o=de({},t);return{data:await cn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},e),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Zv="2.90.1",e0={"X-Client-Info":`storage-js/${Zv}`};var DN=class{constructor(t,e={},i,o){this.shouldThrowOnError=!1;const a=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=de(de({},e0),e),this.fetch=Md(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const i=e.listBucketOptionsToQueryString(t);return{data:await cr(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await cr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async createBucket(t,e={public:!1}){var i=this;try{return{data:await cn(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async updateBucket(t,e){var i=this;try{return{data:await ud(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async emptyBucket(t){var e=this;try{return{data:await cn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await kd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},UN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},e0),e),this.fetch=Md(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await cn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async listBuckets(t){var e=this;try{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const o=i.toString(),a=o?`${e.url}/bucket?${o}`:`${e.url}/bucket`;return{data:await cr(e.fetch,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await kd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}from(t){var e=this;if(!EN(t))throw new cl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new vN({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(a,h),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const Dd={"X-Client-Info":`storage-js/${Zv}`,"Content-Type":"application/json"};var t0=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ft(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Oc=class extends t0{constructor(t,e,i){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},PN=class extends t0{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ud=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),LN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ly=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ON=async(t,e,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const o=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new Oc(Ly(l),o,c))}).catch(()=>{const l=o+"";e(new Oc(a.statusText||`HTTP ${o} error`,o,l))});else{const l=o+"";e(new Oc(a.statusText||`HTTP ${o} error`,o,l))}}else e(new PN(Ly(t),t))},qN=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return o?(LN(o)?(a.headers=de({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,de(de({},a),i)):a};async function GN(t,e,i,o,a,l){return new Promise((c,h)=>{t(i,qN(e,o,a,l)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>ON(g,h,o))})}async function Jt(t,e,i,o,a){return GN(t,"POST",e,o,a,i)}var HN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},Dd),e),this.fetch=Ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async getIndex(t,e){var i=this;try{return{data:await Jt(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ft(o))return{data:null,error:o};throw o}}async listIndexes(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async deleteIndex(t,e){var i=this;try{return{data:await Jt(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ft(o))return{data:null,error:o};throw o}}},BN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},Dd),e),this.fetch=Ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Jt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async getVectors(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Jt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async queryVectors(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Jt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}},VN=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},Dd),e),this.fetch=Ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async listBuckets(t={}){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Jt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}},zN=class extends VN{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $N(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},$N=class extends HN{constructor(t,e,i,o){super(t,e,o),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new FN(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},FN=class extends BN{constructor(t,e,i,o,a){super(t,e,a),this.vectorBucketName=i,this.indexName=o}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},JN=class extends DN{constructor(t,e={},i,o){super(t,e,i,o)}from(t){return new kN(this.url,this.headers,t,this.fetch)}get vectors(){return new zN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new UN(this.url+"/iceberg",this.headers,this.fetch)}};const n0="2.90.1",Js=30*1e3,cd=3,qc=cd*Js,KN="http://localhost:9999",YN="supabase.auth.token",XN={"X-Client-Info":`gotrue-js/${n0}`},dd="X-Supabase-Api-Version",i0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,WN=600*1e3;class dr extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jN extends dr{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function ZN(t){return re(t)&&t.name==="AuthApiError"}class Ki extends dr{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class zn extends dr{constructor(e,i,o,a){super(e,o,a),this.name=i,this.status=o}}class $t extends zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e1(t){return re(t)&&t.name==="AuthSessionMissingError"}class Gs extends zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Va extends zn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class za extends zn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t1(t){return re(t)&&t.name==="AuthImplicitGrantRedirectError"}class Oy extends zn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n1 extends zn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class fd extends zn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Gc(t){return re(t)&&t.name==="AuthRetryableFetchError"}class qy extends zn{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class hd extends zn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Za="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gy=` 	
\r=`.split(""),i1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Gy.length;e+=1)t[Gy[e].charCodeAt(0)]=-2;for(let e=0;e<Za.length;e+=1)t[Za[e].charCodeAt(0)]=e;return t})();function Hy(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Za[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Za[o]),e.queuedBits-=6}}function s0(t,e,i){const o=i1[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function By(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{r1(c,o,i)};for(let c=0;c<t.length;c+=1)s0(t.charCodeAt(c),a,l);return e.join("")}function s1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function o1(t,e){for(let i=0;i<t.length;i+=1){let o=t.charCodeAt(i);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}s1(o,e)}}function r1(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function eo(t){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)s0(t.charCodeAt(a),i,o);return new Uint8Array(e)}function a1(t){const e=[];return o1(t,i=>e.push(i)),new Uint8Array(e)}function Xi(t){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};return t.forEach(a=>Hy(a,i,o)),Hy(null,i,o),e.join("")}function l1(t){return Math.round(Date.now()/1e3)+t}function u1(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",Bi={tested:!1,writable:!1},o0=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bi.tested)return Bi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Bi.tested=!0,Bi.writable=!0}catch{Bi.tested=!0,Bi.writable=!1}return Bi.writable};function c1(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((o,a)=>{e[a]=o}),e}const r0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),d1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ks=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Vi=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},St=async(t,e)=>{await t.removeItem(e)};class dl{constructor(){this.promise=new dl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}dl.promiseConstructor=Promise;function Hc(t){const e=t.split(".");if(e.length!==3)throw new hd("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!QN.test(e[o]))throw new hd("JWT not in base64url format");return{header:JSON.parse(By(e[0])),payload:JSON.parse(By(e[1])),signature:eo(e[2]),raw:{header:e[0],payload:e[1]}}}async function f1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h1(t,e){return new Promise((o,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){o(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function p1(t){return("0"+t.toString(16)).substr(-2)}function m1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(e),Array.from(e,p1).join("")}async function g1(t){const i=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(o);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function y1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await g1(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hs(t,e,i=!1){const o=m1();let a=o;i&&(a+="/PASSWORD_RECOVERY"),await Ks(t,`${e}-code-verifier`,a);const l=await y1(o);return[l,o===l?"plain":"s256"]}const v1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _1(t){const e=t.headers.get(dd);if(!e||!e.match(v1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function S1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function T1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const E1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bs(t){if(!E1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function w1(t,e){return new Proxy(t,{get:(i,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,a)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,o,a)}})}function Vy(t){return JSON.parse(JSON.stringify(t))}const Fi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b1=[502,503,504];async function zy(t){var e;if(!d1(t))throw new fd(Fi(t),0);if(b1.includes(t.status))throw new fd(Fi(t),t.status);let i;try{i=await t.json()}catch(l){throw new Ki(Fi(l),l)}let o;const a=_1(t);if(a&&a.getTime()>=i0["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new qy(Fi(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new $t}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new qy(Fi(i),t.status,i.weak_password.reasons);throw new jN(Fi(i),t.status||500,o)}const C1=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),i))};async function ce(t,e,i,o){var a;const l=Object.assign({},o==null?void 0:o.headers);l[dd]||(l[dd]=i0["2024-01-01"].name),o!=null&&o.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const c=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(c.redirect_to=o.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await A1(t,e,i+h,{headers:l,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function A1(t,e,i,o,a,l){const c=C1(e,o,a,l);let h;try{h=await t(i,Object.assign({},c))}catch(g){throw console.error(g),new fd(Fi(g),0)}if(h.ok||await zy(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(g){await zy(g)}}function un(t){var e;let i=null;N1(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=l1(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:o},error:null}}function $y(t){const e=un(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function x1(t){return{data:t,error:null}}function R1(t){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:l}=t,c=ul(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Fy(t){return t}function N1(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vc=["global","local","others"];class I1{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=r0(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Vc[0]){if(Vc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vc.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_i})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=ul(e,["options"]),a=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:R1,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(re(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_i})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Fy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);p[`${R}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(re(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Bs(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_i})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Bs(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:_i})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){Bs(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:_i})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Bs(e.userId);try{const{data:i,error:o}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:o}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Bs(e.userId),Bs(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,o,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Fy});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);p[`${R}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(re(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(re(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(re(i))return{data:null,error:i};throw i}}}function Jy(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const Vs={debug:!!(globalThis&&o0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class a0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class M1 extends a0{}async function k1(t,e,i){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new M1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function D1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function l0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function U1(t){return parseInt(t,16)}function P1(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function L1(t){var e;const{chainId:i,domain:o,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=l0(t.address),C=v?`${v}://${o}`:o,x=t.statement?`${t.statement}
`:"",R=`${C} wants you to sign in with your Ethereum account:
${b}

${x}`;let U=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(U+=`
Expiration Time: ${a.toISOString()}`),h&&(U+=`
Not Before: ${h.toISOString()}`),g&&(U+=`
Request ID: ${g}`),p){let G=`
Resources:`;for(const P of p){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);G+=`
- ${P}`}U+=G}return`${R}
${U}`}class ot extends Error{constructor({message:e,code:i,cause:o,name:a}){var l;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=a??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class el extends ot{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function O1({error:t,options:e}){var i,o,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(u0(c)){if(l.rp.id!==c)return new ot({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function q1({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(u0(o)){if(i.rpId!==o)return new ot({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class G1{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const H1=new G1;function B1(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:o}=t,a=ul(t,["challenge","user","excludeCredentials"]),l=eo(e).buffer,c=Object.assign(Object.assign({},i),{id:eo(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(o&&o.length>0){h.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const p=o[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:eo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function V1(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,o=ul(t,["challenge","allowCredentials"]),a=eo(e).buffer,l=Object.assign(Object.assign({},o),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:eo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function z1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Xi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,o=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Xi(new Uint8Array(a.authenticatorData)),clientDataJSON:Xi(new Uint8Array(a.clientDataJSON)),signature:Xi(new Uint8Array(a.signature)),userHandle:a.userHandle?Xi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function u0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ky(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function F1(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new el("Browser returned unexpected credential type",e)}:{data:null,error:new el("Empty credential response",e)}}catch(e){return{data:null,error:O1({error:e,options:t})}}}async function J1(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new el("Browser returned unexpected credential type",e)}:{data:null,error:new el("Empty credential response",e)}}catch(e){return{data:null,error:q1({error:e,options:t})}}}const K1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Y1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function tl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))o[l]=c;else if(i(c))o[l]=c;else if(e(c)){const h=o[l];e(h)?o[l]=tl(h,c):o[l]=tl(c)}else o[l]=c}return o}function X1(t,e){return tl(K1,t,e||{})}function Q1(t,e){return tl(Y1,t,e||{})}class W1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:o,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??H1.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${o}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=X1(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await F1({publicKey:p,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const p=Q1(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await J1(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new dr("rpId is required for WebAuthn authentication")};try{if(!Ky())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:o},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:o,credential_response:g.credential_response}})}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new dr("rpId is required for WebAuthn registration")};try{if(!Ky())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in register",c)}}}}D1();const j1={url:KN,storageKey:YN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Yy(t,e,i){return await i()}const zs={};class fr{get jwks(){var e,i;return(i=(e=zs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){zs[this.storageKey]=Object.assign(Object.assign({},zs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=zs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zs[this.storageKey]=Object.assign(Object.assign({},zs[this.storageKey]),{cachedAt:e})}constructor(e){var i,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},j1),e);if(this.storageKey=l.storageKey,this.instanceID=(i=fr.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,fr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Tt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new I1({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=r0(l.fetch),this.lock=l.lock||Yy,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Tt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=k1:this.lock=Yy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new W1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:o0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Jy(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${n0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},o="none";if(Tt()&&(i=c1(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),Tt()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),t1(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return re(i)?this._returnResult({error:i}):this._returnResult({error:new Ki("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,a;try{const l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:un}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,o,a;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let b=null,C=null;this.flowType==="pkce"&&([b,C]=await Hs(this.storage,this.storageKey)),l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:b,code_challenge_method:C},xform:un})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:un})}else throw new Va("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await St(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$y})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$y})}else throw new Va("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const l=new Gs;return this._returnResult({data:{user:null,session:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,o,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,o,a,l,c,h,g,p,v,_,S;let b,C;if("message"in e)b=e.message,C=e.signature;else{const{chain:x,wallet:R,statement:U,options:G}=e;let P;if(Tt())if(typeof R=="object")P=R;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")P=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=R}const J=new URL((i=G==null?void 0:G.url)!==null&&i!==void 0?i:window.location.href),Q=await P.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Q||Q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=l0(Q[0]);let K=(o=G==null?void 0:G.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!K){const j=await P.request({method:"eth_chainId"});K=U1(j)}const ae={domain:J.host,address:Y,statement:U,uri:J.href,version:"1",chainId:K,nonce:(a=G==null?void 0:G.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=G==null?void 0:G.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=G==null?void 0:G.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=G==null?void 0:G.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=G==null?void 0:G.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=G==null?void 0:G.signInWithEthereum)===null||v===void 0?void 0:v.resources};b=L1(ae),C=await P.request({method:"personal_sign",params:[P1(b),Y]})}try{const{data:x,error:R}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:C},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:un});if(R)throw R;if(!x||!x.session||!x.user){const U=new Gs;return this._returnResult({data:{user:null,session:null},error:U})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:R})}catch(x){if(re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var i,o,a,l,c,h,g,p,v,_,S,b;let C,x;if("message"in e)C=e.message,x=e.signature;else{const{chain:R,wallet:U,statement:G,options:P}=e;let J;if(Tt())if(typeof U=="object")J=U;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))J=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=U}const Q=new URL((i=P==null?void 0:P.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in J&&J.signIn){const Y=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),G?{statement:G}:null));let K;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")K=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)K=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)C=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),x=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${Q.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(a=(o=P==null?void 0:P.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=P==null?void 0:P.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((c=P==null?void 0:P.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((g=P==null?void 0:P.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((p=P==null?void 0:P.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((_=(v=P==null?void 0:P.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...P.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const Y=await J.signMessage(new TextEncoder().encode(C),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=Y}}try{const{data:R,error:U}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Xi(x)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:un});if(U)throw U;if(!R||!R.session||!R.user){const G=new Gs;return this._returnResult({data:{user:null,session:null},error:G})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:U})}catch(R){if(re(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const i=await Vi(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new n1;const{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:un});if(await St(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Gs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:o,token:a,access_token:l,nonce:c}=e,h=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:un}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new Gs;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,o,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Hs(this.storage,this.storageKey));const{error:_}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new Va("You must provide either an email or phone number.")}catch(h){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,o;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:h}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:un});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,o,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Hs(this.storage,this.storageKey));const p=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:x1});return!((l=p.data)===null||l===void 0)&&l.url&&Tt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new $t;const{error:a}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:a,options:l}=e,{error:c}=await ce(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:o,type:a,options:l}=e,{data:c,error:h}=await ce(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Va("You must provide either an email or phone number and a type")}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Vi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<qc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const c=await Vi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Bc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=w1(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_i}):await this._useSession(async i=>{var o,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:_i})})}catch(i){if(re(i))return e1(i)&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:a,error:l}=o;if(l)throw l;if(!a.session)throw new $t;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Hs(this.storage,this.storageKey));const{data:p,error:v}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:_i});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(o){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $t;const i=Date.now()/1e3;let o=i,a=!0,l=null;const{payload:c}=Hc(e.access_token);if(c.exp&&(o=c.exp,a=o<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(re(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(o=c.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new $t;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!Tt())throw new za("No browser detected.");if(e.error||e.error_description||e.error_code)throw new za(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Oy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new za("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Oy("No code detected.");const{data:G,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new za("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const b=S-v;b*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const C=S-_;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,S,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,S,v);const{data:x,error:R}=await this._getUser(l);if(R)throw R;const U={provider_token:o,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(o){if(re(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Vi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(o=a.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(ZN(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=u1(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Hs(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:o,error:a}=await this._useSession(async l=>{var c,h,g,p,v;const{data:_,error:S}=l;if(S)throw S;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",b,{headers:this.headers,jwt:(v=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Tt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:e.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(re(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var o;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,_=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l==null?void 0:l.access_token)!==null&&o!==void 0?o:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:un}),{data:S,error:b}=_;return b?this._returnResult({data:{user:null,session:null},error:b}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Gs}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:b}))}catch(a){if(await St(this.storage,`${this.storageKey}-code-verifier`),re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,a;const{data:l,error:c}=i;if(c)throw c;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await h1(async a=>(a>0&&await f1(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:un})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Gc(l)&&Date.now()+c-o<Js})}catch(o){if(this._debug(i,"error",o),re(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),Tt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await Vi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Vi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Ks(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Bc()}else if(a&&!a.user&&!a.user){const c=await Vi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await St(this.storage,this.storageKey+"-user"),await Ks(this.storage,this.storageKey,a)):a.user=Bc()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<qc;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${qc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Gc(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new $t;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),re(l)){const c={data:null,error:l};return Gc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,o=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await St(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Ks(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=Vy(a);await Ks(this.storage,this.storageKey,l)}else{const a=Vy(i);await Ks(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await St(this.storage,this.storageKey),await St(this.storage,this.storageKey+"-code-verifier"),await St(this.storage,this.storageKey+"-user"),this.userStorage&&await St(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-e)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Js}ms, refresh threshold is ${cd} ticks`),a<=cd&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof a0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const a=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,c]=await Hs(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(o!=null&&o.queryParams){const l=new URLSearchParams(o.queryParams);a.push(l.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?z1(e.webauthn.credential_response):$1(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:B1(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:V1(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Hc(o.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new $t})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new $t});const c=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new $t});const c=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;return o?this._returnResult({data:null,error:o}):i?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new $t})})}catch(e){if(re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $t})})}catch(i){if(re(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(h=>h.kid===e);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(h=>h.kid===e),o&&this.jwks_cached_at+WN>a)return o;const{data:l,error:c}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,o=l.keys.find(h=>h.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:b,error:C}=await this.getSession();if(C||!b.session)return this._returnResult({data:null,error:C});o=b.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=Hc(o);i!=null&&i.allowExpired||S1(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:b}=await this.getUser(o);if(b)throw b;return{data:{claims:l,header:a,signature:c},error:null}}const v=T1(a.alg),_=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,a1(`${h}.${g}`)))throw new hd("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}}fr.nextInstanceID={};const Z1=fr,eI="2.90.1";let or="";typeof Deno<"u"?or="deno":typeof document<"u"?or="web":typeof navigator<"u"&&navigator.product==="ReactNative"?or="react-native":or="node";const tI={"X-Client-Info":`supabase-js-${or}/${eI}`},nI={headers:tI},iI={schema:"public"},sI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oI={};function hr(t){"@babel/helpers - typeof";return hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(t)}function rI(t,e){if(hr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var o=i.call(t,e);if(hr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aI(t){var e=rI(t,"string");return hr(e)=="symbol"?e:e+""}function lI(t,e,i){return(e=aI(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,o)}return i}function je(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Xy(Object(i),!0).forEach(function(o){lI(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xy(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}const uI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cI=()=>Headers,dI=(t,e,i)=>{const o=uI(i),a=cI();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),o(l,je(je({},c),{},{headers:p}))}};function fI(t){return t.endsWith("/")?t:t+"/"}function hI(t,e){var i,o;const{db:a,auth:l,realtime:c,global:h}=t,{db:g,auth:p,realtime:v,global:_}=e,S={db:je(je({},g),a),auth:je(je({},p),l),realtime:je(je({},v),c),storage:{},global:je(je(je({},_),h),{},{headers:je(je({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function pI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var mI=class extends Z1{constructor(t){super(t)}},gI=class{constructor(t,e,i){var o,a;this.supabaseUrl=t,this.supabaseKey=e;const l=pI(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:iI,realtime:oI,auth:je(je({},sI),{},{storageKey:c}),global:nI},g=hI(i??{},h);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=dI(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(je({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new XR(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new JN(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new $R(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:o}=await t.auth.getSession();return(e=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:p},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mI({url:this.authUrl.href,headers:je(je({},S),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:a,flowType:c,lock:h,debug:g,throwOnError:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new fN(this.realtimeUrl.href,je(je({},t),{},{params:je(je({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const yI=(t,e,i)=>new gI(t,e,i);function vI(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}vI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _I="https://myrbpmpwrujdvqxswmqv.supabase.co",SI="sb_publishable_a7WiUizArAAA5IOhNej-2A_m1HEv1Rt",Si=yI(_I,SI),TI=new HR({apiKey:""}),EI={type:xe.OBJECT,properties:{items:{type:xe.ARRAY,items:{type:xe.OBJECT,properties:{hanzi:{type:xe.STRING},pinyin:{type:xe.STRING},partOfSpeech:{type:xe.STRING,description:"e.g. , , , "},definition:{type:xe.STRING},exampleSentence:{type:xe.STRING}},required:["hanzi","pinyin","definition","partOfSpeech"]}},description:{type:xe.STRING,description:"A brief summary of what this level expects for vocabulary."}}},wI={type:xe.OBJECT,properties:{items:{type:xe.ARRAY,items:{type:xe.OBJECT,properties:{char:{type:xe.STRING},pinyin:{type:xe.STRING},meaning:{type:xe.STRING},strokes:{type:xe.NUMBER},type:{type:xe.STRING,description:"Either 'reading' or 'writing'"}},required:["char","pinyin","meaning"]}},description:{type:xe.STRING,description:"A brief summary of character requirements for this level."}}},bI={type:xe.OBJECT,properties:{items:{type:xe.ARRAY,items:{type:xe.OBJECT,properties:{category:{type:xe.STRING,description:"Main category like 'Phrase' or 'Sentence Component'"},pattern:{type:xe.STRING,description:"The grammar structure, e.g., 'Subject + Verb + Object'"},name:{type:xe.STRING,description:"The name of the grammar point"},explanation:{type:xe.STRING},example:{type:xe.STRING}},required:["pattern","name","explanation","example"]}},description:{type:xe.STRING,description:"A brief summary of grammar complexity for this level."}}},Qy=t=>{if(!t)return 99;if(t==="7-9")return 7;const e=t.match(/^\d+/);return e?parseInt(e[0],10):99},CI=async(t,e,i=!1,o="vi")=>{if(!i)try{let g=[],p=null;if(e==="vocabulary"){let v=Si.from("entries_vocabulary").select("*");t!=="all"&&(v=v.or(`level.eq.${t},level.ilike.${t}%`));const _=await v.order("ordinal",{ascending:!0});g=_.data||[],p=_.error}else if(e==="characters"){let v=Si.from("entries_character").select("*");t==="all"||(t==="1"||t==="2"?v=v.in("level",[t,"1-2"]):v=v.eq("level",t));const _=await v.order("ordinal",{ascending:!0});g=_.data||[],p=_.error}else if(e==="tasks"){let v=Si.from("entries_task").select("*");t!=="all"&&(v=v.eq("level",t));const _=await v;g=_.data||[],p=_.error}else if(e==="topics"){let v=Si.from("entries_topic").select("*");t!=="all"&&(v=v.eq("level",t));const _=await v;g=_.data||[],p=_.error}else{let v=Si.from("entries_grammar").select("id, category, sub_category, pattern, name, explanation, example, level, category_en, category_vi, sub_category_en, sub_category_vi, name_en, name_vi");t!=="all"&&(v=v.eq("level",t));const _=await v;g=_.data||[],p=_.error}if(t==="all"&&g.sort((v,_)=>Qy(v.level)-Qy(_.level)),p&&console.error("Supabase Error:",p),g&&g.length>0){const v=g.map(C=>Ja(C,e,o)),_=new Set;return{items:v.filter(C=>{let x="";if("hanzi"in C)x=`v-${C.hanzi}-${C.level}-${C.ordinal}`;else if("char"in C)x=`c-${C.char}-${C.level}-${C.type}-${C.ordinal}`;else if("pattern"in C&&"name"in C)x=`g-${C.name}-${C.level}-${C.pattern}`;else return!0;return _.has(x)?!1:(_.add(x),!0)}),description:o==="vi"?"Ni dung t c s d liu":o==="zh"?" HSK 3.0 ":"Content from HSK 3.0 Official Syllabus"}}}catch(g){console.error("Unexpected error fetching from Supabase:",g)}console.log("Falling back to Gemini AI generation...");const a="gemini-2.0-flash-exp";let l="",c=null;const h=o==="vi"?"Vietnamese":o==="zh"?"Chinese (Simplified)":"English";e==="vocabulary"?(l=`Generate a representative list of 8 distinctive HSK Level ${t} vocabulary words. 
    Include the Simplified Chinese (hanzi), Pinyin, Part of Speech (e.g. , , ) as 'partOfSpeech', ${h} definition, and a simple example sentence using the word.
    Focus on words that are introduced specifically at Level ${t} (HSK 3.0 standard).`,c=EI):e==="characters"?(l=`Generate a list of 8 representative Chinese characters (Hanzi) that are required for HSK Level ${t} (3.0 standard).
    Include the character, pinyin, basic meaning in ${h}, stroke count, and set type to 'reading'.`,c=wI):(l=`Generate a list of 5 key grammar points specifically for HSK Level ${t} (3.0 standard).
    Include a category (e.g. Phrase, Sentence Pattern), structural pattern, name, explanation in ${h}, and example sentence.`,c=bI);try{const p=(await TI.models.generateContent({model:a,contents:l,config:{responseMimeType:"application/json",responseSchema:c,systemInstruction:`You are an expert Chinese language teacher specializing in the HSK 3.0 curriculum. Provide accurate, educational content. Ensure all definitions and explanations are in ${h}.`}})).text;if(!p)throw new Error("No response from AI");const v=JSON.parse(p);return v.items=v.items.map(_=>({..._,source:"ai"})),v}catch(g){throw console.error("Gemini API Error:",g),new Error("Failed to fetch HSK content. Please check your API Key or network.")}},Ja=(t,e,i="zh")=>e==="vocabulary"?{hanzi:t.hanzi,pinyin:t.pinyin,partOfSpeech:t.part_of_speech,definition:t.definition,exampleSentence:t.example_sentence,ordinal:t.ordinal,source:t.source||"official",level:t.level,section:e}:e==="characters"?{char:t.char,pinyin:t.pinyin,meaning:t.meaning,strokes:t.strokes,type:t.type,ordinal:t.ordinal,source:t.source||"official",level:t.level,section:e}:e==="tasks"?{category:i==="vi"?t.category_vi||t.category:i==="en"&&t.category_en||t.category,description:i==="vi"?t.description_vi||t.description:i==="en"&&t.description_en||t.description,canDo:i==="vi"?t.can_do_vi&&t.can_do_vi.length>0?t.can_do_vi:t.can_do:i==="en"&&t.can_do_en&&t.can_do_en.length>0?t.can_do_en:t.can_do,source:t.source||"official",level:t.level,section:e}:e==="topics"?{primary:i==="vi"?t.primary_topic_vi||t.primary_topic:i==="en"&&t.primary_topic_en||t.primary_topic,secondary:i==="vi"?t.secondary_topic_vi||t.secondary_topic:i==="en"&&t.secondary_topic_en||t.secondary_topic,items:(i==="vi"?t.tertiary_items_vi&&t.tertiary_items_vi.length>0?t.tertiary_items_vi:t.tertiary_items:i==="en"&&t.tertiary_items_en&&t.tertiary_items_en.length>0?t.tertiary_items_en:t.tertiary_items)||[],source:t.source||"official",level:t.level,section:e}:{category:t.category,subCategory:t.sub_category,name:t.name,pattern:t.pattern,explanation:t.explanation,example:t.example,source:t.source||"official",level:t.level,section:e,category_en:t.category_en,category_vi:t.category_vi,sub_category_en:t.sub_category_en,sub_category_vi:t.sub_category_vi,name_en:t.name_en,name_vi:t.name_vi},AI=async t=>{if(!t)return[];const e=[];try{const i=await Si.from("entries_vocabulary").select("*").or(`hanzi.ilike.%${t}%,pinyin.ilike.%${t}%,pinyin_clean.ilike.%${t}%,definition.ilike.%${t}%`).limit(10);i.data&&e.push(...i.data.map(l=>Ja(l,"vocabulary")));const o=await Si.from("entries_character").select("*").or(`char.ilike.%${t}%,pinyin.ilike.%${t}%,pinyin_clean.ilike.%${t}%`).limit(10);o.data&&e.push(...o.data.map(l=>Ja(l,"characters")));const a=await Si.from("entries_grammar").select("*").or(`name.ilike.%${t}%,pattern.ilike.%${t}%`).limit(10);a.data&&e.push(...a.data.map(l=>Ja(l,"grammar")))}catch(i){console.error("Search Error:",i)}return e};class xI extends Te.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("Uncaught error:",e,i)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:E.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center min-h-[400px] bg-red-50/50 rounded-2xl border border-red-100 m-4",children:[E.jsx("div",{className:"bg-white p-3 rounded-full shadow-sm mb-4",children:E.jsx(gT,{className:"w-8 h-8 text-red-500"})}),E.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Something went wrong"}),E.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"We encountered an unexpected error while loading this content."}),E.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-sm font-medium",children:[E.jsx(fT,{size:16}),"Reload Page"]}),!1]}):this.props.children}}const RI=()=>{const{language:t,setLanguage:e,t:i}=pr(),[o,a]=Te.useState("home"),[l,c]=Te.useState("1"),[h,g]=Te.useState("vocabulary"),[p,v]=Te.useState(null),[_,S]=Te.useState({status:"idle"}),[b,C]=Te.useState(!1),[x,R]=Te.useState(""),[U,G]=Te.useState(!1),P=Te.useRef(null),[J,Q]=Te.useState("all");Te.useEffect(()=>{const X=new URLSearchParams(window.location.search),D=X.get("view")||"home",$=X.get("level")||"1",ee=X.get("category")||"vocabulary",fe=X.get("q")||"";a(D),c($),g(ee),fe&&(R(fe),G(!0),j(fe))},[]),Te.useEffect(()=>{const X=()=>{const D=new URLSearchParams(window.location.search),$=D.get("view")||"home";if(a($),$==="explorer"){const ee=D.get("level")||"1",fe=D.get("category")||"vocabulary",te=D.get("q")||"";c(ee),g(fe),R(te),te?(G(!0),j(te)):G(!1)}else R(""),G(!1)};return window.addEventListener("popstate",X),()=>window.removeEventListener("popstate",X)},[]);const Y=(X,D,$,ee)=>{const fe=new URLSearchParams;X==="home"||(fe.set("view","explorer"),D&&fe.set("level",D),$&&fe.set("category",$),ee&&fe.set("q",ee));const te=`${window.location.pathname}${fe.toString()?"?"+fe.toString():""}`;window.history.pushState({},"",te)},K=(X,D)=>{c(X),g(D),a("explorer"),R(""),G(!1),Y("explorer",X,D)},ae=async(X=!1)=>{S({status:"loading"}),v(null);try{const D=await CI(l,h,X,t);v(D),S({status:"success"})}catch(D){S({status:"error",message:D instanceof Error?D.message:"Unknown error"})}},j=async X=>{if(!X.trim()){G(!1);return}G(!0),S({status:"loading"});try{const D=await AI(X);v({items:D,description:i("foundMatches",{count:D.length,query:X})}),Q("all"),S({status:"success"})}catch(D){console.error("Search failed",D),S({status:"error",message:"Search failed"})}};Te.useEffect(()=>{o==="explorer"&&!U&&ae(!1)},[l,h,o,U,t]);const ge=X=>{R(X),a("explorer"),j(X),Y("explorer",l,h,X)},Ne=()=>{R(""),G(!1),Y("explorer",l,h),o==="explorer"&&ae(!1)},Ie=X=>{e(X),C(!1)},Re=X=>{switch(X){case"zh":return"";case"vi":return"Ting Vit";case"en":return"English";default:return"Language"}},_e=X=>{switch(X){case"vocabulary":return{label:i("vocab"),icon:E.jsx(md,{size:16})};case"characters":return{label:i("chars"),icon:E.jsx(gd,{size:16})};case"grammar":return{label:i("grammar"),icon:E.jsx(_d,{size:16})};case"tasks":return{label:i("tasks"),icon:E.jsx(yd,{size:16})};case"topics":return{label:i("topics"),icon:E.jsx(vd,{size:16})};default:return{label:X,icon:null}}};return E.jsxs("div",{className:"flex flex-col md:flex-row h-screen bg-paper font-sans overflow-hidden",children:[o==="explorer"&&E.jsx(wT,{currentLevel:l,onSelectLevel:X=>{G(!1),R(""),c(X),Y("explorer",X,h)}}),E.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[E.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between shrink-0 z-20 gap-4",children:[E.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o==="explorer"&&E.jsx("button",{onClick:()=>{a("home"),Y("home")},className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Home",children:E.jsx(oT,{size:20})}),E.jsxs("div",{className:"relative flex-1 max-w-xl",children:[E.jsx("button",{onClick:()=>{x.trim()&&(o==="home"&&a("explorer"),j(x),Y("explorer",l,h,x))},className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-hsk-red transition-colors",disabled:_.status==="loading",children:_.status==="loading"?E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-hsk-red border-t-transparent"}):E.jsx(Yi,{size:18})}),E.jsx("input",{ref:P,type:"text",placeholder:i("searchPlaceholder"),value:x,onChange:X=>R(X.target.value),onKeyDown:X=>{X.key==="Enter"&&x.trim()&&(o==="home"&&a("explorer"),j(x),Y("explorer",l,h,x))},className:"w-full bg-gray-100 border-none rounded-full pl-10 pr-10 py-2 text-sm focus:ring-2 focus:ring-hsk-red/20 focus:bg-white transition-all outline-none text-ink placeholder-gray-500"}),x&&E.jsx("button",{onClick:Ne,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:E.jsx(zi,{size:16})})]})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("button",{onClick:()=>C(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-bold text-ink hover:bg-gray-100 rounded-full transition-colors",children:[E.jsx(iT,{size:18}),E.jsx("span",{className:"hidden sm:inline",children:Re(t)})]}),b&&E.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-xl border border-gray-100 py-1 z-50 animate-in fade-in slide-in-from-top-2",children:[E.jsxs("button",{onClick:()=>Ie("vi"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:["Ting Vit ",t==="vi"&&E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]}),E.jsxs("button",{onClick:()=>Ie("zh"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:[" ",t==="zh"&&E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]}),E.jsxs("button",{onClick:()=>Ie("en"),className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 hover:text-hsk-red transition-colors flex justify-between items-center text-ink",children:["English ",t==="en"&&E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-hsk-red"})]})]})]})]}),o==="home"?E.jsx(RT,{onNavigate:K,onSearch:ge}):E.jsx("main",{className:"flex-1 overflow-y-auto w-full relative",children:E.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto",children:[!U&&E.jsx("div",{className:"mb-8 text-center md:text-left flex flex-col md:flex-row justify-between items-end",children:E.jsxs("div",{children:[E.jsx("h2",{className:"text-3xl font-bold text-ink mb-2 font-serif",children:l==="all"?i("allLevels"):`HSK ${i("level")} ${l}`}),E.jsx("p",{className:"text-gray-500",children:i("heroDesc")})]})}),!U&&E.jsx(bT,{currentCategory:h,onSelectCategory:X=>{g(X),Y("explorer",l,X)}}),U&&E.jsx("div",{className:"mb-8",children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx("h2",{className:"text-2xl font-bold text-ink",children:i("searchResults")}),(p==null?void 0:p.items)&&p.items.length>0&&E.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.jsxs("button",{onClick:()=>Q("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${J==="all"?"bg-ink text-white shadow-md":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-gray-200"}`,children:[E.jsx(Yi,{size:16}),i("allResults")]}),Array.from(new Set(p.items.map(X=>X.section).filter(Boolean))).sort().map(X=>{const D=X,{label:$,icon:ee}=_e(D);return E.jsxs("button",{onClick:()=>Q(D),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${J===D?"bg-ink text-white shadow-md":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-gray-200"}`,children:[ee,$]},D)})]})]})}),_.status==="error"?E.jsxs("div",{className:"max-w-xl mx-auto text-center p-8 bg-red-50 rounded-2xl border border-red-100",children:[E.jsx(eT,{className:"w-10 h-10 text-red-500 mx-auto mb-4"}),E.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:i("loadingError")}),E.jsx("p",{className:"text-red-600 mb-6",children:_.message}),E.jsx("button",{onClick:()=>ae(!0),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:i("tryAgain")})]}):E.jsx(xI,{children:E.jsx(xT,{data:U&&J!=="all"&&p?{...p,items:p.items.filter(X=>X.section===J)}:p,category:U?"search":h,level:l,isLoading:_.status==="loading",onRefresh:()=>ae(!0)})})]})})]})]})},c0=document.getElementById("root");if(!c0)throw new Error("Could not find root element to mount to");const NI=BS.createRoot(c0);NI.render(E.jsx(DS.StrictMode,{children:E.jsx(TT,{children:E.jsx(RI,{})})}));
